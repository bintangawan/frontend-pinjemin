/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{var e={109:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}function r(e){var t="function"==typeof Map?new Map:void 0;return r=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(o())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var a=new(e.bind.apply(e,r));return n&&i(a,n.prototype),a}(e,arguments,a(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},r(e)}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(o=function(){return!!e})()}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var s=function(n){function r(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=function(t,n,r){return n=a(n),function(t,n){if(n&&("object"==e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,o()?Reflect.construct(n,r||[],a(t).constructor):n.apply(t,r))}(this,r)).shadow=t.attachShadow({mode:"open"}),t.setupEventListeners=t.setupEventListeners.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(r,n),s=r,(c=[{key:"connectedCallback",value:function(){this.render()}},{key:"render",value:function(){this.shadow.innerHTML='\n            <style>\n                /* Styling tetap sama, sesuaikan jika Anda menggunakan framework CSS */\n                :host {\n                    display: block;\n                    width: 100%; /* Pastikan komponen mengambil lebar penuh containernya */\n                }\n                .search-container {\n                     display: flex; /* Menggunakan flexbox untuk mensejajarkan input dan button */\n                     gap: 8px; /* Jarak antar elemen */\n                     align-items: center; /* Tengahkan elemen secara vertikal */\n                     max-width: 50em; /* Mengambil lebar penuh dari parent */\n                     margin: 0 auto; /* Pusatkan container search bar */\n                     padding: 0 1rem; /* Tambahkan padding horizontal agar konten tidak menempel tepi */\n                 }\n\n                 .search-input {\n                     flex-grow: 1; /* Input mengambil ruang kosong yang tersedia */\n                      padding: 0.5rem; /* p-2.5 */\n                      font-size: 0.875rem; /* text-sm */\n                      color: #1f2937; /* text-gray-900 */\n                      background-color: #f9fafb; /* bg-gray-50 */\n                      border: 1px solid #d1d5db; /* border border-gray-300 */\n                      border-radius: 0.375rem; /* rounded-md */\n                      box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n                      outline: none;\n                 }\n                 .search-input:focus {\n                      border-color: #6366f1; /* focus:border-blue-500 */\n                      box-shadow: 0 0 0 1px #6366f1; /* focus:ring focus:ring-blue-500 (simulasi ring) */\n                 }\n\n                /* Hapus styling untuk select karena sudah dihapus */\n                /* .search-select { ... } */\n                /* .search-select:focus { ... } */\n\n                .search-button {\n                    background-color: #3b82f6; /* bg-blue-500 */\n                    color: white; /* text-white */\n                    font-weight: 700; /* font-bold */\n                    padding: 0.5rem 1rem; /* Sesuaikan padding agar terlihat seimbang dengan input */\n                    border-radius: 0.375rem; /* rounded-md */\n                    font-size: 0.875rem; /* text-sm */\n                    cursor: pointer;\n                    border: none;\n                    outline: none;\n                    transition: background-color 0.2s ease-in-out;\n                     box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n                }\n                .search-button:hover {\n                    background-color: #2563eb; /* hover:bg-blue-700 */\n                }\n                .search-button:focus {\n                     box-shadow: 0 0 0 2px #bfdbfe, 0 0 0 4px #93c5fd; /* focus:ring focus:ring-blue-500 (simulasi) */\n                }\n\n                /* Dark mode styles jika diperlukan */\n                /* @media (prefers-color-scheme: dark) { ... } */\n\n            </style>\n            <div class="search-container">\n                <input type="text" class="search-input" placeholder="Cari item berdasarkan nama...">\n                \x3c!-- Hapus select kategori --\x3e\n                \x3c!-- Hapus select tipe --\x3e\n                 \x3c!-- Hapus select harga --\x3e\n                <button class="search-button">Cari</button>\n            </div>\n        ',this.setupEventListeners()}},{key:"setupEventListeners",value:function(){var e=this,t=this.shadow.querySelector(".search-input"),n=this.shadow.querySelector(".search-button"),r=function(){var n=t.value.trim(),r={};n&&(r.search=n),console.log("Dispatching search event with params:",r),e.dispatchEvent(new CustomEvent("search",{bubbles:!0,composed:!0,detail:{params:r}}))};n.addEventListener("click",r),t.addEventListener("keypress",(function(e){"Enter"===e.key&&(e.preventDefault(),r())}))}}])&&t(s.prototype,c),Object.defineProperty(s,"prototype",{writable:!1}),s;var s,c}(r(HTMLElement));customElements.define("search-bar",s)},115:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";t=function(){return r};var n,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(n){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),s=new I(r||[]);return a(i,"_invoke",{value:T(e,n,s)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=h;var f="suspendedStart",m="suspendedYield",g="executing",v="completed",b={};function y(){}function w(){}function x(){}var k={};d(k,c,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(A([])));S&&S!==o&&i.call(S,c)&&(k=S);var L=x.prototype=y.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function P(t,n){function r(o,a,s,c){var l=p(t[o],t,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==e(d)&&i.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):n.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(i,i):i()}})}function T(e,t,r){var o=f;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:n,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=j(s,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var l=p(e,t,r);if("normal"===l.type){if(o=r.done?v:m,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function j(e,t){var r=t.method,o=e.iterator[r];if(o===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=n,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=p(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,b;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,b):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,b)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(i.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(e(t)+" is not iterable")}return w.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},r.awrap=function(e){return{__await:e}},E(P.prototype),d(P.prototype,l,(function(){return this})),r.AsyncIterator=P,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new P(h(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(L),d(L,u,"Generator"),d(L,c,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=A,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return s.type="throw",s.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),b}},r}function n(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function s(e){n(a,o,i,s,c,"next",e)}function c(e){n(a,o,i,s,c,"throw",e)}s(void 0)}))}}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(s())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&c(o,n.prototype),o}(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},a(e)}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var u=function(n){function i(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=function(t,n,r){return n=l(n),function(t,n){if(n&&("object"==e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,s()?Reflect.construct(n,r||[],l(t).constructor):n.apply(t,r))}(this,i)).fetchProvinces=t.fetchProvinces.bind(t),t.populateProvincesDropdown=t.populateProvincesDropdown.bind(t),t.handleProvinceChange=t.handleProvinceChange.bind(t),t.fetchCitiesByProvinceId=t.fetchCitiesByProvinceId.bind(t),t.populateCitiesDropdown=t.populateCitiesDropdown.bind(t),t.setupFormSubmission=t.setupFormSubmission.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(i,n),a=i,u=[{key:"_emptyContent",value:function(){this.innerHTML=""}},{key:"connectedCallback",value:function(){this.render(),this.setupFormSubmission(),this.fetchProvinces(),this.setupProvinceChangeListener()}},{key:"disconnectedCallback",value:function(){var e=this.querySelector("#province");e&&e.removeEventListener("change",this.handleProvinceChange)}},{key:"render",value:function(){this._emptyContent(),this.innerHTML='\n            <div class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8">\n                <div class="sm:mx-auto sm:w-full sm:max-w-sm">\n                    <img class="mx-auto h-20 w-auto" src="./logo.png" alt="Pinjemin">\n                    <h2 class="mt-10 text-center text-2xl/9 font-bold tracking-tight text-gray-900">Create a New Account</h2>\n                </div>\n\n                <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-sm">\n                    <form id="register-form" class="space-y-6" action="#" method="POST">\n                        <div>\n                            <label for="name" class="block text-sm/6 font-medium text-gray-900">Name</label>\n                            <div class="mt-2">\n                                <input type="text" name="name" id="name" autocomplete="name" required class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">\n                            </div>\n                        </div>\n\n                        <div>\n                            <label for="email" class="block text-sm/6 font-medium text-gray-900">Email address</label>\n                            <div class="mt-2">\n                                <input type="email" name="email" id="email" autocomplete="email" required class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">\n                            </div>\n                        </div>\n\n                         <div>\n                            <label for="province" class="block text-sm/6 font-medium text-gray-900">Province</label>\n                            <div class="mt-2">\n                                <select id="province" name="province_name" required class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">\n                                    <option value="">Select Province</option>\n                                </select>\n                            </div>\n                        </div>\n\n                         <div>\n                            <label for="city" class="block text-sm/6 font-medium text-gray-900">City</label>\n                            <div class="mt-2">\n                                <select id="city" name="city_name" required disabled class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">\n                                    <option value="">Select City</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div>\n                            <div class="flex items-center justify-between">\n                                <label for="password" class="block text-sm/6 font-medium text-gray-900">Password</label>\n                            </div>\n                            <div class="mt-2">\n                                <input type="password" name="password" id="password" autocomplete="new-password" required class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">\n                            </div>\n                        </div>\n\n                         <div>\n                            <div class="flex items-center justify-between">\n                                <label for="retype-password" class="block text-sm/6 font-medium text-gray-900">Retype Password</label>\n                            </div>\n                            <div class="mt-2">\n                                <input type="password" name="retype-password" id="retype-password" autocomplete="new-password" required class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">\n                            </div>\n                        </div>\n\n\n                        <div>\n                            <button type="submit" class="flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Register</button>\n                        </div>\n                    </form>\n\n                    <p class="mt-10 text-center text-sm/6 text-gray-500">\n                        Already have an account?\n                        <a href="/#/login" class="font-semibold text-indigo-600 hover:text-indigo-500">Sign In now</a>\n                    </p>\n                </div>\n            </div>\n        '}},{key:"fetchProvinces",value:(h=r(t().mark((function e(){var n,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.querySelector("#province").innerHTML='<option value="">Select Province</option>',e.prev=2,e.next=5,fetch("https://kanglerian.my.id/api-wilayah-indonesia/api/provinces.json");case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,this.populateProvincesDropdown(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Error fetching provinces:",e.t0),alert("Failed to load provinces. Please try again later.");case 16:case"end":return e.stop()}}),e,this,[[2,12]])}))),function(){return h.apply(this,arguments)})},{key:"populateProvincesDropdown",value:function(e){var t=this.querySelector("#province");t&&e.forEach((function(e){var n=document.createElement("option");n.value=e.id,n.textContent=e.name,t.appendChild(n)}))}},{key:"setupProvinceChangeListener",value:function(){var e=this.querySelector("#province");e&&e.addEventListener("change",this.handleProvinceChange)}},{key:"handleProvinceChange",value:function(e){var t=e.target.value,n=this.querySelector("#city");n.innerHTML='<option value="">Select City</option>',n.disabled=!0,t&&this.fetchCitiesByProvinceId(t)}},{key:"fetchCitiesByProvinceId",value:(d=r(t().mark((function e(n){var r,o,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=this.querySelector("#city")).disabled=!0,e.prev=2,e.next=5,fetch("https://kanglerian.my.id/api-wilayah-indonesia/api/regencies/".concat(n,".json"));case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,this.populateCitiesDropdown(i),r.disabled=!1,e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("Error fetching cities for province ".concat(n,":"),e.t0),alert("Failed to load cities. Please try again later."),r.disabled=!0;case 18:case"end":return e.stop()}}),e,this,[[2,13]])}))),function(e){return d.apply(this,arguments)})},{key:"populateCitiesDropdown",value:function(e){var t=this.querySelector("#city");t&&e.forEach((function(e){var n=document.createElement("option");n.value=e.id,n.textContent=e.name,t.appendChild(n)}))}},{key:"setupFormSubmission",value:function(){var e=this,n=this.querySelector("#register-form");n.addEventListener("submit",function(){var o=r(t().mark((function r(o){var i,a,s,c,l,u,d,h,p,f,m;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.preventDefault(),i=new FormData(n),(a=Object.fromEntries(i.entries())).password===a["retype-password"]){t.next=6;break}return alert("Passwords do not match!"),t.abrupt("return");case 6:return delete a["retype-password"],s=e.querySelector("#province"),c=e.querySelector("#city"),l=s.options[s.selectedIndex],u=c.options[c.selectedIndex],d=l?l.textContent:"",h=u?u.textContent:"",a.province_name=d,a.city_name=h,console.log("Sending data to API:",a),t.prev=16,t.next=19,fetch("http://localhost:5000/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 19:return p=t.sent,t.next=22,p.json();case 22:f=t.sent,p.ok?"success"===f.status?(console.log("Registration successful:",f),localStorage.setItem("token",f.token),localStorage.setItem("user",JSON.stringify(f.data.user)),m=new CustomEvent("userLoggedIn",{detail:{user:f.data.user}}),window.dispatchEvent(m),alert("Registration successful!"),window.location.href="/#/login"):(console.error("Registration failed (API error):",f.message,f.errors),alert("Registration failed: "+f.message+(f.errors?"\n"+f.errors.map((function(e){return e.msg})).join("\n"):""))):(console.error("Registration failed (HTTP error):",p.status,f.message,f.errors),alert("Registration failed: "+f.message+(f.errors?"\n"+f.errors.map((function(e){return e.msg})).join("\n"):"An unexpected error occurred."))),t.next=30;break;case 26:t.prev=26,t.t0=t.catch(16),console.error("Error during registration API call:",t.t0),alert("An error occurred during registration. Please try again.");case 30:case"end":return t.stop()}}),r,null,[[16,26]])})));return function(e){return o.apply(this,arguments)}}())}}],u&&o(a.prototype,u),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,u,d,h}(a(HTMLElement));customElements.define("register-page",u)},407:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";t=function(){return r};var n,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(n){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),s=new I(r||[]);return a(i,"_invoke",{value:T(e,n,s)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=h;var f="suspendedStart",m="suspendedYield",g="executing",v="completed",b={};function y(){}function w(){}function x(){}var k={};d(k,c,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(A([])));S&&S!==o&&i.call(S,c)&&(k=S);var L=x.prototype=y.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function P(t,n){function r(o,a,s,c){var l=p(t[o],t,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==e(d)&&i.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):n.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(i,i):i()}})}function T(e,t,r){var o=f;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:n,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=j(s,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var l=p(e,t,r);if("normal"===l.type){if(o=r.done?v:m,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function j(e,t){var r=t.method,o=e.iterator[r];if(o===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=n,j(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=p(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,b;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,b):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,b)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(i.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(e(t)+" is not iterable")}return w.prototype=x,a(L,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},r.awrap=function(e){return{__await:e}},E(P.prototype),d(P.prototype,l,(function(){return this})),r.AsyncIterator=P,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new P(h(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(L),d(L,u,"Generator"),d(L,c,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=A,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return s.type="throw",s.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),b}},r}function n(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}function i(e){var t="function"==typeof Map?new Map:void 0;return i=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(a())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&s(o,n.prototype),o}(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)},i(e)}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a=function(){return!!e})()}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var l=function(o){function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,n,r){return n=c(n),function(t,n){if(n&&("object"==e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,a()?Reflect.construct(n,r||[],c(t).constructor):n.apply(t,r))}(this,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(i,o),l=i,u=[{key:"connectedCallback",value:function(){this.render(),this.setupFormSubmission()}},{key:"render",value:function(){this.innerHTML='\n            <div class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8">\n                <div class="sm:mx-auto sm:w-full sm:max-w-sm">\n                    <img class="mx-auto h-20 w-auto" src="./logo.png" alt="Pinjemin">\n                    <h2 class="mt-10 text-center text-2xl/9 font-bold tracking-tight text-gray-900">Sign in to your account</h2>\n                </div>\n\n                <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-sm">\n                    <form id="login-form" class="space-y-6" action="#" method="POST">\n                        <div>\n                            <label for="email" class="block text-sm/6 font-medium text-gray-900">Email address</label>\n                            <div class="mt-2">\n                                <input id="email" name="email" type="email" autocomplete="email" required class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">\n                            </div>\n                        </div>\n\n                        <div>\n                            <div class="flex items-center justify-between">\n                                <label for="password" class="block text-sm/6 font-medium text-gray-900">Password</label>\n                                \x3c!-- <div class="text-sm">\n                                    <a href="#" class="font-semibold text-indigo-600 hover:text-indigo-500">Forgot password?</a>\n                                </div> --\x3e\n                            </div>\n                            <div class="mt-2">\n                                <input id="password" name="password" type="password" autocomplete="current-password" required class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">\n                            </div>\n                        </div>\n\n                        <div>\n                            <button type="submit" class="flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Sign in</button>\n                        </div>\n                    </form>\n\n                    <p class="mt-10 text-center text-sm/6 text-gray-500">\n                        Not a member?\n                        <a href="/#/register" class="font-semibold text-indigo-600 hover:text-indigo-500">Create an account</a>\n                    </p>\n                </div>\n            </div>\n        '}},{key:"setupFormSubmission",value:function(){var e=this.querySelector("#login-form");e.addEventListener("submit",function(){var r,o=(r=t().mark((function n(r){var o,i,a,s,c;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),o=new FormData(e),i=Object.fromEntries(o.entries()),console.log("Sending login data to API:",i),t.prev=4,t.next=7,fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 7:return a=t.sent,t.next=10,a.json();case 10:s=t.sent,a.ok?"success"===s.status?(console.log("Login successful:",s),localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify(s.data.user)),c=new CustomEvent("userLoggedIn",{detail:{user:s.data.user}}),window.dispatchEvent(c),alert("Login successful!"),window.location.href="/#/"):(console.error("Login failed (API error):",s.message),alert("Login failed: "+s.message)):(console.error("Login failed (HTTP error):",a.status,s.message),alert("Login failed: "+s.message)),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(4),console.error("Error during login API call:",t.t0),alert("An error occurred during login. Please try again.");case 18:case"end":return t.stop()}}),n,null,[[4,14]])})),function(){var e=this,t=arguments;return new Promise((function(o,i){var a=r.apply(e,t);function s(e){n(a,o,i,s,c,"next",e)}function c(e){n(a,o,i,s,c,"throw",e)}s(void 0)}))});return function(e){return o.apply(this,arguments)}}())}}],u&&r(l.prototype,u),Object.defineProperty(l,"prototype",{writable:!1}),l;var l,u}(i(HTMLElement));customElements.define("login-page",l)},465:function(e){e.exports=function(){"use strict";function e(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function t(t,n){return t.get(e(t,n))}function n(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}const r={},o=e=>new Promise((t=>{if(!e)return t();const n=window.scrollX,o=window.scrollY;r.restoreFocusTimeout=setTimeout((()=>{r.previousActiveElement instanceof HTMLElement?(r.previousActiveElement.focus(),r.previousActiveElement=null):document.body&&document.body.focus(),t()}),100),window.scrollTo(n,o)})),i="swal2-",a=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce(((e,t)=>(e[t]=i+t,e)),{}),s=["success","warning","info","question","error"].reduce(((e,t)=>(e[t]=i+t,e)),{}),c="SweetAlert2:",l=e=>e.charAt(0).toUpperCase()+e.slice(1),u=e=>{console.warn(`${c} ${"object"==typeof e?e.join(" "):e}`)},d=e=>{console.error(`${c} ${e}`)},h=[],p=(e,t=null)=>{var n;n=`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`,h.includes(n)||(h.push(n),u(n))},f=e=>"function"==typeof e?e():e,m=e=>e&&"function"==typeof e.toPromise,g=e=>m(e)?e.toPromise():Promise.resolve(e),v=e=>e&&Promise.resolve(e)===e,b=()=>document.body.querySelector(`.${a.container}`),y=e=>{const t=b();return t?t.querySelector(e):null},w=e=>y(`.${e}`),x=()=>w(a.popup),k=()=>w(a.icon),_=()=>w(a.title),S=()=>w(a["html-container"]),L=()=>w(a.image),E=()=>w(a["progress-steps"]),P=()=>w(a["validation-message"]),T=()=>y(`.${a.actions} .${a.confirm}`),j=()=>y(`.${a.actions} .${a.cancel}`),O=()=>y(`.${a.actions} .${a.deny}`),C=()=>y(`.${a.loader}`),I=()=>w(a.actions),A=()=>w(a.footer),R=()=>w(a["timer-progress-bar"]),B=()=>w(a.close),D=()=>{const e=x();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort(((e,t)=>{const n=parseInt(e.getAttribute("tabindex")||"0"),r=parseInt(t.getAttribute("tabindex")||"0");return n>r?1:n<r?-1:0})),r=e.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),o=Array.from(r).filter((e=>"-1"!==e.getAttribute("tabindex")));return[...new Set(n.concat(o))].filter((e=>ee(e)))},M=()=>H(document.body,a.shown)&&!H(document.body,a["toast-shown"])&&!H(document.body,a["no-backdrop"]),q=()=>{const e=x();return!!e&&H(e,a.toast)},N=(e,t)=>{if(e.textContent="",t){const n=(new DOMParser).parseFromString(t,"text/html"),r=n.querySelector("head");r&&Array.from(r.childNodes).forEach((t=>{e.appendChild(t)}));const o=n.querySelector("body");o&&Array.from(o.childNodes).forEach((t=>{t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)}))}},H=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let t=0;t<n.length;t++)if(!e.classList.contains(n[t]))return!1;return!0},F=(e,t,n)=>{if(((e,t)=>{Array.from(e.classList).forEach((n=>{Object.values(a).includes(n)||Object.values(s).includes(n)||Object.values(t.showClass||{}).includes(n)||e.classList.remove(n)}))})(e,t),!t.customClass)return;const r=t.customClass[n];r&&("string"==typeof r||r.forEach?z(e,r):u(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`))},U=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${a.popup} > .${a[t]}`);case"checkbox":return e.querySelector(`.${a.popup} > .${a.checkbox} input`);case"radio":return e.querySelector(`.${a.popup} > .${a.radio} input:checked`)||e.querySelector(`.${a.popup} > .${a.radio} input:first-child`);case"range":return e.querySelector(`.${a.popup} > .${a.range} input`);default:return e.querySelector(`.${a.popup} > .${a.input}`)}},$=e=>{if(e.focus(),"file"!==e.type){const t=e.value;e.value="",e.value=t}},G=(e,t,n)=>{e&&t&&("string"==typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach((t=>{Array.isArray(e)?e.forEach((e=>{n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},z=(e,t)=>{G(e,t,!0)},V=(e,t)=>{G(e,t,!1)},K=(e,t)=>{const n=Array.from(e.children);for(let e=0;e<n.length;e++){const r=n[e];if(r instanceof HTMLElement&&H(r,t))return r}},Y=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||0===parseInt(n)?e.style.setProperty(t,"number"==typeof n?`${n}px`:n):e.style.removeProperty(t)},W=(e,t="flex")=>{e&&(e.style.display=t)},J=e=>{e&&(e.style.display="none")},X=(e,t="block")=>{e&&new MutationObserver((()=>{Q(e,e.innerHTML,t)})).observe(e,{childList:!0,subtree:!0})},Z=(e,t,n,r)=>{const o=e.querySelector(t);o&&o.style.setProperty(n,r)},Q=(e,t,n="flex")=>{t?W(e,n):J(e)},ee=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),te=e=>!!(e.scrollHeight>e.clientHeight),ne=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},re=(e,t=!1)=>{const n=R();n&&ee(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout((()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"}),10))},oe=`\n <div aria-labelledby="${a.title}" aria-describedby="${a["html-container"]}" class="${a.popup}" tabindex="-1">\n   <button type="button" class="${a.close}"></button>\n   <ul class="${a["progress-steps"]}"></ul>\n   <div class="${a.icon}"></div>\n   <img class="${a.image}" />\n   <h2 class="${a.title}" id="${a.title}"></h2>\n   <div class="${a["html-container"]}" id="${a["html-container"]}"></div>\n   <input class="${a.input}" id="${a.input}" />\n   <input type="file" class="${a.file}" />\n   <div class="${a.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${a.select}" id="${a.select}"></select>\n   <div class="${a.radio}"></div>\n   <label class="${a.checkbox}">\n     <input type="checkbox" id="${a.checkbox}" />\n     <span class="${a.label}"></span>\n   </label>\n   <textarea class="${a.textarea}" id="${a.textarea}"></textarea>\n   <div class="${a["validation-message"]}" id="${a["validation-message"]}"></div>\n   <div class="${a.actions}">\n     <div class="${a.loader}"></div>\n     <button type="button" class="${a.confirm}"></button>\n     <button type="button" class="${a.deny}"></button>\n     <button type="button" class="${a.cancel}"></button>\n   </div>\n   <div class="${a.footer}"></div>\n   <div class="${a["timer-progress-bar-container"]}">\n     <div class="${a["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),ie=()=>{r.currentInstance.resetValidationMessage()},ae=e=>{const t=(()=>{const e=b();return!!e&&(e.remove(),V([document.documentElement,document.body],[a["no-backdrop"],a["toast-shown"],a["has-column"]]),!0)})();if("undefined"==typeof window||"undefined"==typeof document)return void d("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=a.container,t&&z(n,a["no-transition"]),N(n,oe),n.dataset.swal2Theme=e.theme;const r="string"==typeof(o=e.target)?document.querySelector(o):o;var o;r.appendChild(n),e.topLayer&&(n.setAttribute("popover",""),n.showPopover()),(e=>{const t=x();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")})(e),(e=>{"rtl"===window.getComputedStyle(e).direction&&z(b(),a.rtl)})(r),(()=>{const e=x(),t=K(e,a.input),n=K(e,a.file),r=e.querySelector(`.${a.range} input`),o=e.querySelector(`.${a.range} output`),i=K(e,a.select),s=e.querySelector(`.${a.checkbox} input`),c=K(e,a.textarea);t.oninput=ie,n.onchange=ie,i.onchange=ie,s.onchange=ie,c.oninput=ie,r.oninput=()=>{ie(),o.value=r.value},r.onchange=()=>{ie(),o.value=r.value}})()},se=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):"object"==typeof e?ce(e,t):e&&N(t,e)},ce=(e,t)=>{e.jquery?le(t,e):N(t,e.toString())},le=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},ue=(e,t)=>{const n=I(),r=C();n&&r&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?W(n):J(n),F(n,t,"actions"),function(e,t,n){const r=T(),o=O(),i=j();r&&o&&i&&(he(r,"confirm",n),he(o,"deny",n),he(i,"cancel",n),function(e,t,n,r){r.buttonsStyling?(z([e,t,n],a.styled),r.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),de(e),de(t),de(n)):V([e,t,n],a.styled)}(r,o,i,n),n.reverseButtons&&(n.toast?(e.insertBefore(i,r),e.insertBefore(o,r)):(e.insertBefore(i,t),e.insertBefore(o,t),e.insertBefore(r,t))))}(n,r,t),N(r,t.loaderHtml||""),F(r,t,"loader"))};function de(e){const t=window.getComputedStyle(e);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function he(e,t,n){const r=l(t);Q(e,n[`show${r}Button`],"inline-block"),N(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=a[t],F(e,n,`${t}Button`)}const pe=(e,t)=>{const n=b();n&&(function(e,t){"string"==typeof t?e.style.background=t:t||z([document.documentElement,document.body],a["no-backdrop"])}(n,t.backdrop),function(e,t){t&&(t in a?z(e,a[t]):(u('The "position" parameter is not valid, defaulting to "center"'),z(e,a.center)))}(n,t.position),function(e,t){t&&z(e,a[`grow-${t}`])}(n,t.grow),F(n,t,"container"))};var fe={innerParams:new WeakMap,domCache:new WeakMap};const me=["input","file","range","select","radio","checkbox","textarea"],ge=e=>{if(!e.input)return;if(!_e[e.input])return void d(`Unexpected type of input! Expected ${Object.keys(_e).join(" | ")}, got "${e.input}"`);const t=xe(e.input);if(!t)return;const n=_e[e.input](t,e);W(t),e.inputAutoFocus&&setTimeout((()=>{$(n)}))},ve=(e,t)=>{const n=x();if(!n)return;const r=U(n,e);if(r){(e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}})(r);for(const e in t)r.setAttribute(e,t[e])}},be=e=>{if(!e.input)return;const t=xe(e.input);t&&F(t,e,"input")},ye=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},we=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),o=a["input-label"];r.setAttribute("for",e.id),r.className=o,"object"==typeof n.customClass&&z(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},xe=e=>{const t=x();if(t)return K(t,a[e]||a.input)},ke=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:v(t)||u(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},_e={};_e.text=_e.email=_e.password=_e.number=_e.tel=_e.url=_e.search=_e.date=_e["datetime-local"]=_e.time=_e.week=_e.month=(e,t)=>(ke(e,t.inputValue),we(e,e,t),ye(e,t),e.type=t.input,e),_e.file=(e,t)=>(we(e,e,t),ye(e,t),e),_e.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return ke(n,t.inputValue),n.type=t.input,ke(r,t.inputValue),we(n,e,t),e},_e.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");N(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return we(e,e,t),e},_e.radio=e=>(e.textContent="",e),_e.checkbox=(e,t)=>{const n=U(x(),"checkbox");n.value="1",n.checked=Boolean(t.inputValue);const r=e.querySelector("span");return N(r,t.inputPlaceholder||t.inputLabel),n},_e.textarea=(e,t)=>{ke(e,t.inputValue),ye(e,t),we(e,e,t);return setTimeout((()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(x()).width);new MutationObserver((()=>{if(!document.body.contains(e))return;const r=e.offsetWidth+(o=e,parseInt(window.getComputedStyle(o).marginLeft)+parseInt(window.getComputedStyle(o).marginRight));var o;r>n?x().style.width=`${r}px`:Y(x(),"width",t.width)})).observe(e,{attributes:!0,attributeFilter:["style"]})}})),e};const Se=(e,t)=>{const n=S();n&&(X(n),F(n,t,"htmlContainer"),t.html?(se(t.html,n),W(n,"block")):t.text?(n.textContent=t.text,W(n,"block")):J(n),((e,t)=>{const n=x();if(!n)return;const r=fe.innerParams.get(e),o=!r||t.input!==r.input;me.forEach((e=>{const r=K(n,a[e]);r&&(ve(e,t.inputAttributes),r.className=a[e],o&&J(r))})),t.input&&(o&&ge(t),be(t))})(e,t))},Le=(e,t)=>{for(const[n,r]of Object.entries(s))t.icon!==n&&V(e,r);z(e,t.icon&&s[t.icon]),Te(e,t),Ee(),F(e,t,"icon")},Ee=()=>{const e=x();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let e=0;e<n.length;e++)n[e].style.backgroundColor=t},Pe=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=je(t.iconHtml):"success"===t.icon?(r='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',n=n.replace(/ style=".*?"/g,"")):"error"===t.icon?r='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':t.icon&&(r=je({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&N(e,r)},Te=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Z(e,n,"background-color",t.iconColor);Z(e,".swal2-success-ring","border-color",t.iconColor)}},je=e=>`<div class="${a["icon-content"]}">${e}</div>`;let Oe=!1,Ce=0,Ie=0,Ae=0,Re=0;const Be=e=>{const t=x();if(e.target===t||k().contains(e.target)){Oe=!0;const n=qe(e);Ce=n.clientX,Ie=n.clientY,Ae=parseInt(t.style.insetInlineStart)||0,Re=parseInt(t.style.insetBlockStart)||0,z(t,"swal2-dragging")}},De=e=>{const t=x();if(Oe){let{clientX:n,clientY:r}=qe(e);t.style.insetInlineStart=`${Ae+(n-Ce)}px`,t.style.insetBlockStart=`${Re+(r-Ie)}px`}},Me=()=>{const e=x();Oe=!1,V(e,"swal2-dragging")},qe=e=>{let t=0,n=0;return e.type.startsWith("mouse")?(t=e.clientX,n=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},Ne=(e,t)=>{const n=b(),r=x();if(n&&r){if(t.toast){Y(n,"width",t.width),r.style.width="100%";const e=C();e&&r.insertBefore(e,k())}else Y(r,"width",t.width);Y(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),J(P()),He(r,t),t.draggable&&!t.toast?(z(r,a.draggable),(e=>{e.addEventListener("mousedown",Be),document.body.addEventListener("mousemove",De),e.addEventListener("mouseup",Me),e.addEventListener("touchstart",Be),document.body.addEventListener("touchmove",De),e.addEventListener("touchend",Me)})(r)):(V(r,a.draggable),(e=>{e.removeEventListener("mousedown",Be),document.body.removeEventListener("mousemove",De),e.removeEventListener("mouseup",Me),e.removeEventListener("touchstart",Be),document.body.removeEventListener("touchmove",De),e.removeEventListener("touchend",Me)})(r))}},He=(e,t)=>{const n=t.showClass||{};e.className=`${a.popup} ${ee(e)?n.popup:""}`,t.toast?(z([document.documentElement,document.body],a["toast-shown"]),z(e,a.toast)):z(e,a.modal),F(e,t,"popup"),"string"==typeof t.customClass&&z(e,t.customClass),t.icon&&z(e,a[`icon-${t.icon}`])},Fe=e=>{const t=document.createElement("li");return z(t,a["progress-step"]),N(t,e),t},Ue=e=>{const t=document.createElement("li");return z(t,a["progress-step-line"]),e.progressStepsDistance&&Y(t,"width",e.progressStepsDistance),t},$e=(e,t)=>{Ne(0,t),pe(0,t),((e,t)=>{const n=E();if(!n)return;const{progressSteps:r,currentProgressStep:o}=t;r&&0!==r.length&&void 0!==o?(W(n),n.textContent="",o>=r.length&&u("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach(((e,i)=>{const s=Fe(e);if(n.appendChild(s),i===o&&z(s,a["active-progress-step"]),i!==r.length-1){const e=Ue(t);n.appendChild(e)}}))):J(n)})(0,t),((e,t)=>{const n=fe.innerParams.get(e),r=k();if(r){if(n&&t.icon===n.icon)return Pe(r,t),void Le(r,t);if(t.icon||t.iconHtml){if(t.icon&&-1===Object.keys(s).indexOf(t.icon))return d(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),void J(r);W(r),Pe(r,t),Le(r,t),z(r,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Ee)}else J(r)}})(e,t),((e,t)=>{const n=L();n&&(t.imageUrl?(W(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),Y(n,"width",t.imageWidth),Y(n,"height",t.imageHeight),n.className=a.image,F(n,t,"image")):J(n))})(0,t),((e,t)=>{const n=_();n&&(X(n),Q(n,t.title||t.titleText,"block"),t.title&&se(t.title,n),t.titleText&&(n.innerText=t.titleText),F(n,t,"title"))})(0,t),((e,t)=>{const n=B();n&&(N(n,t.closeButtonHtml||""),F(n,t,"closeButton"),Q(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))})(0,t),Se(e,t),ue(0,t),((e,t)=>{const n=A();n&&(X(n),Q(n,t.footer,"block"),t.footer&&se(t.footer,n),F(n,t,"footer"))})(0,t);const n=x();"function"==typeof t.didRender&&n&&t.didRender(n),r.eventEmitter.emit("didRender",n)},Ge=()=>{var e;return null===(e=T())||void 0===e?void 0:e.click()},ze=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Ve=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},Ke=(e,t)=>{var n;const r=D();if(r.length)return-2===(e+=t)&&(e=r.length-1),e===r.length?e=0:-1===e&&(e=r.length-1),void r[e].focus();null===(n=x())||void 0===n||n.focus()},Ye=["ArrowRight","ArrowDown"],We=["ArrowLeft","ArrowUp"],Je=(e,t,n)=>{e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?Xe(t,e):"Tab"===t.key?Ze(t):[...Ye,...We].includes(t.key)?Qe(t.key):"Escape"===t.key&&et(t,e,n)))},Xe=(e,t)=>{if(!f(t.allowEnterKey))return;const n=U(x(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;Ge(),e.preventDefault()}},Ze=e=>{const t=e.target,n=D();let r=-1;for(let e=0;e<n.length;e++)if(t===n[e]){r=e;break}e.shiftKey?Ke(r,-1):Ke(r,1),e.stopPropagation(),e.preventDefault()},Qe=e=>{const t=I(),n=T(),r=O(),o=j();if(!(t&&n&&r&&o))return;const i=[n,r,o];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const a=Ye.includes(e)?"nextElementSibling":"previousElementSibling";let s=document.activeElement;if(s){for(let e=0;e<t.children.length;e++){if(s=s[a],!s)return;if(s instanceof HTMLButtonElement&&ee(s))break}s instanceof HTMLButtonElement&&s.focus()}},et=(e,t,n)=>{f(t.allowEscapeKey)&&(e.preventDefault(),n(ze.esc))};var tt={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const nt=()=>{Array.from(document.body.children).forEach((e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")}))},rt="undefined"!=typeof window&&!!window.GestureEvent,ot=()=>{const e=b();if(!e)return;let t;e.ontouchstart=e=>{t=it(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},it=e=>{const t=e.target,n=b(),r=S();return!(!n||!r||at(e)||st(e)||t!==n&&(te(n)||!(t instanceof HTMLElement)||((e,t)=>{let n=e;for(;n&&n!==t;){if(te(n))return!0;n=n.parentElement}return!1})(t,r)||"INPUT"===t.tagName||"TEXTAREA"===t.tagName||te(r)&&r.contains(t)))},at=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType,st=e=>e.touches&&e.touches.length>1;let ct=null;const lt=e=>{null===ct&&(document.body.scrollHeight>window.innerHeight||"scroll"===e)&&(ct=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${ct+(()=>{const e=document.createElement("div");e.className=a["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t})()}px`)};function ut(e,t,n,i){q()?bt(e,i):(o(n).then((()=>bt(e,i))),Ve(r)),rt?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),M()&&(null!==ct&&(document.body.style.paddingRight=`${ct}px`,ct=null),(()=>{if(H(document.body,a.iosfix)){const e=parseInt(document.body.style.top,10);V(document.body,a.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}})(),nt()),V([document.documentElement,document.body],[a.shown,a["height-auto"],a["no-backdrop"],a["toast-shown"]])}function dt(e){e=mt(e);const t=tt.swalPromiseResolve.get(this),n=ht(this);this.isAwaitingPromise?e.isDismissed||(ft(this),t(e)):n&&t(e)}const ht=e=>{const t=x();if(!t)return!1;const n=fe.innerParams.get(e);if(!n||H(t,n.hideClass.popup))return!1;V(t,n.showClass.popup),z(t,n.hideClass.popup);const r=b();return V(r,n.showClass.backdrop),z(r,n.hideClass.backdrop),gt(e,t,n),!0};function pt(e){const t=tt.swalPromiseReject.get(this);ft(this),t&&t(e)}const ft=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,fe.innerParams.get(e)||e._destroy())},mt=e=>void 0===e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),gt=(e,t,n)=>{var o;const i=b(),a=ne(t);"function"==typeof n.willClose&&n.willClose(t),null===(o=r.eventEmitter)||void 0===o||o.emit("willClose",t),a?vt(e,t,i,n.returnFocus,n.didClose):ut(e,i,n.returnFocus,n.didClose)},vt=(e,t,n,o,i)=>{r.swalCloseEventFinishedCallback=ut.bind(null,e,n,o,i);const a=function(e){var n;e.target===t&&(null===(n=r.swalCloseEventFinishedCallback)||void 0===n||n.call(r),delete r.swalCloseEventFinishedCallback,t.removeEventListener("animationend",a),t.removeEventListener("transitionend",a))};t.addEventListener("animationend",a),t.addEventListener("transitionend",a)},bt=(e,t)=>{setTimeout((()=>{var n;"function"==typeof t&&t.bind(e.params)(),null===(n=r.eventEmitter)||void 0===n||n.emit("didClose"),e._destroy&&e._destroy()}))},yt=e=>{let t=x();if(t||new Qn,t=x(),!t)return;const n=C();q()?J(k()):wt(t,e),W(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},wt=(e,t)=>{const n=I(),r=C();n&&r&&(!t&&ee(T())&&(t=T()),W(n),t&&(J(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),z([e,n],a.loading))},xt=e=>e.checked?1:0,kt=e=>e.checked?e.value:null,_t=e=>e.files&&e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null,St=(e,t)=>{const n=x();if(!n)return;const r=e=>{"select"===t.input?function(e,t,n){const r=K(e,a.select);if(!r)return;const o=(e,t,r)=>{const o=document.createElement("option");o.value=r,N(o,t),o.selected=Pt(r,n.inputValue),e.appendChild(o)};t.forEach((e=>{const t=e[0],n=e[1];if(Array.isArray(n)){const e=document.createElement("optgroup");e.label=t,e.disabled=!1,r.appendChild(e),n.forEach((t=>o(e,t[1],t[0])))}else o(r,n,t)})),r.focus()}(n,Et(e),t):"radio"===t.input&&function(e,t,n){const r=K(e,a.radio);if(!r)return;t.forEach((e=>{const t=e[0],o=e[1],i=document.createElement("input"),s=document.createElement("label");i.type="radio",i.name=a.radio,i.value=t,Pt(t,n.inputValue)&&(i.checked=!0);const c=document.createElement("span");N(c,o),c.className=a.label,s.appendChild(i),s.appendChild(c),r.appendChild(s)}));const o=r.querySelectorAll("input");o.length&&o[0].focus()}(n,Et(e),t)};m(t.inputOptions)||v(t.inputOptions)?(yt(T()),g(t.inputOptions).then((t=>{e.hideLoading(),r(t)}))):"object"==typeof t.inputOptions?r(t.inputOptions):d("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof t.inputOptions)},Lt=(e,t)=>{const n=e.getInput();n&&(J(n),g(t.inputValue).then((r=>{n.value="number"===t.input?`${parseFloat(r)||0}`:`${r}`,W(n),n.focus(),e.hideLoading()})).catch((t=>{d(`Error in inputValue promise: ${t}`),n.value="",W(n),n.focus(),e.hideLoading()})))};const Et=e=>{const t=[];return e instanceof Map?e.forEach(((e,n)=>{let r=e;"object"==typeof r&&(r=Et(r)),t.push([n,r])})):Object.keys(e).forEach((n=>{let r=e[n];"object"==typeof r&&(r=Et(r)),t.push([n,r])})),t},Pt=(e,t)=>!!t&&t.toString()===e.toString(),Tt=(e,t)=>{const n=fe.innerParams.get(e);if(!n.input)return void d(`The "input" parameter is needed to be set when using returnInputValueOn${l(t)}`);const r=e.getInput(),o=((e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return xt(n);case"radio":return kt(n);case"file":return _t(n);default:return t.inputAutoTrim?n.value.trim():n.value}})(e,n);n.inputValidator?jt(e,o,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):"deny"===t?Ot(e,o):At(e,o)},jt=(e,t,n)=>{const r=fe.innerParams.get(e);e.disableInput(),Promise.resolve().then((()=>g(r.inputValidator(t,r.validationMessage)))).then((r=>{e.enableButtons(),e.enableInput(),r?e.showValidationMessage(r):"deny"===n?Ot(e,t):At(e,t)}))},Ot=(e,t)=>{const n=fe.innerParams.get(e||void 0);n.showLoaderOnDeny&&yt(O()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then((()=>g(n.preDeny(t,n.validationMessage)))).then((n=>{!1===n?(e.hideLoading(),ft(e)):e.close({isDenied:!0,value:void 0===n?t:n})})).catch((t=>It(e||void 0,t)))):e.close({isDenied:!0,value:t})},Ct=(e,t)=>{e.close({isConfirmed:!0,value:t})},It=(e,t)=>{e.rejectPromise(t)},At=(e,t)=>{const n=fe.innerParams.get(e||void 0);n.showLoaderOnConfirm&&yt(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then((()=>g(n.preConfirm(t,n.validationMessage)))).then((n=>{ee(P())||!1===n?(e.hideLoading(),ft(e)):Ct(e,void 0===n?t:n)})).catch((t=>It(e||void 0,t)))):Ct(e,t)};function Rt(){const e=fe.innerParams.get(this);if(!e)return;const t=fe.domCache.get(this);J(t.loader),q()?e.icon&&W(k()):Bt(t),V([t.popup,t.actions],a.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const Bt=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?W(t[0],"inline-block"):!ee(T())&&!ee(O())&&!ee(j())&&J(e.actions)};function Dt(){const e=fe.innerParams.get(this),t=fe.domCache.get(this);return t?U(t.popup,e.input):null}function Mt(e,t,n){const r=fe.domCache.get(e);t.forEach((e=>{r[e].disabled=n}))}function qt(e,t){const n=x();if(n&&e)if("radio"===e.type){const e=n.querySelectorAll(`[name="${a.radio}"]`);for(let n=0;n<e.length;n++)e[n].disabled=t}else e.disabled=t}function Nt(){Mt(this,["confirmButton","denyButton","cancelButton"],!1)}function Ht(){Mt(this,["confirmButton","denyButton","cancelButton"],!0)}function Ft(){qt(this.getInput(),!1)}function Ut(){qt(this.getInput(),!0)}function $t(e){const t=fe.domCache.get(this),n=fe.innerParams.get(this);N(t.validationMessage,e),t.validationMessage.className=a["validation-message"],n.customClass&&n.customClass.validationMessage&&z(t.validationMessage,n.customClass.validationMessage),W(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",a["validation-message"]),$(r),z(r,a.inputerror))}function Gt(){const e=fe.domCache.get(this);e.validationMessage&&J(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),V(t,a.inputerror))}const zt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},Vt=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Kt={allowEnterKey:void 0},Yt=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Wt=e=>Object.prototype.hasOwnProperty.call(zt,e),Jt=e=>-1!==Vt.indexOf(e),Xt=e=>Kt[e],Zt=e=>{Wt(e)||u(`Unknown parameter "${e}"`)},Qt=e=>{Yt.includes(e)&&u(`The parameter "${e}" is incompatible with toasts`)},en=e=>{const t=Xt(e);t&&p(e,t)},tn=e=>{!1===e.backdrop&&e.allowOutsideClick&&u('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(e.theme)&&u(`Invalid theme "${e.theme}"`);for(const t in e)Zt(t),e.toast&&Qt(t),en(t)};function nn(e){const t=b(),n=x(),r=fe.innerParams.get(this);if(!n||H(n,r.hideClass.popup))return void u("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const o=rn(e),i=Object.assign({},r,o);tn(i),t.dataset.swal2Theme=i.theme,$e(this,i),fe.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const rn=e=>{const t={};return Object.keys(e).forEach((n=>{Jt(n)?t[n]=e[n]:u(`Invalid parameter to update: ${n}`)})),t};function on(){const e=fe.domCache.get(this),t=fe.innerParams.get(this);t?(e.popup&&r.swalCloseEventFinishedCallback&&(r.swalCloseEventFinishedCallback(),delete r.swalCloseEventFinishedCallback),"function"==typeof t.didDestroy&&t.didDestroy(),r.eventEmitter.emit("didDestroy"),an(this)):sn(this)}const an=e=>{sn(e),delete e.params,delete r.keydownHandler,delete r.keydownTarget,delete r.currentInstance},sn=e=>{e.isAwaitingPromise?(cn(fe,e),e.isAwaitingPromise=!0):(cn(tt,e),cn(fe,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},cn=(e,t)=>{for(const n in e)e[n].delete(t)};var ln=Object.freeze({__proto__:null,_destroy:on,close:dt,closeModal:dt,closePopup:dt,closeToast:dt,disableButtons:Ht,disableInput:Ut,disableLoading:Rt,enableButtons:Nt,enableInput:Ft,getInput:Dt,handleAwaitingPromise:ft,hideLoading:Rt,rejectPromise:pt,resetValidationMessage:Gt,showValidationMessage:$t,update:nn});const un=(e,t,n)=>{t.popup.onclick=()=>{e&&(dn(e)||e.timer||e.input)||n(ze.close)}},dn=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let hn=!1;const pn=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(hn=!0)}}},fn=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(t){e.popup.onmouseup=()=>{},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&(hn=!0)}}},mn=(e,t,n)=>{t.container.onclick=r=>{hn?hn=!1:r.target===t.container&&f(e.allowOutsideClick)&&n(ze.backdrop)}},gn=e=>e instanceof Element||(e=>"object"==typeof e&&e.jquery)(e);const vn=()=>{if(r.timeout)return(()=>{const e=R();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width=`${n}%`})(),r.timeout.stop()},bn=()=>{if(r.timeout){const e=r.timeout.start();return re(e),e}};let yn=!1;const wn={};const xn=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in wn){const n=t.getAttribute(e);if(n)return void wn[e].fire({template:n})}};r.eventEmitter=new class{constructor(){this.events={}}_getHandlersByEventName(e){return void 0===this.events[e]&&(this.events[e]=[]),this.events[e]}on(e,t){const n=this._getHandlersByEventName(e);n.includes(t)||n.push(t)}once(e,t){const n=(...r)=>{this.removeListener(e,n),t.apply(this,r)};this.on(e,n)}emit(e,...t){this._getHandlersByEventName(e).forEach((e=>{try{e.apply(this,t)}catch(e){console.error(e)}}))}removeListener(e,t){const n=this._getHandlersByEventName(e),r=n.indexOf(t);r>-1&&n.splice(r,1)}removeAllListeners(e){void 0!==this.events[e]&&(this.events[e].length=0)}reset(){this.events={}}};var kn=Object.freeze({__proto__:null,argsToParams:e=>{const t={};return"object"!=typeof e[0]||gn(e[0])?["title","html","icon"].forEach(((n,r)=>{const o=e[r];"string"==typeof o||gn(o)?t[n]=o:void 0!==o&&d(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof o}`)})):Object.assign(t,e[0]),t},bindClickHandler:function(e="data-swal-template"){wn[e]=this,yn||(document.body.addEventListener("click",xn),yn=!0)},clickCancel:()=>{var e;return null===(e=j())||void 0===e?void 0:e.click()},clickConfirm:Ge,clickDeny:()=>{var e;return null===(e=O())||void 0===e?void 0:e.click()},enableLoading:yt,fire:function(...e){return new this(...e)},getActions:I,getCancelButton:j,getCloseButton:B,getConfirmButton:T,getContainer:b,getDenyButton:O,getFocusableElements:D,getFooter:A,getHtmlContainer:S,getIcon:k,getIconContent:()=>w(a["icon-content"]),getImage:L,getInputLabel:()=>w(a["input-label"]),getLoader:C,getPopup:x,getProgressSteps:E,getTimerLeft:()=>r.timeout&&r.timeout.getTimerLeft(),getTimerProgressBar:R,getTitle:_,getValidationMessage:P,increaseTimer:e=>{if(r.timeout){const t=r.timeout.increase(e);return re(t,!0),t}},isDeprecatedParameter:Xt,isLoading:()=>{const e=x();return!!e&&e.hasAttribute("data-loading")},isTimerRunning:()=>!(!r.timeout||!r.timeout.isRunning()),isUpdatableParameter:Jt,isValidParameter:Wt,isVisible:()=>ee(x()),mixin:function(e){return class extends(this){_main(t,n){return super._main(t,Object.assign({},e,n))}}},off:(e,t)=>{e?t?r.eventEmitter.removeListener(e,t):r.eventEmitter.removeAllListeners(e):r.eventEmitter.reset()},on:(e,t)=>{r.eventEmitter.on(e,t)},once:(e,t)=>{r.eventEmitter.once(e,t)},resumeTimer:bn,showLoading:yt,stopTimer:vn,toggleTimer:()=>{const e=r.timeout;return e&&(e.running?vn():bn())}});class _n{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Sn=["swal-title","swal-html","swal-footer"],Ln=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach((e=>{An(e,["name","value"]);const n=e.getAttribute("name"),r=e.getAttribute("value");n&&r&&(t[n]="boolean"==typeof zt[n]?"false"!==r:"object"==typeof zt[n]?JSON.parse(r):r)})),t},En=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach((e=>{const n=e.getAttribute("name"),r=e.getAttribute("value");n&&r&&(t[n]=new Function(`return ${r}`)())})),t},Pn=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach((e=>{An(e,["type","color","aria-label"]);const n=e.getAttribute("type");n&&["confirm","cancel","deny"].includes(n)&&(t[`${n}ButtonText`]=e.innerHTML,t[`show${l(n)}Button`]=!0,e.hasAttribute("color")&&(t[`${n}ButtonColor`]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t[`${n}ButtonAriaLabel`]=e.getAttribute("aria-label")))})),t},Tn=e=>{const t={},n=e.querySelector("swal-image");return n&&(An(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},jn=e=>{const t={},n=e.querySelector("swal-icon");return n&&(An(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},On=e=>{const t={},n=e.querySelector("swal-input");n&&(An(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach((e=>{An(e,["value"]);const n=e.getAttribute("value");if(!n)return;const r=e.innerHTML;t.inputOptions[n]=r}))),t},Cn=(e,t)=>{const n={};for(const r in t){const o=t[r],i=e.querySelector(o);i&&(An(i,[]),n[o.replace(/^swal-/,"")]=i.innerHTML.trim())}return n},In=e=>{const t=Sn.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach((e=>{const n=e.tagName.toLowerCase();t.includes(n)||u(`Unrecognized element <${n}>`)}))},An=(e,t)=>{Array.from(e.attributes).forEach((n=>{-1===t.indexOf(n.name)&&u([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."])}))},Rn=e=>{const t=b(),n=x();"function"==typeof e.willOpen&&e.willOpen(n),r.eventEmitter.emit("willOpen",n);const o=window.getComputedStyle(document.body).overflowY;qn(t,n,e),setTimeout((()=>{Dn(t,n)}),10),M()&&(Mn(t,e.scrollbarPadding,o),(()=>{const e=b();Array.from(document.body.children).forEach((t=>{t.contains(e)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))}))})()),q()||r.previousActiveElement||(r.previousActiveElement=document.activeElement),"function"==typeof e.didOpen&&setTimeout((()=>e.didOpen(n))),r.eventEmitter.emit("didOpen",n),V(t,a["no-transition"])},Bn=e=>{const t=x();if(e.target!==t)return;const n=b();t.removeEventListener("animationend",Bn),t.removeEventListener("transitionend",Bn),n.style.overflowY="auto"},Dn=(e,t)=>{ne(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Bn),t.addEventListener("transitionend",Bn)):e.style.overflowY="auto"},Mn=(e,t,n)=>{(()=>{if(rt&&!H(document.body,a.iosfix)){const e=document.body.scrollTop;document.body.style.top=-1*e+"px",z(document.body,a.iosfix),ot()}})(),t&&"hidden"!==n&&lt(n),setTimeout((()=>{e.scrollTop=0}))},qn=(e,t,n)=>{z(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),W(t,"grid"),setTimeout((()=>{z(t,n.showClass.popup),t.style.removeProperty("opacity")}),10)):W(t,"grid"),z([document.documentElement,document.body],a.shown),n.heightAuto&&n.backdrop&&!n.toast&&z([document.documentElement,document.body],a["height-auto"])};var Nn=(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),Hn=(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL");function Fn(e){(function(e){e.inputValidator||("email"===e.input&&(e.inputValidator=Nn),"url"===e.input&&(e.inputValidator=Hn))})(e),e.showLoaderOnConfirm&&!e.preConfirm&&u("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function(e){(!e.target||"string"==typeof e.target&&!document.querySelector(e.target)||"string"!=typeof e.target&&!e.target.appendChild)&&(u('Target parameter is not valid, defaulting to "body"'),e.target="body")}(e),"string"==typeof e.title&&(e.title=e.title.split("\n").join("<br />")),ae(e)}let Un;var $n=new WeakMap;class Gn{constructor(...t){if(n(this,$n,void 0),"undefined"==typeof window)return;Un=this;const r=Object.freeze(this.constructor.argsToParams(t));var o,i,a;this.params=r,this.isAwaitingPromise=!1,o=$n,i=this,a=this._main(Un.params),o.set(e(o,i),a)}_main(e,t={}){if(tn(Object.assign({},t,e)),r.currentInstance){const e=tt.swalPromiseResolve.get(r.currentInstance),{isAwaitingPromise:t}=r.currentInstance;r.currentInstance._destroy(),t||e({isDismissed:!0}),M()&&nt()}r.currentInstance=Un;const n=Vn(e,t);Fn(n),Object.freeze(n),r.timeout&&(r.timeout.stop(),delete r.timeout),clearTimeout(r.restoreFocusTimeout);const o=Kn(Un);return $e(Un,n),fe.innerParams.set(Un,n),zn(Un,o,n)}then(e){return t($n,this).then(e)}finally(e){return t($n,this).finally(e)}}const zn=(e,t,n)=>new Promise(((o,i)=>{const a=t=>{e.close({isDismissed:!0,dismiss:t})};tt.swalPromiseResolve.set(e,o),tt.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{(e=>{const t=fe.innerParams.get(e);e.disableButtons(),t.input?Tt(e,"confirm"):At(e,!0)})(e)},t.denyButton.onclick=()=>{(e=>{const t=fe.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?Tt(e,"deny"):Ot(e,!1)})(e)},t.cancelButton.onclick=()=>{((e,t)=>{e.disableButtons(),t(ze.cancel)})(e,a)},t.closeButton.onclick=()=>{a(ze.close)},((e,t,n)=>{e.toast?un(e,t,n):(pn(t),fn(t),mn(e,t,n))})(n,t,a),((e,t,n)=>{Ve(e),t.toast||(e.keydownHandler=e=>Je(t,e,n),e.keydownTarget=t.keydownListenerCapture?window:x(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)})(r,n,a),((e,t)=>{"select"===t.input||"radio"===t.input?St(e,t):["text","email","number","tel","textarea"].some((e=>e===t.input))&&(m(t.inputValue)||v(t.inputValue))&&(yt(T()),Lt(e,t))})(e,n),Rn(n),Yn(r,n,a),Wn(t,n),setTimeout((()=>{t.container.scrollTop=0}))})),Vn=(e,t)=>{const n=(e=>{const t="string"==typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return In(n),Object.assign(Ln(n),En(n),Pn(n),Tn(n),jn(n),On(n),Cn(n,Sn))})(e),r=Object.assign({},zt,t,n,e);return r.showClass=Object.assign({},zt.showClass,r.showClass),r.hideClass=Object.assign({},zt.hideClass,r.hideClass),!1===r.animation&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},Kn=e=>{const t={popup:x(),container:b(),actions:I(),confirmButton:T(),denyButton:O(),cancelButton:j(),loader:C(),closeButton:B(),validationMessage:P(),progressSteps:E()};return fe.domCache.set(e,t),t},Yn=(e,t,n)=>{const r=R();J(r),t.timer&&(e.timeout=new _n((()=>{n("timer"),delete e.timeout}),t.timer),t.timerProgressBar&&(W(r),F(r,t,"timerProgressBar"),setTimeout((()=>{e.timeout&&e.timeout.running&&re(t.timer)}))))},Wn=(e,t)=>{if(!t.toast)return f(t.allowEnterKey)?void(Jn(e)||Xn(e,t)||Ke(-1,1)):(p("allowEnterKey"),void Zn())},Jn=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const e of t)if(e instanceof HTMLElement&&ee(e))return e.focus(),!0;return!1},Xn=(e,t)=>t.focusDeny&&ee(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&ee(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!ee(e.confirmButton)||(e.confirmButton.focus(),0)),Zn=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!=typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/864e5>3&&setTimeout((()=>{document.body.style.pointerEvents="none";const e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout((()=>{e.play().catch((()=>{}))}),2500)}),500):localStorage.setItem("swal-initiation",`${e}`)}Gn.prototype.disableButtons=Ht,Gn.prototype.enableButtons=Nt,Gn.prototype.getInput=Dt,Gn.prototype.disableInput=Ut,Gn.prototype.enableInput=Ft,Gn.prototype.hideLoading=Rt,Gn.prototype.disableLoading=Rt,Gn.prototype.showValidationMessage=$t,Gn.prototype.resetValidationMessage=Gt,Gn.prototype.close=dt,Gn.prototype.closePopup=dt,Gn.prototype.closeModal=dt,Gn.prototype.closeToast=dt,Gn.prototype.rejectPromise=pt,Gn.prototype.update=nn,Gn.prototype._destroy=on,Object.assign(Gn,kn),Object.keys(ln).forEach((e=>{Gn[e]=function(...t){return Un&&Un[e]?Un[e](...t):null}})),Gn.DismissReason=ze,Gn.version="11.22.0";const Qn=Gn;return Qn.default=Qn,Qn}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}n.r(e),n.d(e,{Decoder:()=>on,Encoder:()=>nn,PacketType:()=>tn,protocol:()=>en});var i=[{id:"hobby-1-1",category:"Photography",name:"Canon EOS 80D",description:"DSLR camera for enthusiasts",price:12e6,imageUrl:"./eos-80d.jpg",type:"buy"},{id:"hobby-1-2",category:"Photography",name:"Sony Alpha a6000",description:"Mirrorless camera with fast autofocus",price:9e6,imageUrl:"https://via.placeholder.com/150",type:"rent",rentDuration:"24 hours"},{id:"hobby-2-1",category:"Gaming",name:"PlayStation 5",description:"Next-gen gaming console",price:8e6,imageUrl:"https://via.placeholder.com/150",type:"rent",rentDuration:"24 hours"},{id:"hobby-2-2",category:"Gaming",name:"Gaming PC",description:"Custom-built high-end gaming PC",price:25e6,imageUrl:"https://via.placeholder.com/150",type:"buy"},{id:"hobby-3-1",category:"Reading",name:"Kindle Paperwhite",description:"E-reader with adjustable warm light",price:2e6,imageUrl:"https://via.placeholder.com/150",type:"buy"},{id:"hobby-3-2",category:"Reading",name:"Noise Cancelling Headphones",description:"Headphones for distraction-free reading",price:35e5,imageUrl:"https://via.placeholder.com/150",type:"buy"},{id:"hobby-4-1",category:"Cooking",name:"KitchenAid Stand Mixer",description:"Versatile stand mixer for baking",price:7e6,imageUrl:"https://via.placeholder.com/150",type:"buy"},{id:"hobby-4-2",category:"Cooking",name:"Sous Vide Immersion Circulator",description:"Precision cooking device",price:3e6,imageUrl:"https://via.placeholder.com/150",type:"rent",rentDuration:"24 hours"},{id:"hobby-5-1",category:"Gardening",name:"Gardening Tool Set",description:"Complete gardening tool set",price:1e6,imageUrl:"https://via.placeholder.com/150",type:"rent",rentDuration:"12 hours"},{id:"hobby-5-2",category:"Gardening",name:"Raised Garden Bed",description:"Elevated garden bed",price:2e6,imageUrl:"https://via.placeholder.com/150",type:"buy"},{id:"hobby-6-1",category:"Music",name:"Acoustic Guitar",description:"Beginner-friendly acoustic guitar",price:15e5,imageUrl:"https://via.placeholder.com/150",type:"rent",rentDuration:"24 hours"},{id:"hobby-6-2",category:"Music",name:"Headphones",description:"Studio-quality headphones",price:25e5,imageUrl:"https://via.placeholder.com/150",type:"buy"},{id:"hobby-7-1",category:"Sports",name:"Basketball",description:"Official size basketball",price:3e5,imageUrl:"https://via.placeholder.com/150",type:"buy"},{id:"hobby-7-2",category:"Sports",name:"Tennis Racket",description:"Lightweight tennis racket",price:12e5,imageUrl:"https://via.placeholder.com/150",type:"rent",rentDuration:"12 hours"},{id:"hobby-8-1",category:"Drawing",name:"Drawing Pencils",description:"Set of drawing pencils",price:2e5,imageUrl:"https://via.placeholder.com/150",type:"buy"},{id:"hobby-8-2",category:"Drawing",name:"Easel",description:"Adjustable easel",price:1e6,imageUrl:"https://via.placeholder.com/150",type:"buy"},{id:"hobby-9-1",category:"Traveling",name:"Backpack",description:"Travel backpack",price:1e6,imageUrl:"https://via.placeholder.com/150",type:"buy"},{id:"hobby-9-2",category:"Traveling",name:"Camera",description:"Compact camera",price:3e6,imageUrl:"https://via.placeholder.com/150",type:"rent",rentDuration:"24 hours"},{id:"hobby-10-1",category:"Writing",name:"Laptop",description:"Lightweight laptop",price:8e6,imageUrl:"https://via.placeholder.com/150",type:"buy"},{id:"hobby-10-2",category:"Writing",name:"Keyboard",description:"Mechanical keyboard",price:15e5,imageUrl:"https://via.placeholder.com/150",type:"buy"}];console.log(i);var a=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"getAll",value:function(){return i}},{key:"getByCategory",value:function(e){var t=e.toLowerCase();return i.filter((function(e){return(e.category||"").toLowerCase().includes(t)}))}},{key:"getByType",value:function(e){var t=e.toLowerCase();return i.filter((function(e){return(e.type||"").toLowerCase().includes(t)}))}},{key:"searchProduct",value:function(e){var t=e.toLowerCase();return i.filter((function(e){return(e.name||"").toLowerCase().includes(t)}))}},{key:"addProduct",value:function(e){i.push(e)}}],null&&r(e.prototype,null),t&&r(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const s=a;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(){l=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new I(r||[]);return o(a,"_invoke",{value:T(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var f="suspendedStart",m="suspendedYield",g="executing",v="completed",b={};function y(){}function w(){}function x(){}var k={};d(k,a,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(A([])));S&&S!==n&&r.call(S,a)&&(k=S);var L=x.prototype=y.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(o,i,a,s){var l=p(e[o],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==c(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function T(t,n,r){var o=f;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=j(s,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var l=p(t,n,r);if("normal"===l.type){if(o=r.done?v:m,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(c(t)+" is not iterable")}return w.prototype=x,o(L,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,d(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},E(P.prototype),d(P.prototype,s,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(h(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(L),d(L,u,"Generator"),d(L,a,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function u(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,s,"next",e)}function s(e){u(i,r,o,a,s,"throw",e)}a(void 0)}))}}var h="http://localhost:5000/api",p=function(){localStorage.removeItem("token"),localStorage.removeItem("user");var e=new CustomEvent("userLoggedOut");window.dispatchEvent(e),window.location.hash="#/login",alert("Sesi Anda telah berakhir. Silakan login kembali.")},f=function(){var e=d(l().mark((function e(t,n){var r,o,i,a,s,c,u,d=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:null,o="".concat(h).concat(t),i=localStorage.getItem("token"),a={method:n,headers:{"Content-Type":"application/json"}},i&&(a.headers.Authorization="Bearer ".concat(i)),r&&"GET"!==n&&(a.body=JSON.stringify(r)),e.prev=6,e.next=9,fetch(o,a);case 9:if((s=e.sent).ok){e.next=19;break}if(401!==s.status&&403!==s.status){e.next=14;break}throw p(),new Error("Authentication failed or expired.");case 14:return e.next=16,s.json();case 16:throw c=e.sent,console.error("HTTP error! Status: ".concat(s.status),c),new Error("HTTP error! Status: ".concat(s.status,": ").concat(c.message||"Unknown error"));case 19:return e.next=21,s.json();case 21:return u=e.sent,e.abrupt("return",u);case 25:throw e.prev=25,e.t0=e.catch(6),console.error("Error during API request:",e.t0),e.t0;case 29:case"end":return e.stop()}}),e,null,[[6,25]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(e){return f(e,"GET")},g=function(){var e=d(l().mark((function e(t,n,r){var o,i,a,s,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(h).concat(n),i=localStorage.getItem("token"),a={method:t,body:r,headers:{}},i&&(a.headers.Authorization="Bearer ".concat(i)),e.prev=4,e.next=7,fetch(o,a);case 7:if((s=e.sent).ok){e.next=17;break}if(401!==s.status&&403!==s.status){e.next=12;break}throw p(),new Error("Authentication failed or expired.");case 12:return e.next=14,s.json();case 14:throw c=e.sent,console.error("HTTP error! Status: ".concat(s.status),c),new Error("HTTP error! Status: ".concat(s.status,": ").concat(c.message||"Unknown error"));case 17:return e.next=19,s.json();case 19:return u=e.sent,e.abrupt("return",u);case 23:throw e.prev=23,e.t0=e.catch(4),console.error("Error during API request:",e.t0),e.t0;case 27:case"end":return e.stop()}}),e,null,[[4,23]])})));return function(t,n,r){return e.apply(this,arguments)}}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function w(e){var t="function"==typeof Map?new Map:void 0;return w=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(x())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&k(o,n.prototype),o}(e,arguments,_(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),k(n,e)},w(e)}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function S(e,t,n){return(t=L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}var E=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(e=function(e,t,n){return t=_(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,x()?Reflect.construct(t,n||[],_(e).constructor):t.apply(e,n))}(this,t),"toggleProfileDropdown",(function(t){t.stopPropagation();var n=e.querySelector("#profileDropdownMenu");n&&n.classList.toggle("hidden")})),S(e,"hideProfileDropdown",(function(t){var n=e.querySelector(".profile-area"),r=e.querySelector("#profileDropdownMenu");n&&r&&t.target&&!n.contains(t.target)&&!r.contains(t.target)&&r.classList.add("hidden")})),S(e,"handleLogout",(function(){p(),e.closeDrawer()})),S(e,"handleLoginStatusChange",(function(){console.log("Login/Logout status change detected."),e.updateNavbarBasedOnLoginStatus(),e.setupProfileDropdownToggle(),e.setupLogoutListener()})),S(e,"openDrawer",(function(){var t=e.querySelector("#mobile-drawer"),n=e.querySelector("#drawer-overlay");t&&n&&(n.classList.remove("hidden"),n.offsetHeight,t.classList.remove("-translate-x-full"),document.body.style.overflow="hidden",console.log("Drawer opened"))})),S(e,"closeDrawer",(function(){var t=e.querySelector("#mobile-drawer"),n=e.querySelector("#drawer-overlay");t&&n&&(t.classList.add("-translate-x-full"),setTimeout((function(){n.classList.add("hidden")}),300),document.body.style.overflow="",console.log("Drawer closed"))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e),n=t,(r=[{key:"_emptyContent",value:function(){this.innerHTML=""}},{key:"connectedCallback",value:function(){console.log("AppBar Component Connected"),this.render(),this._setupCategoryDropdownToggle(),this.setupProfileDropdownToggle(),this.setupLogoutListener(),this.setupMobileMenuToggle(),window.addEventListener("userLoggedIn",this.handleLoginStatusChange),window.addEventListener("userLoggedOut",this.handleLoginStatusChange),this.updateNavbarBasedOnLoginStatus(),this.addBodyPadding()}},{key:"disconnectedCallback",value:function(){console.log("AppBar Component Disconnected"),window.removeEventListener("userLoggedIn",this.handleLoginStatusChange),window.removeEventListener("userLoggedOut",this.handleLoginStatusChange);var e=this.querySelector(".profile-area");e&&e.removeEventListener("click",this.toggleProfileDropdown),document.removeEventListener("click",this.hideProfileDropdown);var t=this.querySelector("#profileDropdownMenu");t&&this.handleLogoutClickDelegate&&t.removeEventListener("click",this.handleLogoutClickDelegate);var n=this.querySelector("#mobile-menu-button");n&&this._mobileMenuButtonHandler&&(n.removeEventListener("click",this._mobileMenuButtonHandler),this._mobileMenuButtonHandler=null),this._drawerOverlayHandler&&(document.removeEventListener("click",this._drawerOverlayHandler),this._drawerOverlayHandler=null),this.removeBodyPadding()}},{key:"addBodyPadding",value:function(){document.body.style.paddingTop="80px"}},{key:"removeBodyPadding",value:function(){document.body.style.paddingTop=""}},{key:"render",value:function(){this._emptyContent(),void 0!==s&&s.getAll&&function(e){(function(e){if(Array.isArray(e))return b(e)})(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(s.getAll().map((function(e){return e.category})))),this.innerHTML='\n            \x3c!-- Fixed Header --\x3e\n            <div class="fixed top-0 left-0 right-0 bg-white shadow-sm z-50">\n                <div class="container mx-auto px-4 py-4 flex items-center justify-between">\n                    \n                    \x3c!-- Mobile Menu Button (Left) --\x3e\n                    <div class="flex items-center md:hidden">\n                        <button id="mobile-menu-button" type="button" class="text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-200 p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200">\n                            <span class="sr-only">Open main menu</span>\n                            \x3c!-- Hamburger icon --\x3e\n                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>\n                            </svg>\n                        </button>\n                    </div>\n\n                    \x3c!-- Logo (Center on mobile, Left on desktop) --\x3e\n                    <div class="flex items-center justify-center md:justify-start flex-1 md:flex-none">\n                        <div class="text-xl font-bold text-gray-800 flex items-center">\n                            <img src="./logo.png" class="mr-2 h-8 inline-block" alt="Pinjemin Logo">\n                            <span class="hidden sm:inline">Pinjemin</span>\n                        </div>\n                    </div>\n\n                    \x3c!-- Desktop Navigation (Hidden on mobile) --\x3e\n                    <nav class="hidden md:flex items-center space-x-8 flex-1 justify-center">\n                        <a href="/#/home" class="text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200">\n                            Home\n                        </a>\n                        <a href="/#/community" class="text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200">\n                            Komunitas\n                        </a>\n                        <a href="/#/my-rentals" class="text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 user-authenticated-nav-link hidden">\n                            Pinjaman Saya\n                        </a>\n                    </nav>\n\n                    \x3c!-- Right Section: Auth/Profile --\x3e\n                    <div class="flex items-center space-x-3">\n                        \x3c!-- Authentication Links (Show when NOT logged in) --\x3e\n                        <div class="auth-links flex items-center space-x-2">\n                            <a href="/#/login" class="text-sm font-medium text-gray-700 hover:text-blue-600 px-3 py-2 rounded-lg hover:bg-gray-50 transition-all duration-200">\n                                Sign In\n                            </a>\n                            <a href="/#/register" class="text-sm font-medium bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all duration-200">\n                                Register\n                            </a>\n                        </div>\n\n                        \x3c!-- User Info Area (Visible when logged in) --\x3e\n                        <div class="user-info-area relative hidden">\n                            <div class="profile-area flex items-center space-x-2 cursor-pointer text-gray-700 hover:text-gray-900 px-3 py-2 rounded-lg hover:bg-gray-50 transition-all duration-200">\n                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">\n                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-blue-600">\n                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 0 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />\n                                    </svg>\n                                </div>\n                                <span class="font-medium text-sm hidden sm:inline" id="navbar-user-name"></span>\n                                <svg class="w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>\n                                </svg>\n                            </div>\n                            \n                            \x3c!-- Profile Dropdown Menu --\x3e\n                            <div id="profileDropdownMenu" class="absolute right-0 top-full mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 hidden z-20">\n                                <div class="px-4 py-3 border-b border-gray-100">\n                                    <p class="text-sm font-medium text-gray-900" id="dropdown-user-name"></p>\n                                    <p class="text-xs text-gray-500">Selamat datang kembali!</p>\n                                </div>\n                                <a href="/#/profile" class="flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200">\n                                    <svg class="w-4 h-4 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>\n                                    </svg>\n                                    Profil Saya\n                                </a>\n                                <a href="/#/my-items" class="flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200">\n                                    <svg class="w-4 h-4 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>\n                                    </svg>\n                                    Item Saya\n                                </a>\n                                <a href="/#/my-transactions" class="flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200">\n                                    <svg class="w-4 h-4 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>\n                                    </svg>\n                                    Transaksi Pembelian\n                                </a>\n                                <a href="/#/my-sales" class="flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200">\n                                    <svg class="w-4 h-4 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 00-2-2z"></path>\n                                    </svg>\n                                    Penjualan Saya\n                                </a>\n                                <hr class="my-2">\n                                <button id="logout-button" class="flex items-center w-full px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors duration-200">\n                                    <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>\n                                    </svg>\n                                    Logout\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- Mobile Drawer Overlay --\x3e\n            <div id="drawer-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden md:hidden transition-opacity duration-300"></div>\n\n            \x3c!-- Mobile Drawer Menu --\x3e\n            <div id="mobile-drawer" class="fixed top-0 left-0 h-full w-80 bg-white shadow-xl z-50 transform -translate-x-full transition-transform duration-300 ease-in-out md:hidden">\n                \x3c!-- Drawer Header --\x3e\n                <div class="flex items-center justify-between p-4 border-b border-gray-200">\n                    <div class="flex items-center space-x-3">\n                        <img src="./logo.png" class="h-8" alt="Pinjemin Logo">\n                        <span class="text-lg font-bold text-gray-800">Pinjemin</span>\n                    </div>\n                    <button id="close-drawer-button" class="text-gray-400 hover:text-gray-600 focus:outline-none p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200">\n                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>\n                        </svg>\n                    </button>\n                </div>\n\n                \x3c!-- Drawer Content --\x3e\n                <div class="flex flex-col h-full overflow-y-auto">\n                    \x3c!-- User Info Section (When logged in) --\x3e\n                    <div class="drawer-user-info hidden border-b border-gray-200 p-4">\n                        <div class="flex items-center space-x-3">\n                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">\n                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-blue-600">\n                                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 0 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />\n                                </svg>\n                            </div>\n                            <div>\n                                <p class="font-medium text-gray-900" id="drawer-user-name"></p>\n                                <p class="text-sm text-gray-500">Selamat datang!</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Auth Links (When not logged in) --\x3e\n                    <div class="drawer-auth-links border-b border-gray-200 p-4">\n                        <div class="space-y-3">\n                            <a href="/#/login" class="flex items-center justify-center w-full py-3 text-blue-600 border border-blue-600 rounded-lg hover:bg-blue-50 transition-colors duration-200 font-medium">\n                                Sign In\n                            </a>\n                            <a href="/#/register" class="flex items-center justify-center w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium">\n                                Register\n                            </a>\n                        </div>\n                    </div>\n\n                    \x3c!-- Navigation Links --\x3e\n                    <nav class="flex-1 px-4 py-4">\n                        <ul class="space-y-2">\n                            <li>\n                                <a href="/#/home" class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200">\n                                    <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>\n                                    </svg>\n                                    Home\n                                </a>\n                            </li>\n                            <li>\n                                <a href="/#/community" class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200">\n                                    <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>\n                                    </svg>\n                                    Komunitas\n                                </a>\n                            </li>\n                            \n                            \x3c!-- Authenticated Links --\x3e\n                            <li class="drawer-authenticated-nav-link hidden">\n                                <a href="/#/my-rentals" class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200">\n                                    <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>\n                                    </svg>\n                                    Pinjaman Saya\n                                </a>\n                            </li>\n                            <li class="drawer-authenticated-nav-link hidden">\n                                <a href="/#/my-items" class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200">\n                                    <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>\n                                    </svg>\n                                    Item Saya\n                                </a>\n                            </li>\n                            <li class="drawer-authenticated-nav-link hidden">\n                                <a href="/#/my-transactions" class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200">\n                                    <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>\n                                    </svg>\n                                    Transaksi Pembelian\n                                </a>\n                            </li>\n                            <li class="drawer-authenticated-nav-link hidden">\n                                <a href="/#/my-sales" class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200">\n                                    <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 00-2-2z"></path>\n                                    </svg>\n                                    Penjualan Saya\n                                </a>\n                            </li>\n                        </ul>\n                    </nav>\n\n                    \x3c!-- Logout Button (When logged in) --\x3e\n                    <div class="drawer-logout-section hidden border-t border-gray-200 p-4">\n                        <button id="drawer-logout-button" class="flex items-center w-full px-4 py-3 text-red-600 rounded-lg hover:bg-red-50 transition-colors duration-200">\n                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>\n                            </svg>\n                            Logout\n                        </button>\n                    </div>\n                </div>\n            </div>\n        '}},{key:"setupProfileDropdownToggle",value:function(){var e=this.querySelector(".profile-area"),t=this.querySelector("#profileDropdownMenu");e&&t&&(e.addEventListener("click",this.toggleProfileDropdown),document.addEventListener("click",this.hideProfileDropdown))}},{key:"setupLogoutListener",value:function(){var e=this,t=this.querySelector("#profileDropdownMenu");t&&(this.handleLogoutClickDelegate&&t.removeEventListener("click",this.handleLogoutClickDelegate),this.handleLogoutClickDelegate=function(t){t.target&&"logout-button"===t.target.id&&(t.preventDefault(),e.handleLogout())},t.addEventListener("click",this.handleLogoutClickDelegate));var n=this.querySelector("#drawer-logout-button");n&&n.addEventListener("click",this.handleLogout)}},{key:"updateNavbarBasedOnLoginStatus",value:function(){var e=localStorage.getItem("user"),t=localStorage.getItem("token"),n=this.querySelector(".auth-links"),r=this.querySelector(".user-info-area"),o=this.querySelector("#navbar-user-name"),i=this.querySelector("#dropdown-user-name"),a=this.querySelectorAll(".user-authenticated-nav-link"),s=this.querySelector(".drawer-auth-links"),c=this.querySelector(".drawer-user-info"),l=this.querySelector("#drawer-user-name"),u=this.querySelectorAll(".drawer-authenticated-nav-link"),d=this.querySelector(".drawer-logout-section");if(e&&t){var h=JSON.parse(e);n&&n.classList.add("hidden"),r&&(r.classList.remove("hidden"),o&&(o.textContent=h.name),i&&(i.textContent=h.name)),a.forEach((function(e){e.classList.remove("hidden")})),s&&s.classList.add("hidden"),c&&(c.classList.remove("hidden"),l&&(l.textContent=h.name)),u.forEach((function(e){e.classList.remove("hidden")})),d&&d.classList.remove("hidden")}else{if(n&&n.classList.remove("hidden"),r){r.classList.add("hidden");var p=r.querySelector("#profileDropdownMenu");p&&p.classList.add("hidden")}o&&(o.textContent=""),i&&(i.textContent=""),a.forEach((function(e){e.classList.add("hidden")})),s&&s.classList.remove("hidden"),c&&c.classList.add("hidden"),l&&(l.textContent=""),u.forEach((function(e){e.classList.add("hidden")})),d&&d.classList.add("hidden")}}},{key:"setupMobileMenuToggle",value:function(){var e=this;console.log("Setting up mobile drawer toggle...");var t=this.querySelector("#mobile-menu-button"),n=this.querySelector("#mobile-drawer"),r=this.querySelector("#drawer-overlay"),o=this.querySelector("#close-drawer-button");t&&n&&r?(console.log("Mobile drawer elements found. Setting up listeners."),this._mobileMenuButtonHandler=function(t){console.log("Mobile menu button clicked."),e.openDrawer()},t.addEventListener("click",this._mobileMenuButtonHandler),o&&o.addEventListener("click",(function(){e.closeDrawer()})),this._drawerOverlayHandler=function(t){t.target===r&&e.closeDrawer()},r.addEventListener("click",this._drawerOverlayHandler),n.querySelectorAll("a").forEach((function(t){t.addEventListener("click",(function(){console.log("Drawer link clicked, closing drawer."),e.closeDrawer()}))})),document.addEventListener("keydown",(function(t){"Escape"!==t.key||n.classList.contains("-translate-x-full")||e.closeDrawer()}))):console.error("Mobile drawer elements not found:",{mobileMenuButton:t,mobileDrawer:n,drawerOverlay:r})}},{key:"_setupCategoryDropdownToggle",value:function(){var e=this.querySelector("#categoryDropdownButton"),t=this.querySelector("#categoryDropdownMenu");e&&t&&(e.addEventListener("click",(function(e){e.stopPropagation(),t.classList.toggle("hidden")})),document.addEventListener("click",(function(n){!n.target||e.contains(n.target)||t.contains(n.target)||t.classList.contains("hidden")||t.classList.add("hidden")})),window.addEventListener("scroll",(function(){t&&!t.classList.contains("hidden")&&t.classList.add("hidden")})))}}])&&y(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(w(HTMLElement));function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function T(){T=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new I(r||[]);return o(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(A([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=y.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==P(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,n,r){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=j(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(P(t)+" is not iterable")}return b.prototype=y,o(_,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:b,configurable:!0}),b.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new L(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function j(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}customElements.define("app-bar",E);var O=function(){var e,t=(e=T().mark((function e(t,n){var r,o,i,a,s,c,l,u,d,h=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]?h[2]:null,o="".concat("http://localhost:5001/api").concat(t),i=localStorage.getItem("token"),a={method:n,headers:{"Content-Type":"application/json"}},i&&(a.headers.Authorization="Bearer ".concat(i)),r&&"GET"!==n&&(a.body=JSON.stringify(r)),e.prev=6,e.next=9,fetch(o,a);case 9:if((s=e.sent).ok){e.next=20;break}return e.next=13,s.json().catch((function(){return null}));case 13:throw c=e.sent,console.error("ML API HTTP error! Status: ".concat(s.status),c),l=c&&c.message?c.message:"Unknown ML API error",(u=new Error("ML API Error: HTTP status ".concat(s.status,": ").concat(l))).status=s.status,u.body=c,u;case 20:return e.next=22,s.json();case 22:return d=e.sent,e.abrupt("return",d);case 26:throw e.prev=26,e.t0=e.catch(6),console.error("Error during ML API request:",e.t0),e.t0;case 30:case"end":return e.stop()}}),e,null,[[6,26]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){j(i,r,o,a,s,"next",e)}function s(e){j(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),C=function(e,t){return O("/recommend/search","POST",{keyword:e,top_n:t})};function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function A(){A=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new O(r||[]);return o(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(C([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=y.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==I(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,n,r){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(I(t)+" is not iterable")}return b.prototype=y,o(_,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:b,configurable:!0}),b.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new L(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return(t=H(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){M(i,r,o,a,s,"next",e)}function s(e){M(i,r,o,a,s,"throw",e)}a(void 0)}))}}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function H(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}function F(e){var t="function"==typeof Map?new Map:void 0;return F=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(U())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&$(o,n.prototype),o}(e,arguments,G(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),$(n,e)},F(e)}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}var z=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t,n){return t=G(t),function(e,t){if(t&&("object"==I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,U()?Reflect.construct(t,n||[],G(e).constructor):t.apply(e,n))}(this,t)).items=[],e.isLoading=!0,e.error=null,e.searchRecommendations=[],e.isLoadingSearchRecommendations=!1,e.searchRecommendationsError=null,e.currentSearchKeyword="",e.pagination={total:0,page:1,limit:20,totalPages:1},e.fetchItems=e.fetchItems.bind(e),e.handleSearchEvent=e.handleSearchEvent.bind(e),e.fetchSearchRecommendations=e.fetchSearchRecommendations.bind(e),e.handlePaginationClick=e.handlePaginationClick.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(t,e),n=t,r=[{key:"connectedCallback",value:function(){this.render(),this.fetchItems(),document.addEventListener("search",this.handleSearchEvent),console.log("AllProduct component: Added search event listener on document.")}},{key:"disconnectedCallback",value:function(){document.removeEventListener("search",this.handleSearchEvent),console.log("AllProduct component: Removed search event listener from document.")}},{key:"handleSearchEvent",value:function(e){console.log("AllProduct component: Received search event.",e.detail.params);var t=e.detail.params.search||"";this.currentSearchKeyword=t,this.pagination.page=1,this.fetchItems({search:t,page:1}),t?this.fetchSearchRecommendations(t):(this.searchRecommendations=[],this.isLoadingSearchRecommendations=!1,this.searchRecommendationsError=null,this.render())}},{key:"handlePaginationClick",value:function(e){var t=e.target.closest("[data-page]");if(t){var n=Number.parseInt(t.dataset.page);if(n&&n!==this.pagination.page&&n>=1&&n<=this.pagination.totalPages){this.pagination.page=n;var r=this.currentSearchKeyword?{search:this.currentSearchKeyword,page:n}:{page:n};this.fetchItems(r)}}}},{key:"fetchItems",value:(i=q(A().mark((function e(){var t,n,r,o,i,a=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},this.isLoading=!0,this.error=null,this.items=[],this.render(),e.prev=5,n=B({limit:this.pagination.limit,page:t.page||this.pagination.page},t),r=Object.keys(n).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(n[e]))})).join("&"),o="/items?".concat(r),console.log("Fetching items from URL:",o),e.next=12,m(o);case 12:i=e.sent,console.log("Fetched items:",i),"success"===i.status?(this.items=Array.isArray(i.data)?i.data:[],i.pagination&&(this.pagination={total:i.pagination.total||0,page:i.pagination.page||1,limit:i.pagination.limit||20,totalPages:i.pagination.totalPages||1}),this.isLoading=!1,this.error=null):(console.error("Failed to fetch items (API error):",i.message||"Unknown error",i),this.items=[],this.error=i.message||"Gagal memuat item.",this.isLoading=!1),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(5),console.error("Error fetching items:",e.t0),this.items=[],this.error=e.t0.message||"Terjadi kesalahan saat memuat item.",this.isLoading=!1;case 23:return e.prev=23,this.render(),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[5,17,23,26]])}))),function(){return i.apply(this,arguments)})},{key:"fetchSearchRecommendations",value:(o=q(A().mark((function e(t){var n,r,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&""!==t.trim()){e.next=6;break}return this.searchRecommendations=[],this.isLoadingSearchRecommendations=!1,this.searchRecommendationsError=null,this.render(),e.abrupt("return");case 6:return this.isLoadingSearchRecommendations=!0,this.searchRecommendationsError=null,this.render(),e.prev=10,console.log('Fetching initial Search Based recommendations for keyword: "'.concat(t,'" from ML API.')),e.next=14,C(t,5);case 14:if(n=e.sent,console.log("Fetched initial Search Based recommendations from ML API:",n),!(n&&Array.isArray(n.recommendations)&&n.recommendations.length>0)){e.next=27;break}return console.log("Fetching full details for ".concat(n.recommendations.length," recommended items from main API.")),r=n.recommendations.map(function(){var e=q(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("/items/".concat(t.product_id));case 3:if("success"!==(n=e.sent).status||!n.data){e.next=8;break}return e.abrupt("return",B(B({},t),n.data));case 8:return console.warn("Failed to fetch details for recommended item ID ".concat(t.product_id,":"),n.message||"Unknown error"),e.abrupt("return",null);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.error("Error fetching details for recommended item ID ".concat(t.product_id,":"),e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()),e.next=21,Promise.all(r);case 21:o=e.sent,this.searchRecommendations=o.filter((function(e){return null!==e})),this.isLoadingSearchRecommendations=!1,n.recommendations.length>0&&0===this.searchRecommendations.length?this.searchRecommendationsError="Gagal memuat detail untuk saran pencarian.":this.searchRecommendationsError=null,e.next=31;break;case 27:this.searchRecommendations=[],this.isLoadingSearchRecommendations=!1,this.searchRecommendationsError=n.message||"Tidak ada saran pencarian yang ditemukan dari ML API.",console.warn("ML API returned no search recommendations or invalid data:",n);case 31:e.next=39;break;case 33:e.prev=33,e.t0=e.catch(10),console.error("Error during ML API fetch or subsequent detail fetch for search recommendations:",e.t0),this.searchRecommendations=[],this.isLoadingSearchRecommendations=!1,this.searchRecommendationsError=e.t0.message||"Terjadi kesalahan saat memuat saran pencarian.";case 39:return e.prev=39,this.render(),e.finish(39);case 42:case"end":return e.stop()}}),e,this,[[10,33,39,42]])}))),function(e){return o.apply(this,arguments)})},{key:"getStatusInfo",value:function(e){var t=e.status||"available";switch(t){case"available":return{display:"Available",class:"bg-green-100 text-green-800",showAvailabilityBadges:!0};case"pending":return{display:"Pending",class:"bg-yellow-100 text-yellow-800",showAvailabilityBadges:!1};case"rented":return{display:"Rented",class:"bg-blue-100 text-blue-800",showAvailabilityBadges:!1};case"sold":return{display:"Sold",class:"bg-red-100 text-red-800",showAvailabilityBadges:!1};default:return{display:t,class:"bg-gray-100 text-gray-800",showAvailabilityBadges:!0}}}},{key:"renderPagination",value:function(){if(this.pagination.totalPages<=1)return"";var e=this.pagination.page,t=this.pagination.totalPages,n=(e-1)*this.pagination.limit+1,r=Math.min(e*this.pagination.limit,this.pagination.total),o=Math.max(1,e-2),i=Math.min(t,e+2);e<=3&&(i=Math.min(5,t)),e>=t-2&&(o=Math.max(1,t-4));for(var a=[],s=o;s<=i;s++)a.push(s);return'\n      <div class="flex flex-col sm:flex-row items-center justify-between gap-4 mt-8 px-4">\n        \x3c!-- Results info --\x3e\n        <div class="text-sm text-gray-700 font-opensan">\n          Menampilkan <span class="font-medium">'.concat(n,'</span> sampai <span class="font-medium">').concat(r,'</span> dari <span class="font-medium">').concat(this.pagination.total,'</span> hasil\n        </div>\n        \n        \x3c!-- Pagination controls --\x3e\n        <div class="flex items-center gap-2">\n          \x3c!-- Previous button --\x3e\n          <button \n            data-page="').concat(e-1,'" \n            class="pagination-btn ').concat(1===e?"pagination-btn-disabled":"pagination-btn-enabled",'"\n            ').concat(1===e?"disabled":"",'\n          >\n            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>\n            </svg>\n            <span class="hidden sm:inline">Previous</span>\n          </button>\n\n          \x3c!-- Page numbers --\x3e\n          <div class="flex items-center gap-1">\n            ').concat(o>1?'\n              <button data-page="1" class="pagination-number">1</button>\n              '.concat(o>2?'<span class="px-2 text-gray-500">...</span>':"","\n            "):"","\n            \n            ").concat(a.map((function(t){return'\n              <button \n                data-page="'.concat(t,'" \n                class="pagination-number ').concat(t===e?"pagination-number-active":"",'"\n              >\n                ').concat(t,"\n              </button>\n            ")})).join(""),"\n            \n            ").concat(i<t?"\n              ".concat(i<t-1?'<span class="px-2 text-gray-500">...</span>':"",'\n              <button data-page="').concat(t,'" class="pagination-number">').concat(t,"</button>\n            "):"",'\n          </div>\n\n          \x3c!-- Next button --\x3e\n          <button \n            data-page="').concat(e+1,'" \n            class="pagination-btn ').concat(e===t?"pagination-btn-disabled":"pagination-btn-enabled",'"\n            ').concat(e===t?"disabled":"",'\n          >\n            <span class="hidden sm:inline">Next</span>\n            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>\n            </svg>\n          </button>\n        </div>\n      </div>\n    ')}},{key:"render",value:function(){var e=this;this.innerHTML='\n        <style>\n            /* Custom scrollbar styles */\n            .custom-scrollbar::-webkit-scrollbar {\n                height: 8px;\n            }\n            \n            .custom-scrollbar::-webkit-scrollbar-track {\n                background: rgba(255, 255, 255, 0.1);\n                border-radius: 4px;\n            }\n            \n            .custom-scrollbar::-webkit-scrollbar-thumb {\n                background: linear-gradient(90deg, #3b82f6, #10b981);\n                border-radius: 4px;\n                transition: all 0.3s ease;\n            }\n            \n            .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n                background: linear-gradient(90deg, #2563eb, #059669);\n            }\n\n            /* Pagination styles */\n            .pagination-btn {\n                display: flex;\n                align-items: center;\n                gap: 0.5rem;\n                padding: 0.5rem 0.75rem;\n                border-radius: 0.5rem;\n                font-size: 0.875rem;\n                font-weight: 500;\n                transition: all 0.2s;\n            }\n\n            .pagination-btn-enabled {\n                background-color: white;\n                border: 1px solid #d1d5db;\n                color: #374151;\n            }\n\n            .pagination-btn-enabled:hover {\n                background-color: #f9fafb;\n                border-color: #9ca3af;\n            }\n\n            .pagination-btn-disabled {\n                background-color: #f9fafb;\n                border: 1px solid #e5e7eb;\n                color: #9ca3af;\n                cursor: not-allowed;\n            }\n\n            .pagination-number {\n                min-width: 2.5rem;\n                height: 2.5rem;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border-radius: 0.5rem;\n                font-size: 0.875rem;\n                font-weight: 500;\n                transition: all 0.2s;\n                background-color: white;\n                border: 1px solid #d1d5db;\n                color: #374151;\n            }\n\n            .pagination-number:hover {\n                background-color: #f3f4f6;\n                border-color: #9ca3af;\n            }\n\n            .pagination-number-active {\n                background-color: #3b82f6;\n                border-color: #3b82f6;\n                color: white;\n            }\n\n            .pagination-number-active:hover {\n                background-color: #2563eb;\n                border-color: #2563eb;\n            }\n\n            /* Recommendation card styles */\n            .recommendation-card {\n                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n                background: #ffffff;\n                border: 2px solid #e5e7eb;\n                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n            }\n\n            .recommendation-card:hover {\n                transform: translateY(-6px);\n                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\n                border-color: #3b82f6;\n            }\n\n            .recommendation-img {\n                transition: all 0.3s ease;\n            }\n\n            .recommendation-card:hover .recommendation-img {\n                transform: scale(1.05);\n            }\n\n            /* Main product card styles */\n            .product-card {\n                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n                border: 2px solid #e5e7eb;\n                background: #ffffff;\n                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n            }\n\n            .product-card:hover {\n                transform: translateY(-12px);\n                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);\n                border-color: #3b82f6;\n            }\n\n            .product-image-container {\n                position: relative;\n                overflow: hidden;\n                background: linear-gradient(135deg, #f8fafc, #f1f5f9);\n            }\n\n            .product-card img {\n                transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n            }\n\n            .product-card:hover img {\n                transform: scale(1.08);\n            }\n\n            .product-name {\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                min-height: 3em;\n                transition: color 0.3s ease;\n            }\n\n            .product-card:hover .product-name {\n                color: #3b82f6;\n            }\n\n            .price-tag {\n                transition: all 0.3s ease;\n                font-weight: 600;\n                background: linear-gradient(135deg, #374151, #1f2937);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n                background-clip: text;\n            }\n\n            .product-card:hover .price-tag {\n                background: linear-gradient(135deg, #3b82f6, #10b981);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;\n                background-clip: text;\n                transform: scale(1.05);\n            }\n\n            .status-badge {\n                transition: all 0.3s ease;\n                backdrop-filter: blur(10px);\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n            }\n\n            .status-badge.rent {\n                background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n            }\n\n            .status-badge.sell {\n                background: linear-gradient(135deg, #10b981, #047857);\n            }\n\n            .product-card:hover .status-badge {\n                transform: scale(1.1);\n                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);\n            }\n\n            /* Loading shimmer effect */\n            .shimmer {\n                background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n                background-size: 200% 100%;\n                animation: shimmer 2s infinite;\n            }\n\n            @keyframes shimmer {\n                0% { background-position: -200% 0; }\n                100% { background-position: 200% 0; }\n            }\n\n            /* Pulse animation for loading states */\n            .pulse-loading {\n                animation: pulse 1.5s ease-in-out infinite;\n            }\n\n            @keyframes pulse {\n                0%, 100% { opacity: 1; }\n                50% { opacity: 0.7; }\n            }\n        </style>\n        \n        <div class="bg-white rounded-lg">\n            <div class="py-6">\n                <search-bar></search-bar>\n            </div>\n            '.concat(this.renderSearchRecommendationsSection(),'\n            <div class="mx-auto max-w-2xl px-4 py-4 sm:px-6 sm:py-8 lg:max-w-7xl lg:px-8">\n                <h2 class="sr-only">Products</h2>\n                ').concat(this.renderContent(),"\n                ").concat(this.renderPagination(),"\n            </div>\n        </div>\n        "),setTimeout((function(){var t,n,r=e.querySelector(".recommendations-wrapper");null===(t=e.querySelector(".scroll-left"))||void 0===t||t.addEventListener("click",(function(){r.scrollBy({left:-300,behavior:"smooth"})})),null===(n=e.querySelector(".scroll-right"))||void 0===n||n.addEventListener("click",(function(){r.scrollBy({left:300,behavior:"smooth"})}))}),0);var t=this.querySelector(".flex.items-center.gap-2");t&&t.addEventListener("click",this.handlePaginationClick)}},{key:"renderSearchRecommendationsSection",value:function(){var e=this;if(!this.currentSearchKeyword||""===this.currentSearchKeyword.trim())return"";if(this.isLoadingSearchRecommendations)return'\n                 <div class="mx-auto max-w-2xl px-4 py-4 sm:px-6 sm:py-8 lg:max-w-7xl lg:px-8 bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl shadow-lg mb-8 text-white font-opensan border border-gray-700">\n                     <h3 class="text-lg font-montserrat font-semibold mb-4 text-white flex items-center">\n                        <svg class="w-5 h-5 mr-2 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>\n                        </svg>\n                        Saran Terkait "'.concat(this.currentSearchKeyword,'"\n                     </h3>\n                     <p class="text-gray-300 pulse-loading">Memuat saran...</p>\n                 </div>\n            ');if(this.searchRecommendationsError)return'\n                  <div class="mx-auto max-w-2xl px-4 py-4 sm:px-6 sm:py-8 lg:max-w-7xl lg:px-8 bg-gradient-to-r from-red-800 to-red-900 rounded-xl shadow-lg mb-8 text-white font-opensan border border-red-600">\n                     <h3 class="text-lg font-montserrat font-semibold mb-4 text-white flex items-center">\n                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>\n                        </svg>\n                        Saran Terkait "'.concat(this.currentSearchKeyword,'"\n                     </h3>\n                      <p>Error memuat saran: ').concat(this.searchRecommendationsError,"</p>\n                  </div>\n             ");if(!this.searchRecommendations||0===this.searchRecommendations.length)return'\n                <div class="mx-auto max-w-2xl px-4 py-4 sm:px-6 sm:py-8 lg:max-w-7xl lg:px-8 bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl shadow-lg mb-8 text-white font-opensan border border-gray-700">\n                    <h3 class="text-lg font-montserrat font-semibold mb-4 text-white flex items-center">\n                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>\n                        </svg>\n                        Saran Terkait "'.concat(this.currentSearchKeyword,'"\n                    </h3>\n                    <p class="text-gray-300">Tidak ada saran yang ditemukan.</p>\n                </div>\n            ');var t=function(e){if(null==e)return"-";var t="string"==typeof e?Number.parseFloat(e):e;return isNaN(t)?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)},n=this.searchRecommendations.map((function(n){var r=e.getStatusInfo(n);return'\n                <div class="recommendation-card bg-white rounded-xl shadow-lg p-4 flex-shrink-0 w-64 relative overflow-hidden border-2 border-gray-200">\n                     <a href="/#/items/'.concat(n.id||n.product_id,'" class="block">\n                         <div class="relative mb-3">\n                             ').concat(n.thumbnail?'<img src="'.concat("http://localhost:5000").concat(n.thumbnail,'" alt="').concat(n.name||"Product image",'" class="recommendation-img w-full h-32 object-cover rounded-lg">'):'<div class="w-full h-32 bg-gradient-to-br from-gray-200 to-gray-300 rounded-lg flex items-center justify-center text-sm text-gray-500 font-medium">No Image</div>','\n                             <div class="absolute top-2 left-2">\n                                <span class="px-2 py-1 rounded-md text-xs font-medium ').concat(r.class,'">').concat(r.display,"</span>\n                             </div>\n                             ").concat(r.showAvailabilityBadges?'\n                             <div class="absolute top-2 right-2 flex flex-col space-y-1">\n                                '.concat(n.is_available_for_rent?'<span class="status-badge rent text-white text-xs px-2 py-1 rounded-md font-medium shadow-md">Sewa</span>':"","\n                                ").concat(n.is_available_for_sell?'<span class="status-badge sell text-white text-xs px-2 py-1 rounded-md font-medium shadow-md">Jual</span>':"","\n                             </div>\n                             "):"",'\n                         </div>\n                         <div class="space-y-2">\n                            <h5 class="text-sm font-montserrat font-bold text-gray-900 leading-tight line-clamp-2 mb-2">').concat(n.name||n.product_name||"Unnamed Product","</h5>\n                            ").concat(r.showAvailabilityBadges?'\n                            <div class="space-y-1">\n                                '.concat(n.is_available_for_sell?'<p class="text-sm font-opensan font-semibold text-gray-800">Jual: '.concat(t(n.price_sell),"</p>"):"","\n                                ").concat(n.is_available_for_rent?'<p class="text-sm font-opensan font-semibold text-gray-800">Sewa: '.concat(t(n.price_rent)).concat(n.price_rent>0?" /hari":"","</p>"):"","\n                            </div>\n                            "):"","\n                         </div>\n                     </a>\n                 </div>\n             ")})).join("");return'\n      <div class="mx-auto max-w-2xl px-4 py-4 sm:px-6 sm:py-8 lg:max-w-7xl lg:px-8 bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl shadow-lg mb-8 font-opensan border border-gray-700">\n        <h3 class="text-lg font-montserrat font-semibold mb-4 text-white flex items-center">\n          <i class="fa-solid fa-wand-magic-sparkles mr-2"></i>\n          Saran Terkait "'.concat(this.currentSearchKeyword,'"\n        </h3>\n        <div class="relative">\n          \x3c!-- Tombol kiri --\x3e\n          <button class="scroll-left absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-gray-700 hover:bg-gray-600 text-white p-2 rounded-full shadow">\n            <i class="fa-solid fa-angle-left"></i>\n          </button>\n    \n          \x3c!-- Daftar saran --\x3e\n          <div class="flex overflow-x-auto space-x-6 pb-4 custom-scrollbar recommendations-wrapper">\n            ').concat(n,'\n          </div>\n    \n          \x3c!-- Tombol kanan --\x3e\n          <button class="scroll-right absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-gray-700 hover:bg-gray-600 text-white p-2 rounded-full shadow">\n            <i class="fa-solid fa-angle-right"></i>\n          </button>\n        </div>\n      </div>\n    ')}},{key:"renderContent",value:function(){return this.isLoading?'\n                <div class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-6">\n                    '.concat(Array(8).fill(0).map((function(){return'\n                        <div class="w-full bg-white rounded-xl shadow-lg border-2 border-gray-200 overflow-hidden">\n                            <div class="shimmer h-64 w-full"></div>\n                            <div class="p-5">\n                                <div class="shimmer h-6 w-3/4 mb-2 rounded"></div>\n                                <div class="shimmer h-4 w-1/2 rounded"></div>\n                            </div>\n                        </div>\n                    '})).join(""),"\n                </div>\n            "):this.error?'\n                <div class="text-center py-12">\n                    <div class="bg-red-50 border border-red-200 rounded-xl p-6 max-w-md mx-auto">\n                        <svg class="w-12 h-12 text-red-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>\n                        </svg>\n                        <p class="text-red-600 font-semibold">Error: '.concat(this.error,"</p>\n                    </div>\n                </div>\n            "):this.items&&0!==this.items.length?'\n            <div class="grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8">\n                '.concat(this.generateItemList(this.items),"\n            </div>\n        "):'\n                <div class="text-center py-16">\n                    <div class="bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-8 max-w-md mx-auto">\n                        <svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m8-8v2m0 6v2"></path>\n                        </svg>\n                        <p class="text-gray-600 font-medium text-lg">No items found matching your criteria.</p>\n                        <p class="text-gray-500 mt-2">Try adjusting your search terms or browse all products.</p>\n                    </div>\n                </div>\n            '}},{key:"generateItemList",value:function(e){var t=this,n=function(e){if(null==e)return"-";var t="string"==typeof e?Number.parseFloat(e):e;return isNaN(t)?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)};return e.map((function(e){var r=t.getStatusInfo(e);return'\n            <div class="w-full product-card rounded-xl overflow-hidden relative group">\n                <a href="/#/items/'.concat(e.id,'">\n                    <div class="product-image-container">\n                        <img class="p-4 rounded-t-xl object-cover aspect-square w-full" src="').concat(e.thumbnail?"http://localhost:5000"+e.thumbnail:"https://via.placeholder.com/400x300?text=No+Image",'" alt="').concat(e.name||"Item image",'" />\n                    </div>\n                </a>\n                <div class="px-6 pb-6">\n                    <a href="/#/items/').concat(e.id,'">\n                        <h5 class="text-xl font-montserrat font-bold tracking-tight text-gray-900 dark:text-white product-name mb-3">').concat(e.name||"Unnamed Item",'</h5>\n                    </a>\n                    <div class="absolute top-3 left-3 z-10 flex flex-col space-y-2">\n                        <span class="px-2 py-1 rounded-full text-xs font-medium ').concat(r.class,'">').concat(r.display,"</span>\n                        ").concat(r.showAvailabilityBadges?'\n                        <div class="flex space-x-1">\n                            '.concat(e.is_available_for_rent?'<span class="status-badge rent text-white text-xs px-3 py-1.5 rounded-full font-medium shadow-lg">Sewa</span>':"","\n                            ").concat(e.is_available_for_sell?'<span class="status-badge sell text-white text-xs px-3 py-1.5 rounded-full font-medium shadow-lg">Jual</span>':"","\n                        </div>\n                        "):"","\n                    </div>\n                    ").concat(r.showAvailabilityBadges?'\n                    <div class="mt-3 space-y-2">\n                        '.concat(e.is_available_for_sell?'<p class="price-tag text-lg font-opensan font-bold text-gray-900 dark:text-white flex items-center"><span class="text-green-600 mr-1">💰</span> Jual: '.concat(n(e.price_sell),"</p>"):"","\n                        ").concat(e.is_available_for_rent?'<p class="price-tag text-lg font-opensan font-bold text-gray-900 dark:text-white flex items-center"><span class="text-blue-600 mr-1">🏠</span> Sewa: '.concat(n(e.price_rent)).concat(e.price_rent>0?" /hari":"","</p>"):"","\n                    </div>\n                    "):"","\n                </div>\n            </div>\n        ")})).join("")}}],r&&N(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i}(F(HTMLElement));function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function Y(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}customElements.define("all-product",z);const W=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"emptyElement",value:function(e){e.innerHTML=""}},{key:"showElement",value:function(e){e.style.display="block",e.hidden=!1}},{key:"hideElement",value:function(e){e.style.display="none",e.hidden=!0}},{key:"isValidInteger",value:function(e){return Number.isNaN(e)||Number.isFinite(e)}},{key:"isAuthenticated",value:function(){return null!=localStorage.getItem("token")}},{key:"redirectToLogin",value:function(){window.location.hash="#/login"}},{key:"getUserInfo",value:function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null}}],null&&K(e.prototype,null),t&&K(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(){Q=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new O(r||[]);return o(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(C([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=y.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==J(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,n,r){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(J(t)+" is not iterable")}return b.prototype=y,o(_,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:b,configurable:!0}),b.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new L(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function ee(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function te(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ee(i,r,o,a,s,"next",e)}function s(e){ee(i,r,o,a,s,"throw",e)}a(void 0)}))}}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ce(r.key),r)}}function re(e){var t="function"==typeof Map?new Map:void 0;return re=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(oe())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&ie(o,n.prototype),o}(e,arguments,ae(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ie(n,e)},re(e)}function oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oe=function(){return!!e})()}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}function se(e,t,n){return(t=ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e){var t=function(e){if("object"!=J(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==J(t)?t:t+""}var le=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),se(e=function(e,t,n){return t=ae(t),function(e,t){if(t&&("object"==J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,oe()?Reflect.construct(t,n||[],ae(e).constructor):t.apply(e,n))}(this,t),"formatRupiah",(function(e){if(null==e)return"-";var t="string"==typeof e?Number.parseFloat(e):e;return isNaN(t)?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)})),e._itemId=null,e._item=null,e._reviews=[],e.isLoading=!0,e.error=null,e._isCurrentUserReviewed=!1,e._shouldShowReviewForm=window.location.hash.endsWith("#review"),e._editingReviewId=null,e._showRentForm=!1,e._userReviewId=null,e.userBasedRecommendations=[],e.isLoadingUserBasedRecommendations=!1,e.userBasedRecommendationsError=null,e.itemBasedRecommendations=[],e.isLoadingItemBasedRecommendations=!1,e.itemBasedRecommendationsError=null,e._currentPhotoIndex=0,e._userRecScrollPosition=0,e._itemRecScrollPosition=0,e.handleReviewSubmit=e.handleReviewSubmit.bind(e),e.handleBuy=e.handleBuy.bind(e),e.handleRent=e.handleRent.bind(e),e._handleHashChange=e.handleHashChange.bind(e),e.handleRentFormSubmit=e.handleRentFormSubmit.bind(e),e.cancelRentForm=e.cancelRentForm.bind(e),e.fetchUserBasedRecommendations=e.fetchUserBasedRecommendations.bind(e),e.fetchItemBasedRecommendationsForCurrentItem=e.fetchItemBasedRecommendationsForCurrentItem.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(t,e),n=t,r=[{key:"itemId",set:function(e){this._itemId!==e&&(this._itemId=e,this._shouldShowReviewForm=window.location.hash.endsWith("#review"),this._editingReviewId=null,this._showRentForm=!1,this._currentPhotoIndex=0,this._userRecScrollPosition=0,this._itemRecScrollPosition=0,this.renderContent(),this._itemId?this.fetchItemAndReviews(this._itemId):(this.error="ID Item tidak valid.",this.isLoading=!1,this.renderContent()))}},{key:"connectedCallback",value:(g=te(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._shouldShowReviewForm=window.location.hash.endsWith("#review"),this._editingReviewId=null,this._itemId&&(this.renderContent(),this.fetchItemAndReviews(this._itemId)),window.addEventListener("hashchange",this._handleHashChange);case 4:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"disconnectedCallback",value:function(){this.removeEventListeners(),window.removeEventListener("hashchange",this._handleHashChange),this._editingReviewId=null}},{key:"attributeChangedCallback",value:function(e,t,n){if("item-id"===e){var r=n&&"string"==typeof n&&"undefined"!==n?n:null;this.itemId=r}}},{key:"handleHashChange",value:function(){var e=this._shouldShowReviewForm;this._shouldShowReviewForm=window.location.hash.endsWith("#review"),e===this._shouldShowReviewForm||this.isLoading||this.error||!this._item||this.renderContent()}},{key:"getStatusInfo",value:function(e){var t=e.status||"available";switch(t){case"available":return{display:"Available",class:"status-available",canTransact:!0};case"pending":return{display:"Pending",class:"status-pending",canTransact:!1};case"rented":return{display:"Rented",class:"status-rented",canTransact:!1};case"sold":return{display:"Sold",class:"status-sold",canTransact:!1};default:return{display:t,class:"status-default",canTransact:!1}}}},{key:"fetchItemAndReviews",value:(p=te(Q().mark((function e(t){var n,r,o,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return this.error="ID Item tidak valid.",this.isLoading=!1,this.renderContent(),e.abrupt("return");case 5:return this.isLoading=!0,this.error=null,this._item=null,this._reviews=[],this._isCurrentUserReviewed=!1,this._editingReviewId=null,this._showRentForm=!1,this._userReviewId=null,this._currentPhotoIndex=0,this._userRecScrollPosition=0,this._itemRecScrollPosition=0,this.itemBasedRecommendations=[],this.isLoadingItemBasedRecommendations=!1,this.itemBasedRecommendationsError=null,this.renderContent(),e.prev=20,e.next=23,m("/items/".concat(t));case 23:if("success"!==(n=e.sent).status||!n.data){e.next=33;break}return this._item=n.data,this.fetchItemBasedRecommendationsForCurrentItem(this._item.id),e.next=29,m("/reviews/item/".concat(t));case 29:"success"===(r=e.sent).status&&r.data?(this._reviews=Array.isArray(r.data)?r.data:[],(o=W.getUserInfo())&&(i=this._reviews.find((function(e){return e.user_id===o.id})))?(this._isCurrentUserReviewed=!0,this._userReviewId=i.id):(this._isCurrentUserReviewed=!1,this._userReviewId=null)):(this._reviews=[],this._isCurrentUserReviewed=!1,this._userReviewId=null),e.next=38;break;case 33:this._item=null,this._reviews=[],this.error=n.message||"Gagal memuat detail item.",this._isCurrentUserReviewed=!1,this._userReviewId=null;case 38:e.next=47;break;case 40:e.prev=40,e.t0=e.catch(20),this._item=null,this._reviews=[],this.error=e.t0.message||"Terjadi kesalahan saat memuat data.",this._isCurrentUserReviewed=!1,this._userReviewId=null;case 47:return e.prev=47,this.isLoading=!1,this._editingReviewId=null,this._showRentForm=!1,this.renderContent(),this._item&&this.fetchUserBasedRecommendations(),e.finish(47);case 54:case"end":return e.stop()}}),e,this,[[20,40,47,54]])}))),function(e){return p.apply(this,arguments)})},{key:"getStyles",value:function(){return"\n      <style>\n        .detail-product-container {\n          font-family: 'Open Sans', sans-serif;\n        }\n        \n        .detail-product-container .hide-scrollbar {\n          scrollbar-width: none;\n          -ms-overflow-style: none;\n        }\n        \n        .detail-product-container .hide-scrollbar::-webkit-scrollbar {\n          display: none;\n        }\n        \n        .detail-product-container .nav-button {\n          background: rgba(55, 65, 81, 0.9);\n          color: white;\n          border: none;\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          backdrop-filter: blur(4px);\n        }\n        \n        .detail-product-container .nav-button:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n        \n        .detail-product-container .nav-button:not(:disabled):active {\n          transform: scale(0.95);\n        }\n        \n        .detail-product-container .thumbnail-item {\n          transition: all 0.2s ease;\n          border: 2px solid transparent;\n          border-radius: 8px;\n          overflow: hidden;\n        }\n        \n        .detail-product-container .thumbnail-item.active {\n          border-color: #3b82f6;\n        }\n        \n        .detail-product-container .recommendation-card {\n          background: #f8fafc;\n          border: 1px solid #e2e8f0;\n          border-radius: 12px;\n          overflow: hidden;\n          transition: all 0.2s ease;\n        }\n        \n        .detail-product-container .recommendation-card:active {\n          transform: translateY(1px);\n        }\n        \n        .detail-product-container .user-rec-card {\n          background: #1e293b;\n          border: 1px solid #334155;\n          color: white;\n        }\n        \n        .detail-product-container .slider-nav-button {\n          background: rgba(55, 65, 81, 0.8);\n          color: white;\n          border: none;\n          width: 36px;\n          height: 36px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          flex-shrink: 0;\n        }\n        \n        .detail-product-container .slider-nav-button:disabled {\n          opacity: 0.4;\n          cursor: not-allowed;\n        }\n        \n        .detail-product-container .slider-nav-button:not(:disabled):active {\n          transform: scale(0.9);\n        }\n        \n        .detail-product-container .user-slider-nav-button {\n          background: rgba(148, 163, 184, 0.8);\n          color: #1e293b;\n        }\n        \n        .detail-product-container .status-badge {\n          display: inline-block;\n          padding: 6px 12px;\n          border-radius: 9999px;\n          font-size: 14px;\n          font-weight: 600;\n        }\n        \n        .detail-product-container .status-available {\n          background: #dcfce7;\n          color: #166534;\n        }\n        \n        .detail-product-container .status-pending {\n          background: #fef3c7;\n          color: #92400e;\n        }\n        \n        .detail-product-container .status-rented {\n          background: #dbeafe;\n          color: #1d4ed8;\n        }\n        \n        .detail-product-container .status-sold {\n          background: #fee2e2;\n          color: #dc2626;\n        }\n        \n        .detail-product-container .status-default {\n          background: #f1f5f9;\n          color: #475569;\n        }\n        \n        .detail-product-container .info-card {\n          background: #374151;\n          color: white;\n          padding: 16px;\n          border-radius: 8px;\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n        }\n        \n        .detail-product-container .action-button {\n          padding: 12px 24px;\n          border-radius: 8px;\n          font-weight: 600;\n          border: none;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n        \n        .detail-product-container .action-button:active {\n          transform: translateY(1px);\n        }\n        \n        .detail-product-container .btn-buy {\n          background: #059669;\n          color: white;\n        }\n        \n        .detail-product-container .btn-rent {\n          background: #2563eb;\n          color: white;\n        }\n        \n        .detail-product-container .availability-tag {\n          background: #3b82f6;\n          color: white;\n          padding: 2px 8px;\n          border-radius: 6px;\n          font-size: 11px;\n          font-weight: 600;\n        }\n        \n        .detail-product-container .availability-tag.rent {\n          background: #2563eb;\n        }\n        \n        .detail-product-container .availability-tag.sell {\n          background: #059669;\n        }\n      </style>\n    "}},{key:"renderContent",value:function(){this.innerHTML="";var e=this.getStyles(),t=this.renderItemDetails(),n=this.renderReviewsSection(),r=this.renderRentForm(),o=this.renderUserBasedRecommendations(),i=this.renderItemBasedRecommendations();this.innerHTML="\n        ".concat(e,'\n        <div class="detail-product-container">\n            <div class="container mx-auto px-4 py-8">\n                ').concat(t,"\n                ").concat(r,"\n                ").concat(o,"\n                ").concat(i,"\n                ").concat(n,"\n            </div>\n        </div>\n        "),this.setupEventListeners()}},{key:"renderItemDetails",value:function(){var e=this;if(this.isLoading&&!this._item)return"<p>Memuat detail item...</p>";if(this.error&&!this._item)return'<p class="text-red-500">Error: '.concat(this.error,"</p>");if(!this._item)return"<p>Detail item tidak tersedia.</p>";var t=this._item,n=function(e){if(null==e)return"-";var t="string"==typeof e?Number.parseFloat(e):e;return isNaN(t)?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)},r=this.getStatusInfo(t),o=W.getUserInfo(),i=o&&this._item&&this._item.user_id===o.id,a=r.canTransact&&!i&&!this._showRentForm;return' \n        <div class="bg-white shadow-lg rounded-lg p-6 mb-8">\n            <h2 class="text-2xl font-bold mb-6 text-gray-800">'.concat(t.name,'</h2>\n            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">\n                \x3c!-- Photo Gallery --\x3e\n                <div>\n                    ').concat(t.photos&&t.photos.length>0?'\n                        \x3c!-- Main Photo Display --\x3e\n                        <div class="mb-6">\n                            <div class="relative bg-gray-50 rounded-lg overflow-hidden" style="height: 400px;">\n                                <img src="http://localhost:5000'.concat(t.photos[this._currentPhotoIndex],'" \n                                     alt="').concat(t.name,'" \n                                     class="w-full h-full object-contain">\n                                ').concat(t.photos.length>1?'\n                                    <button class="absolute left-3 top-1/2 transform -translate-y-1/2 nav-button" \n                                            id="prev-photo">\n                                        <i class="fa-solid fa-angle-left"></i>\n                                    </button>\n                                    <button class="absolute right-3 top-1/2 transform -translate-y-1/2 nav-button" \n                                            id="next-photo">\n                                        <i class="fa-solid fa-angle-right"></i>\n                                    </button>\n                                ':"","\n                            </div>\n                        </div>\n                        \n                        \x3c!-- Thumbnail Slider --\x3e\n                        ").concat(t.photos.length>1?'\n                            <div class="relative">\n                                <div class="flex items-center gap-3">\n                                    <button class="slider-nav-button" id="thumb-prev">\n                                        <i class="fa-solid fa-angle-left text-sm"></i>\n                                    </button>\n                                    <div class="flex-1 overflow-hidden">\n                                        <div class="flex gap-3 transition-transform duration-300 hide-scrollbar" \n                                             id="thumbnail-container" style="overflow-x: auto;">\n                                            '.concat(t.photos.map((function(n,r){return'\n                                                <div class="flex-shrink-0 cursor-pointer thumbnail-item '.concat(r===e._currentPhotoIndex?"active":"",'" \n                                                     data-index="').concat(r,'">\n                                                    <img src="http://localhost:5000').concat(n,'" \n                                                         alt="').concat(t.name," ").concat(r+1,'" \n                                                         class="w-20 h-20 object-cover">\n                                                </div>\n                                            ')})).join(""),'\n                                        </div>\n                                    </div>\n                                    <button class="slider-nav-button" id="thumb-next">\n                                        <i class="fa-solid fa-angle-right text-sm"></i>\n                                    </button>\n                                </div>\n                            </div>\n                        '):"","\n                    "):'<div class="w-full h-96 bg-gray-100 rounded-lg mb-6 flex items-center justify-center text-gray-500">Tidak Ada Foto</div>','\n                </div>\n\n                \x3c!-- Product Information --\x3e\n                <div class="space-y-6">\n                    \x3c!-- Description --\x3e\n                    <div class="bg-gray-50 p-4 rounded-lg">\n                        <h3 class="text-lg font-semibold mb-2 text-gray-800">Deskripsi</h3>\n                        <p class="text-gray-600">').concat(t.description||"-",'</p>\n                    </div>\n\n                    \x3c!-- Product Details --\x3e\n                    <div class="info-card">\n                        <h3 class="text-xl font-semibold mb-3">Detail Item</h3>\n                        <p class="mb-2"><strong>Kategori:</strong> ').concat(t.category_name||"-",'</p>\n                        <p><strong>Status Item:</strong> <span class="status-badge ').concat(r.class,'">').concat(r.display,"</span></p>\n                    </div>\n\n                    \x3c!-- Pricing Information --\x3e\n                    ").concat(r.canTransact?'\n                    <div class="info-card">\n                        <h3 class="text-xl font-semibold mb-3">Informasi Harga</h3>\n                        '.concat(t.is_available_for_sell?'<p class="mb-2"><strong>Harga Jual:</strong> '.concat(n(t.price_sell),"</p>"):"","\n                        ").concat(t.is_available_for_rent?'\n                            <p class="mb-2"><strong>Harga Sewa per Hari:</strong> '.concat(n(t.price_rent),"</p>\n                            <p><strong>Deposit Sewa:</strong> ").concat(n(t.deposit_amount),"</p>\n                        "):"","\n                    </div>\n                    "):"",'\n\n                    \x3c!-- Location & Seller --\x3e\n                    <div class="info-card">\n                        <h3 class="text-xl font-semibold mb-3">Lokasi & Penjual</h3>\n                        <p class="mb-2"><strong>Lokasi:</strong> ').concat(t.city_name||"-",", ").concat(t.province_name||"-","</p>\n                        <p><strong>Penjual:</strong> ").concat(t.owner_name||"Tidak Diketahui"," (").concat(t.owner_email||"-",")</p>\n                    </div>\n\n                    \x3c!-- Action Buttons --\x3e\n                    ").concat(a?'\n                        <div class="flex gap-4">\n                            '.concat(t.is_available_for_sell?'<button id="buy-button" class="action-button btn-buy">Beli</button>':"","\n                            ").concat(t.is_available_for_rent?'<button id="rent-button" class="action-button btn-rent">Sewa</button>':"","\n                        </div>\n                    "):i&&r.canTransact?'<p class="text-gray-600">Anda adalah pemilik item ini.</p>':r.canTransact?"":'<p class="text-gray-600">Item ini saat ini tidak tersedia untuk transaksi.</p>',"\n                </div>\n            </div>\n        </div>\n        ")}},{key:"renderReviewsSection",value:function(){var e,t=this;e=this.isLoading&&!this._item?"<p>Memuat review...</p>":this.error&&!this._item?"":0===this._reviews.length?"<p>Belum ada review untuk item ini.</p>":'\n                <div class="space-y-4">\n                    '.concat(this._reviews.map((function(e){return t.renderReview(e)})).join(""),"\n                </div>\n            ");var n=W.getUserInfo()&&!!this._item&&!this._isCurrentUserReviewed&&this._shouldShowReviewForm&&null===this._editingReviewId;return'\n            <div class="bg-white shadow-lg rounded-lg p-6 mt-8">\n                <h3 class="text-xl font-bold mb-4 text-gray-800">Review Pengguna ('.concat(this._reviews.length,")</h3>\n\n                 ").concat(n?this.renderReviewForm():"",'\n\n                <div id="reviews-list" class="mt-4">\n                    ').concat(e,"\n                </div>\n            </div>\n        ")}},{key:"renderReviewForm",value:function(){return this._item&&W.isAuthenticated()&&!this._isCurrentUserReviewed&&null===this._editingReviewId?'\n            <div id="review-form-section" class="mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50">\n                <h4 class="text-lg font-semibold mb-3 text-gray-800">Tulis Review Anda</h4>\n                <form id="add-review-form">\n                    <div class="mb-3">\n                        <label for="review-comment" class="block text-sm font-medium text-gray-700">Komentar</label>\n                        <textarea id="review-comment" name="comment" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm" required></textarea>\n                    </div>\n                    <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 action-button">\n                        Kirim Review\n                    </button>\n                </form>\n            </div>\n        ':""}},{key:"renderEditReviewForm",value:function(e){return e&&W.isAuthenticated()?this._editingReviewId!==e.id?"":'\n             <div class="mt-2 mb-4 p-4 border border-blue-200 rounded-lg bg-blue-50">\n                 <h4 class="text-lg font-semibold mb-3 text-gray-800">Edit Review Anda</h4>\n                 <form class="edit-review-form" data-review-id="'.concat(e.id,'">\n                     <div class="mb-3">\n                         <label for="edit-review-comment-').concat(e.id,'" class="block text-sm font-medium text-gray-700">Komentar</label>\n                         <textarea id="edit-review-comment-').concat(e.id,'" name="comment" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm" required>').concat(e.comment||"",'</textarea>\n                     </div>\n                      <div class="flex gap-2">\n                          <button type="submit" class="save-edit-button action-button bg-green-600 text-white">\n                              Simpan Perubahan\n                          </button>\n                           <button type="button" class="cancel-edit-button action-button bg-gray-300 text-gray-700">\n                               Batal\n                           </button>\n                      </div>\n                 </form>\n             </div>\n        '):""}},{key:"renderReview",value:function(e){if(!e)return"";var t=W.getUserInfo(),n=t&&t.id===e.user_id;return n&&this._editingReviewId===e.id?this.renderEditReviewForm(e):'\n            <div class="border-b border-gray-200 pb-4 mb-4" data-review-id="'.concat(e.id,'">\n                <p class="font-semibold text-gray-800">').concat(e.user_name||"Pengguna Tidak Diketahui",'</p>\n                <p class="text-gray-600 mt-1" id="review-comment-').concat(e.id,'">').concat(e.comment||"-",'</p>\n                <p class="text-gray-500 text-sm mt-1">\n                    Direview pada: ').concat(e.created_at?new Date(e.created_at).toLocaleDateString("id-ID"):"-","\n                </p>\n                ").concat(n&&null===this._editingReviewId?'\n                     <div class="mt-2 text-sm flex items-center gap-2">\n                         <button class="edit-review-button text-blue-600 bg-blue-100 px-2 py-1 rounded-full text-xs font-semibold" data-review-id="'.concat(e.id,'">Edit</button>\n                         <button class="delete-review-button text-red-600 bg-red-100 px-2 py-1 rounded-full text-xs font-semibold" data-review-id="').concat(e.id,'">Hapus</button>\n                     </div>\n                 '):"","\n            </div>\n        ")}},{key:"renderRentForm",value:function(){if(!this._showRentForm||!this._item||!W.isAuthenticated())return"";var e=(new Date).toISOString().split("T")[0],t=this._item,n=this.formatRupiah;return'\n            <div id="rent-form-section" class="bg-white shadow-lg rounded-lg p-6 mt-8 mb-8">\n                <h3 class="text-xl font-bold mb-4 text-gray-800">Formulir Penyewaan: '.concat(t.name,'</h3>\n                 <p class="mb-4 text-gray-600">Harga Sewa per Hari: ').concat(n(t.price_rent),", Deposit: ").concat(n(t.deposit_amount),'</p>\n                <form id="rent-item-form">\n                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">\n                        <div>\n                            <label for="rent-start-date" class="block text-sm font-medium text-gray-700">Tanggal Mulai Sewa</label>\n                            <input type="date" id="rent-start-date" name="rent_start_date"\n                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm"\n                                required min="').concat(e,'">\n                        </div>\n                        <div>\n                            <label for="rent-end-date" class="block text-sm font-medium text-gray-700">Tanggal Selesai Sewa</label>\n                            <input type="date" id="rent-end-date" name="rent_end_date"\n                                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm"\n                                required min="').concat(e,'">\n                        </div>\n                    </div>\n                    <div class="flex gap-2 mt-6">\n                        <button type="submit" class="action-button btn-rent">\n                            Ajukan Penyewaan\n                        </button>\n                         <button type="button" id="cancel-rent-button" class="action-button bg-gray-300 text-gray-700">\n                             Batal\n                         </button>\n                    </div>\n                </form>\n            </div>\n        ')}},{key:"renderUserBasedRecommendations",value:function(){var e=this,t=W.getUserInfo();if(!t||!t.id||this.isLoading||this.error||!this._item)return"";if(this.isLoadingUserBasedRecommendations)return'\n                <div class="bg-slate-800 text-white shadow-lg rounded-lg p-6 mt-8 mb-8">\n                    <h3 class="text-xl font-bold mb-4">Produk yang Anda Sukai (Rekomendasi User Based)</h3>\n                    <p class="text-slate-300">Memuat rekomendasi...</p>\n                </div>\n            ';if(this.userBasedRecommendationsError)return'\n                <div class="bg-red-800 text-white shadow-lg rounded-lg p-6 mt-8 mb-8">\n                    <h3 class="text-xl font-bold mb-4">Produk yang Anda Sukai (Rekomendasi User Based)</h3>\n                    <p>'.concat(this.userBasedRecommendationsError,"</p>\n                </div>\n            ");if(!this.userBasedRecommendations||0===this.userBasedRecommendations.length)return'\n                <div class="bg-slate-800 text-white shadow-lg rounded-lg p-6 mt-8 mb-8">\n                    <h3 class="text-xl font-bold mb-4">Produk yang Anda Sukai (Rekomendasi User Based)</h3>\n                    <p class="text-slate-300">Tidak ada rekomendasi user based yang tersedia saat ini.</p>\n                </div>\n            ';var n=this.formatRupiah,r=this.userBasedRecommendations.map((function(t){var r=e.getStatusInfo(t);return'\n                <div class="recommendation-card user-rec-card p-4 flex-shrink-0 w-64">\n                    <a href="/#/items/'.concat(t.id||t.product_id,'" class="block text-white">\n                        <div class="mb-3 relative">\n                             ').concat(t.thumbnail?'<img src="'.concat("http://localhost:5000").concat(t.thumbnail,'" alt="').concat(t.name||"Product image",'" class="w-full h-32 object-cover rounded">'):'<div class="w-full h-32 bg-slate-600 rounded flex items-center justify-center text-slate-400 text-sm">No Image</div>','\n                             <div class="absolute top-2 left-2">\n                                <span class="px-2 py-1 rounded-md text-xs font-medium bg-slate-700 text-white">').concat(r.display,'</span>\n                             </div>\n                        </div>\n                        <div class="space-y-2">\n                            <h5 class="text-base font-bold line-clamp-2">').concat(t.name||t.product_name||"Unnamed Product","</h5>\n                            ").concat(r.canTransact?'\n                            <div class="flex items-center gap-2 flex-wrap">\n                                '.concat(t.is_available_for_rent?'<span class="availability-tag rent">Sewa</span>':"","\n                                ").concat(t.is_available_for_sell?'<span class="availability-tag sell">Jual</span>':"",'\n                            </div>\n                            <div class="space-y-1 border-t border-slate-600 pt-2">\n                               ').concat(t.is_available_for_sell?'<p class="text-sm font-semibold">Jual: '.concat(n(t.price_sell),"</p>"):"","\n                                ").concat(t.is_available_for_rent?'<p class="text-sm font-semibold">Sewa: '.concat(n(t.price_rent)).concat(t.price_rent>0?" /hari":"","</p>"):"","\n                            </div>\n                            "):"","\n                        </div>\n                    </a>\n                </div>\n            ")})).join("");return'\n            <div class="bg-slate-800 text-white shadow-lg rounded-lg p-6 mt-8 mb-8">\n                <h3 class="text-xl font-bold mb-4">Produk yang Anda Sukai (Rekomendasi User Based)</h3>\n                <div class="relative">\n                    <div class="flex items-center gap-3">\n                        <button class="user-slider-nav-button" id="user-rec-prev">\n                            <i class="fa-solid fa-angle-left text-sm"></i>\n                        </button>\n                        <div class="flex-1 overflow-hidden">\n                            <div class="flex gap-4 transition-transform duration-300 hide-scrollbar" \n                                 id="user-recommendations-container" style="overflow-x: auto;">\n                                '.concat(r,'\n                            </div>\n                        </div>\n                        <button class="user-slider-nav-button" id="user-rec-next">\n                            <i class="fa-solid fa-angle-right text-sm"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        ')}},{key:"renderItemBasedRecommendations",value:function(){var e=this;if(this.isLoading||this.error||!this._item)return"";if(this.isLoadingItemBasedRecommendations)return'\n                 <div class="bg-white shadow-lg rounded-lg p-6 mt-8 mb-8">\n                     <h3 class="text-xl font-bold mb-4 text-gray-800">Produk Serupa Lainnya (Rekomendasi Item Based)</h3>\n                      <p class="text-gray-600">Memuat rekomendasi serupa...</p>\n                 </div>\n            ';if(this.itemBasedRecommendationsError)return'\n                  <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mt-8 mb-8">\n                     <strong class="font-bold">Error!</strong>\n                      <span class="block sm:inline">'.concat(this.itemBasedRecommendationsError,"</span>\n                  </div>\n             ");if(!this.itemBasedRecommendations||0===this.itemBasedRecommendations.length)return'\n                <div class="bg-white shadow-lg rounded-lg p-6 mt-8 mb-8">\n                    <h3 class="text-xl font-bold mb-4 text-gray-800">Produk Serupa Lainnya (Rekomendasi Item Based)</h3>\n                    <p class="text-gray-600">Tidak ada rekomendasi serupa yang tersedia saat ini.</p>\n                </div>\n            ';var t=this.formatRupiah,n=this.itemBasedRecommendations.map((function(n){var r=e.getStatusInfo(n);return'\n                <div class="recommendation-card p-4 flex-shrink-0 w-64">\n                     <a href="/#/items/'.concat(n.id||n.product_id,'" class="block text-gray-800">\n                         <div class="mb-3 relative">\n                             ').concat(n.thumbnail?'<img src="'.concat("http://localhost:5000").concat(n.thumbnail,'" alt="').concat(n.name||"Product image",'" class="w-full h-32 object-cover rounded">'):'<div class="w-full h-32 bg-gray-200 rounded flex items-center justify-center text-gray-500 text-sm">No Image</div>','\n                             <div class="absolute top-2 left-2">\n                                <span class="px-2 py-1 rounded-md text-xs font-medium bg-white text-gray-800 shadow-sm">').concat(r.display,'</span>\n                             </div>\n                        </div>\n                        <div class="space-y-2">\n                            <h5 class="text-base font-bold line-clamp-2">').concat(n.name||n.product_name||"Unnamed Product","</h5>\n                            ").concat(r.canTransact?'\n                            <div class="flex items-center gap-2 flex-wrap">\n                                '.concat(n.is_available_for_rent?'<span class="availability-tag rent">Sewa</span>':"","\n                                ").concat(n.is_available_for_sell?'<span class="availability-tag sell">Jual</span>':"",'\n                            </div>\n                            <div class="space-y-1 border-t border-gray-300 pt-2">\n                                ').concat(n.is_available_for_sell?'<p class="text-sm font-semibold">Jual: '.concat(t(n.price_sell),"</p>"):"","\n                                 ").concat(n.is_available_for_rent?'<p class="text-sm font-semibold">Sewa: '.concat(t(n.price_rent)).concat(n.price_rent>0?" /hari":"","</p>"):"","\n                            </div>\n                            "):"","\n                        </div>\n                     </a>\n                 </div>\n             ")})).join("");return'\n            <div class="bg-white shadow-lg rounded-lg p-6 mt-8 mb-8">\n                <h3 class="text-xl font-bold mb-4 text-gray-800">Produk Serupa Lainnya (Rekomendasi Item Based)</h3>\n                <div class="relative">\n                    <div class="flex items-center gap-3">\n                        <button class="slider-nav-button" id="item-rec-prev">\n                            <i class="fa-solid fa-angle-left text-sm"></i>\n                        </button>\n                        <div class="flex-1 overflow-hidden">\n                            <div class="flex gap-4 transition-transform duration-300 hide-scrollbar" \n                                 id="item-recommendations-container" style="overflow-x: auto;">\n                                 '.concat(n,'\n                             </div>\n                        </div>\n                        <button class="slider-nav-button" id="item-rec-next">\n                            <i class="fa-solid fa-angle-right text-sm"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        ')}},{key:"setupEventListeners",value:function(){var e=this;this.removeEventListeners(),this.setupPhotoNavigation(),this.setupRecommendationSliders();var t=this.querySelector("#add-review-form");if(t&&(this._addReviewFormSubmitHandler=this.handleReviewSubmit,t.addEventListener("submit",this._addReviewFormSubmitHandler),window.location.hash.endsWith("#review")&&this._shouldShowReviewForm)){var n=this.querySelector("#review-form-section");n&&requestAnimationFrame((function(){n.scrollIntoView({behavior:"smooth",block:"start"})}))}var r=this.querySelector("#reviews-list");r&&(this._reviewActionsDelegate=function(t){var n,r=t.target,o=r.dataset.reviewId||(null===(n=r.closest("[data-review-id]"))||void 0===n?void 0:n.dataset.reviewId),i="BUTTON"===r.tagName;if(i&&r.closest(".edit-review-form")){var a=r.closest(".edit-review-form"),s=a?Number.parseInt(a.dataset.reviewId,10):null;if(!s)return;if(r.classList.contains("save-edit-button"))return void e.handleEditSubmit(t,s);if(r.classList.contains("cancel-edit-button"))return void e.cancelEditReview(t)}i&&o&&(r.classList.contains("edit-review-button")?e.handleEditReview(Number.parseInt(o,10)):r.classList.contains("delete-review-button")&&e.handleDeleteReview(Number.parseInt(o,10)))},r.addEventListener("click",this._reviewActionsDelegate));var o=this.querySelector("#buy-button");o&&(this._buyButtonClickHandler=this.handleBuy,o.addEventListener("click",this._buyButtonClickHandler));var i=this.querySelector("#rent-button");i&&(this._rentButtonClickHandler=this.handleRent,i.addEventListener("click",this._rentButtonClickHandler));var a=this.querySelector("#rent-item-form");if(a){this._rentFormSubmitHandler=this.handleRentFormSubmit,a.addEventListener("submit",this._rentFormSubmitHandler);var s=a.querySelector("#cancel-rent-button");s&&(this._cancelRentButtonClickHandler=this.cancelRentForm,s.addEventListener("click",this._cancelRentButtonClickHandler)),requestAnimationFrame((function(){a.scrollIntoView({behavior:"smooth",block:"start"})}))}}},{key:"setupPhotoNavigation",value:function(){var e=this;if(this._item&&this._item.photos&&!(this._item.photos.length<=1)){var t=this.querySelector("#prev-photo"),n=this.querySelector("#next-photo"),r=this.querySelector("#thumb-prev"),o=this.querySelector("#thumb-next");t&&n&&(this._prevPhotoHandler=function(){e._currentPhotoIndex=e._currentPhotoIndex>0?e._currentPhotoIndex-1:e._item.photos.length-1,e.updatePhotoDisplay()},this._nextPhotoHandler=function(){e._currentPhotoIndex=e._currentPhotoIndex<e._item.photos.length-1?e._currentPhotoIndex+1:0,e.updatePhotoDisplay()},t.addEventListener("click",this._prevPhotoHandler),n.addEventListener("click",this._nextPhotoHandler)),r&&o&&(this._thumbPrevHandler=function(){return e.scrollThumbnails(-1)},this._thumbNextHandler=function(){return e.scrollThumbnails(1)},r.addEventListener("click",this._thumbPrevHandler),o.addEventListener("click",this._thumbNextHandler)),this.querySelectorAll(".thumbnail-item").forEach((function(t,n){var r=function(){e._currentPhotoIndex=n,e.updatePhotoDisplay()};t.addEventListener("click",r),t._clickHandler=r}))}}},{key:"setupRecommendationSliders",value:function(){var e=this,t=this.querySelector("#user-rec-prev"),n=this.querySelector("#user-rec-next"),r=this.querySelector("#item-rec-prev"),o=this.querySelector("#item-rec-next");t&&n&&(this._userRecPrevHandler=function(){return e.scrollRecommendations("user",-1)},this._userRecNextHandler=function(){return e.scrollRecommendations("user",1)},t.addEventListener("click",this._userRecPrevHandler),n.addEventListener("click",this._userRecNextHandler)),r&&o&&(this._itemRecPrevHandler=function(){return e.scrollRecommendations("item",-1)},this._itemRecNextHandler=function(){return e.scrollRecommendations("item",1)},r.addEventListener("click",this._itemRecPrevHandler),o.addEventListener("click",this._itemRecNextHandler))}},{key:"updatePhotoDisplay",value:function(){var e=this,t=this.querySelector(".bg-gray-50 img"),n=this.querySelectorAll(".thumbnail-item");t&&this._item&&this._item.photos&&(t.src="http://localhost:5000".concat(this._item.photos[this._currentPhotoIndex])),n.forEach((function(t,n){n===e._currentPhotoIndex?t.classList.add("active"):t.classList.remove("active")}))}},{key:"scrollThumbnails",value:function(e){var t=this.querySelector("#thumbnail-container");t&&(t.scrollLeft+=100*e)}},{key:"scrollRecommendations",value:function(e,t){var n="user"===e?"#user-recommendations-container":"#item-recommendations-container",r=this.querySelector(n);if(r){var o=r.scrollLeft+280*t;r.scrollTo({left:o,behavior:"smooth"})}}},{key:"removeEventListeners",value:function(){var e=this.querySelector("#add-review-form");e&&this._addReviewFormSubmitHandler&&(e.removeEventListener("submit",this._addReviewFormSubmitHandler),this._addReviewFormSubmitHandler=null);var t=this.querySelector("#reviews-list");t&&this._reviewActionsDelegate&&(t.removeEventListener("click",this._reviewActionsDelegate),this._reviewActionsDelegate=null);var n=this.querySelector("#buy-button");n&&this._buyButtonClickHandler&&(n.removeEventListener("click",this._buyButtonClickHandler),this._buyButtonClickHandler=null);var r=this.querySelector("#rent-button");r&&this._rentButtonClickHandler&&(r.removeEventListener("click",this._rentButtonClickHandler),this._rentButtonClickHandler=null);var o=this.querySelector("#rent-item-form");o&&this._rentFormSubmitHandler&&(o.removeEventListener("submit",this._rentFormSubmitHandler),this._rentFormSubmitHandler=null);var i=this.querySelector("#cancel-rent-button");i&&this._cancelRentButtonClickHandler&&(i.removeEventListener("click",this._cancelRentButtonClickHandler),this._cancelRentButtonClickHandler=null);var a=this.querySelector("#prev-photo"),s=this.querySelector("#next-photo");a&&this._prevPhotoHandler&&(a.removeEventListener("click",this._prevPhotoHandler),this._prevPhotoHandler=null),s&&this._nextPhotoHandler&&(s.removeEventListener("click",this._nextPhotoHandler),this._nextPhotoHandler=null);var c=this.querySelector("#thumb-prev"),l=this.querySelector("#thumb-next");c&&this._thumbPrevHandler&&(c.removeEventListener("click",this._thumbPrevHandler),this._thumbPrevHandler=null),l&&this._thumbNextHandler&&(l.removeEventListener("click",this._thumbNextHandler),this._thumbNextHandler=null),this.querySelectorAll(".thumbnail-item").forEach((function(e){e._clickHandler&&(e.removeEventListener("click",e._clickHandler),e._clickHandler=null)}));var u=this.querySelector("#user-rec-prev"),d=this.querySelector("#user-rec-next");u&&this._userRecPrevHandler&&(u.removeEventListener("click",this._userRecPrevHandler),this._userRecPrevHandler=null),d&&this._userRecNextHandler&&(d.removeEventListener("click",this._userRecNextHandler),this._userRecNextHandler=null);var h=this.querySelector("#item-rec-prev"),p=this.querySelector("#item-rec-next");h&&this._itemRecPrevHandler&&(h.removeEventListener("click",this._itemRecPrevHandler),this._itemRecPrevHandler=null),p&&this._itemRecNextHandler&&(p.removeEventListener("click",this._itemRecNextHandler),this._itemRecNextHandler=null)}},{key:"handleReviewSubmit",value:(h=te(Q().mark((function e(t){var n,r,o,i,a,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),W.getUserInfo()&&this._item&&this._item.id){e.next=5;break}return alert("Anda harus login dan item harus valid untuk mengirim review."),e.abrupt("return");case 5:if(n=t.target,r=n.querySelector("#review-comment"),o=r?r.value.trim():""){e.next=11;break}return alert("Komentar review tidak boleh kosong."),e.abrupt("return");case 11:return(i=n.querySelector('button[type="submit"]'))&&(i.disabled=!0),e.prev=13,e.next=16,f("/reviews/item/".concat(this._item.id),"POST",{comment:o});case 16:if("success"!==(a=e.sent).status){e.next=25;break}return alert("Review berhasil dikirim!"),r&&(r.value=""),this._shouldShowReviewForm=!1,e.next=23,this.fetchItemAndReviews(this._item.id);case 23:e.next=28;break;case 25:s=a.message||"Gagal mengirim review baru.",a.errors&&Array.isArray(a.errors)&&(s+="\nValidasi error:",a.errors.forEach((function(e){e.param&&e.msg?s+="\n- ".concat(e.param,": ").concat(e.msg):"string"==typeof e&&(s+="\n- ".concat(e))}))),alert(s);case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(13),alert("Terjadi kesalahan saat mengirim review baru.");case 33:return e.prev=33,i&&this._shouldShowReviewForm&&(i.disabled=!1),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[13,30,33,36]])}))),function(e){return h.apply(this,arguments)})},{key:"handleEditReview",value:function(e){var t=this;if(this._editingReviewId!==Number.parseInt(e,10)){null!==this._editingReviewId&&this.cancelEditReview();var n=this._reviews.find((function(t){return t.id===Number.parseInt(e,10)}));n?(this._editingReviewId=n.id,this.renderContent(),requestAnimationFrame((function(){var n=t.querySelector('.edit-review-form[data-review-id="'.concat(e,'"]'));n&&n.scrollIntoView({behavior:"smooth",block:"center"})}))):alert("Review tidak ditemukan.")}}},{key:"cancelEditReview",value:function(){null!==this._editingReviewId&&(this._editingReviewId=null,this.renderContent())}},{key:"handleEditSubmit",value:(d=te(Q().mark((function e(t,n){var r,o,i,a,s,c,l,u,d;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),W.getUserInfo()&&this._item&&this._item.id&&n){e.next=5;break}return alert("Informasi tidak lengkap untuk memperbarui review."),e.abrupt("return");case 5:if(r=t.target.closest(".edit-review-form")){e.next=9;break}return alert("Form edit tidak ditemukan."),e.abrupt("return");case 9:if(o=r.querySelector("#edit-review-comment-".concat(n)),i=o?o.value.trim():""){e.next=18;break}return alert("Komentar review tidak boleh kosong."),(a=r.querySelector(".save-edit-button"))&&(a.disabled=!1),(s=r.querySelector(".cancel-edit-button"))&&(s.disabled=!1),e.abrupt("return");case 18:return(c=r.querySelector(".save-edit-button"))&&(c.disabled=!0),(l=r.querySelector(".cancel-edit-button"))&&(l.disabled=!0),e.prev=22,e.next=25,f("/reviews/".concat(n),"PATCH",{comment:i});case 25:if("success"!==(u=e.sent).status){e.next=33;break}return alert("Review berhasil diperbarui!"),this._editingReviewId=null,e.next=31,this.fetchItemAndReviews(this._item.id);case 31:e.next=36;break;case 33:d=u.message||"Gagal memperbarui review.",u.errors&&Array.isArray(u.errors)&&(d+="\nValidasi error:",u.errors.forEach((function(e){e.param&&e.msg?d+="\n- ".concat(e.param,": ").concat(e.msg):"string"==typeof e&&(d+="\n- ".concat(e))}))),alert(d);case 36:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(22),alert("Terjadi kesalahan saat memperbarui review.");case 41:return e.prev=41,this._editingReviewId===n&&(c&&(c.disabled=!1),l&&(l.disabled=!1)),e.finish(41);case 44:case"end":return e.stop()}}),e,this,[[22,38,41,44]])}))),function(e,t){return d.apply(this,arguments)})},{key:"handleDeleteReview",value:(u=te(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Apakah Anda yakin ingin menghapus review ini?")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,f("/reviews/".concat(t),"DELETE");case 6:if("success"!==(n=e.sent).status){e.next=13;break}return alert("Review berhasil dihapus!"),e.next=11,this.fetchItemAndReviews(this._item.id);case 11:e.next=14;break;case 13:alert("Gagal menghapus review: "+(n.message||"Terjadi kesalahan."));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),alert("Terjadi kesalahan saat menghapus review.");case 19:case"end":return e.stop()}}),e,this,[[3,16]])}))),function(e){return u.apply(this,arguments)})},{key:"handleBuy",value:(l=te(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W.getUserInfo()&&this._item&&this._item.id){e.next=4;break}return alert("Anda harus login untuk melakukan pembelian."),e.abrupt("return");case 4:if(confirm('Apakah Anda yakin ingin membeli "'.concat(this._item.name,'" dengan harga ').concat(this.formatRupiah(this._item.price_sell),"?"))){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,f("/transactions","POST",{item_id:this._item.id,type:"buy"});case 10:"success"===(t=e.sent).status&&t.data?(alert("Transaksi pembelian berhasil dibuat!"),window.location.hash="#/transactions/".concat(t.data.id)):alert("Gagal membuat transaksi pembelian: "+(t.message||"Terjadi kesalahan.")),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),alert("Terjadi kesalahan saat membuat transaksi pembelian.");case 17:case"end":return e.stop()}}),e,this,[[7,14]])}))),function(){return l.apply(this,arguments)})},{key:"handleRent",value:(c=te(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._item&&W.isAuthenticated()){e.next=3;break}return alert("Item tidak tersedia atau Anda harus login."),e.abrupt("return");case 3:if(this.getStatusInfo(this._item).canTransact){e.next=7;break}return alert("Item ini tidak tersedia untuk disewa."),e.abrupt("return");case 7:this._showRentForm=!0,this.renderContent();case 9:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"handleRentFormSubmit",value:(s=te(Q().mark((function e(t){var n,r,o,i,a,s,c,l,u,d,h;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target,r=n.querySelector("#rent-start-date"),o=n.querySelector("#rent-end-date"),i=r?r.value:null,a=o?o.value:null,i&&a){e.next=9;break}return alert("Tanggal mulai dan selesai sewa harus diisi."),e.abrupt("return");case 9:if(s=new Date(i),c=new Date(a),(l=new Date).setHours(0,0,0,0),!isNaN(s.getTime())&&!isNaN(c.getTime())){e.next=16;break}return alert("Format tanggal tidak valid."),e.abrupt("return");case 16:if(!(s<l||c<l)){e.next=19;break}return alert("Tanggal sewa tidak boleh di masa lalu."),e.abrupt("return");case 19:if(!(s>=c)){e.next=22;break}return alert("Tanggal selesai sewa harus setelah tanggal mulai sewa."),e.abrupt("return");case 22:if(W.getUserInfo()&&this._item&&this._item.id){e.next=26;break}return alert("Anda harus login dan item harus valid untuk mengajukan penyewaan."),e.abrupt("return");case 26:return(u=n.querySelector('button[type="submit"]'))&&(u.disabled=!0),(d=n.querySelector("#cancel-rent-button"))&&(d.disabled=!0),e.prev=30,e.next=33,f("/transactions","POST",{item_id:this._item.id,type:"rent",rent_start_date:i,rent_end_date:a});case 33:"success"===(h=e.sent).status&&h.data?(alert("Transaksi penyewaan berhasil dibuat!"),this._showRentForm=!1,window.location.hash="#/transactions/".concat(h.data.id)):alert("Gagal membuat transaksi penyewaan: "+(h.message||"Terjadi kesalahan.")),e.next=40;break;case 37:e.prev=37,e.t0=e.catch(30),alert("Terjadi kesalahan saat membuat transaksi penyewaan.");case 40:return e.prev=40,this._showRentForm=!1,this.renderContent(),e.finish(40);case 44:case"end":return e.stop()}}),e,this,[[30,37,40,44]])}))),function(e){return s.apply(this,arguments)})},{key:"cancelRentForm",value:function(){this._showRentForm=!1,this.renderContent()}},{key:"fetchUserBasedRecommendations",value:(a=te(Q().mark((function e(){var t,n,r,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=W.getUserInfo())&&t.id&&!this.isLoading&&!this.error&&this._item){e.next=6;break}return this.userBasedRecommendations=[],this.isLoadingUserBasedRecommendations=!1,this.userBasedRecommendationsError=null,e.abrupt("return");case 6:return this.isLoadingUserBasedRecommendations=!0,this.userBasedRecommendationsError=null,this.renderContent(),e.prev=10,e.next=13,i=t.id,O("/recommend/user","POST",{user_id:i,top_n:5});case 13:if((n=e.sent)&&Array.isArray(n.recommendations)){e.next=18;break}return this.userBasedRecommendations=[],this.userBasedRecommendationsError="Gagal mengambil rekomendasi user based dari server (Format respons tidak sesuai).",e.abrupt("return");case 18:if(!(n.recommendations.length>0)){e.next=27;break}return r=n.recommendations.map(function(){var e=te(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("/items/".concat(t.product_id));case 3:if("success"!==(n=e.sent).status||!n.data){e.next=8;break}return e.abrupt("return",Z(Z({},t),n.data));case 8:return e.abrupt("return",null);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),e.next=22,Promise.all(r);case 22:o=e.sent,this.userBasedRecommendations=o.filter((function(e){return null!==e})),n.recommendations.length>0&&0===this.userBasedRecommendations.length?this.userBasedRecommendationsError="Gagal memuat detail untuk semua rekomendasi yang diterima dari ML API.":this.userBasedRecommendationsError=null,e.next=29;break;case 27:this.userBasedRecommendations=[],this.userBasedRecommendationsError=null;case 29:e.next=36;break;case 31:e.prev=31,e.t0=e.catch(10),this.userBasedRecommendations=[],this.isLoadingUserBasedRecommendations=!1,this.userBasedRecommendationsError="Gagal mengambil rekomendasi user based dari server (Server tidak merespons atau ada kesalahan jaringan).";case 36:return e.prev=36,this.isLoadingUserBasedRecommendations=!1,this.renderContent(),e.finish(36);case 40:case"end":return e.stop()}var i}),e,this,[[10,31,36,40]])}))),function(){return a.apply(this,arguments)})},{key:"fetchItemBasedRecommendationsForCurrentItem",value:(i=te(Q().mark((function e(t){var n,r,o,i=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return this.itemBasedRecommendations=[],this.isLoadingItemBasedRecommendations=!1,this.itemBasedRecommendationsError=null,this.renderContent(),e.abrupt("return");case 6:return this.isLoadingItemBasedRecommendations=!0,this.itemBasedRecommendationsError=null,this.renderContent(),e.prev=10,e.next=13,O("/recommend/item","POST",{product_id:t,top_n:5});case 13:if(!((n=e.sent)&&Array.isArray(n.recommendations)&&n.recommendations.length>0)){e.next=24;break}return r=n.recommendations.map(function(){var e=te(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("/items/".concat(t.product_id));case 3:if("success"!==(n=e.sent).status||!n.data){e.next=8;break}return e.abrupt("return",Z(Z({},t),n.data));case 8:return e.abrupt("return",null);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),e.next=18,Promise.all(r);case 18:o=e.sent,this.itemBasedRecommendations=o.filter((function(e){return null!==e&&e.id!==i._item.id})),this.isLoadingItemBasedRecommendations=!1,n.recommendations.length>0&&0===this.itemBasedRecommendations.length?n.recommendations.length>0?this.itemBasedRecommendationsError="Tidak ada rekomendasi serupa yang ditemukan atau detail gagal dimuat.":this.itemBasedRecommendationsError="Tidak ada rekomendasi serupa yang ditemukan dari ML API.":this.itemBasedRecommendationsError=null,e.next=27;break;case 24:this.itemBasedRecommendations=[],this.isLoadingItemBasedRecommendations=!1,this.itemBasedRecommendationsError=n.message||"Tidak ada rekomendasi serupa yang ditemukan dari ML API.";case 27:e.next=34;break;case 29:e.prev=29,e.t0=e.catch(10),this.itemBasedRecommendations=[],this.isLoadingItemBasedRecommendations=!1,this.itemBasedRecommendationsError=e.t0.message||"Terjadi kesalahan saat memuat rekomendasi serupa.";case 34:return e.prev=34,this.renderContent(),e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[10,29,34,37]])}))),function(e){return i.apply(this,arguments)})}],o=[{key:"observedAttributes",get:function(){return["item-id"]}}],r&&ne(n.prototype,r),o&&ne(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a,s,c,l,u,d,h,p,g}(re(HTMLElement));function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function de(){de=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new O(r||[]);return o(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(C([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=y.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==ue(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,n,r){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ue(t)+" is not iterable")}return b.prototype=y,o(_,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:b,configurable:!0}),b.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new L(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function he(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){he(i,r,o,a,s,"next",e)}function s(e){he(i,r,o,a,s,"throw",e)}a(void 0)}))}}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,me(r.key),r)}}function me(e){var t=function(e){if("object"!=ue(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ue(t)?t:t+""}function ge(e){var t="function"==typeof Map?new Map:void 0;return ge=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(ve())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&be(o,n.prototype),o}(e,arguments,ye(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),be(n,e)},ge(e)}function ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ve=function(){return!!e})()}function be(e,t){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},be(e,t)}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}customElements.define("detail-product",le),n(109),n(407),n(115);var we=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t,n){return t=ye(t),function(e,t){if(t&&("object"==ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ve()?Reflect.construct(t,n||[],ye(e).constructor):t.apply(e,n))}(this,t)).fetchUserProfile=e.fetchUserProfile.bind(e),e.handleUpdateProfile=e.handleUpdateProfile.bind(e),e.handleProvinceChangeForUpdateForm=e.handleProvinceChangeForUpdateForm.bind(e),e.fetchProvinces=e.fetchProvinces.bind(e),e.populateProvincesDropdown=e.populateProvincesDropdown.bind(e),e.fetchCitiesByProvinceId=e.fetchCitiesByProvinceId.bind(e),e.populateCitiesDropdown=e.populateCitiesDropdown.bind(e),e.setupProvinceChangeListener=e.setupProvinceChangeListener.bind(e),e.setWilayahDropdowns=e.setWilayahDropdowns.bind(e),e.user=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}(t,e),n=t,r=[{key:"connectedCallback",value:function(){this.render(),this.setupEventListeners(),this.fetchUserProfile(),this.fetchProvinces(),this.setupProvinceChangeListener()}},{key:"disconnectedCallback",value:function(){this.removeEventListeners();var e=this.querySelector("#update-province");e&&e.removeEventListener("change",this.handleProvinceChangeForUpdateForm)}},{key:"render",value:function(){this.innerHTML='\n            <div class="container mx-auto px-4 py-8 font-opensan">\n                <h2 class="text-2xl font-montserrat font-bold mb-6 text-gray-800">Profil Pengguna</h2>\n\n                \x3c!-- Main Card Container --\x3e\n                <div class="bg-white p-6 rounded-xl shadow-lg mb-8">\n                    \x3c!-- Informasi Akun Container (Dark) --\x3e\n                    <div class="bg-gray-700 text-white p-4 rounded-md shadow-sm mb-6">\n                        <h3 class="text-xl font-montserrat font-semibold mb-3">Informasi Akun</h3>\n                        <div id="profile-info">\n                            <p class="mb-2"><strong>Nama:</strong> <span id="user-name">Loading...</span></p>\n                            <p class="mb-2"><strong>Email:</strong> <span id="user-email">Loading...</span></p>\n                            <p class="mb-2"><strong>Provinsi:</strong> <span id="user-province">Loading...</span></p>\n                            <p class="mb-2"><strong>Kota:</strong> <span id="user-city">Loading...</span></p>\n                        </div>\n                    </div>\n\n                    \x3c!-- Perbarui Profil Section (Inside White Card) --\x3e\n                    <div>\n                        <h3 class="text-xl font-montserrat font-semibold mb-4 text-gray-700">Perbarui Profil</h3>\n                        <form id="update-profile-form" class="space-y-4">\n                            <div>\n                                <label for="update-name" class="block mb-2 text-sm font-medium text-gray-900">Nama</label>\n                                <input type="text" id="update-name" name="name" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="Nama Lengkap" />\n                            </div>\n                            \n                             <div>\n                                <label for="update-province" class="block mb-2 text-sm font-medium text-gray-900">Provinsi</label>\n                                <select id="update-province" name="province_id" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">\n                                     <option value="">Pilih Provinsi</option>\n                                 </select>\n                            </div>\n                             <div>\n                                <label for="update-city" class="block mb-2 text-sm font-medium text-gray-900">Kota/Kabupaten</label>\n                                <select id="update-city" name="city_id" disabled class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 disabled:opacity-50 disabled:cursor-not-allowed">\n                                    <option value="">Pilih Kota</option>\n                                 </select>\n                            </div>\n                            <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-semibold rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">\n                               Perbarui\n                            </button>\n                        </form>\n                    </div>\n                </div>\n\n                \x3c!-- Second Card Container --\x3e\n                <div class="bg-white p-6 rounded-xl shadow-lg">\n                     \x3c!-- Ubah Kata Sandi Section (Inside White Card)--\x3e\n                     <div>\n                         <h3 class="text-xl font-montserrat font-semibold mb-4 text-gray-700">Ubah Kata Sandi</h3>\n                         <form id="update-password-form" class="space-y-4">\n                             <div>\n                                 <label for="current-password" class="block mb-2 text-sm font-medium text-gray-900">Kata Sandi Saat Ini</label>\n                                 <input type="password" id="current-password" name="currentPassword" required class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">\n                             </div>\n                              <div>\n                                 <label for="new-password" class="block mb-2 text-sm font-medium text-gray-900">Kata Sandi Baru</label>\n                                 <input type="password" id="new-password" name="newPassword" required class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">\n                             </div>\n                             <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-semibold rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">\n                                Ubah Kata Sandi\n                             </button>\n                         </form>\n                     </div>\n                 </div>\n\n            </div>\n        '}},{key:"fetchUserProfile",value:(l=pe(de().mark((function e(){var t;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("/auth/me");case 3:"success"===(t=e.sent).status?(this.user=t.data.user,console.log("User Profile:",this.user),this.updateUIWithUserProfile(),this.setWilayahDropdowns()):console.error("Failed to fetch user profile:",t.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching user profile:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return l.apply(this,arguments)})},{key:"handleUpdateProfile",value:(c=pe(de().mark((function e(t){var n,r,o,i,a,s,c,l,u;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target,r=new FormData(n),o=Object.fromEntries(r.entries()),i=this.querySelector("#update-province"),a=this.querySelector("#update-city"),s=i.options[i.selectedIndex],c=a.options[a.selectedIndex],o.province_id=s?s.value:null,o.province_name=s?s.textContent:"",o.city_id=c?c.value:null,o.city_name=c?c.textContent:"",e.prev=12,e.next=15,f("/users/update-profile","PATCH",o);case 15:"success"===(l=e.sent).status?(console.log("Profile updated:",l.data.user),alert("Profile updated successfully!"),this.user=l.data.user,localStorage.setItem("user",JSON.stringify(this.user)),this.updateUIWithUserProfile(),u=new CustomEvent("userProfileUpdated",{detail:{user:this.user}}),window.dispatchEvent(u)):(console.error("Failed to update profile:",l.message,l.errors),alert("Failed to update profile: "+l.message+(l.errors?"\n"+l.errors.map((function(e){return e.msg})).join("\n"):""))),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(12),console.error("Error updating profile:",e.t0),alert("An error occurred while updating profile.");case 23:case"end":return e.stop()}}),e,this,[[12,19]])}))),function(e){return c.apply(this,arguments)})},{key:"updateUIWithUserProfile",value:function(){if(this.user){var e=this.querySelector("#user-name"),t=this.querySelector("#user-email"),n=this.querySelector("#user-province"),r=this.querySelector("#user-city"),o=this.querySelector("#update-name");e&&(e.textContent=this.user.name),t&&(t.textContent=this.user.email),n&&(n.textContent=this.user.province_name||"-"),r&&(r.textContent=this.user.city_name||"-"),o&&(o.value=this.user.name||"")}else{var i=this.querySelector("#profile-info");i&&(i.innerHTML="<p>Loading profile...</p>")}}},{key:"setupEventListeners",value:function(){var e=this.querySelector("#update-profile-form");e&&e.addEventListener("submit",this.handleUpdateProfile)}},{key:"removeEventListeners",value:function(){var e=this.querySelector("#update-profile-form");e&&e.removeEventListener("submit",this.handleUpdateProfile)}},{key:"fetchProvinces",value:(s=pe(de().mark((function e(){var t,n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.querySelector("#update-province")){e.next=3;break}return e.abrupt("return");case 3:return t.innerHTML='<option value="">Select Province</option>',e.prev=4,e.next=7,fetch("https://kanglerian.my.id/api-wilayah-indonesia/api/provinces.json");case 7:if((n=e.sent).ok){e.next=10;break}throw new Error("HTTP error! status: ".concat(n.status));case 10:return e.next=12,n.json();case 12:r=e.sent,this.populateProvincesDropdown(r),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.error("Error fetching provinces:",e.t0);case 19:case"end":return e.stop()}}),e,this,[[4,16]])}))),function(){return s.apply(this,arguments)})},{key:"populateProvincesDropdown",value:function(e){var t=this.querySelector("#update-province");t&&e.forEach((function(e){var n=document.createElement("option");n.value=e.id,n.textContent=e.name,t.appendChild(n)}))}},{key:"setupProvinceChangeListener",value:function(){var e=this.querySelector("#update-province");e&&(e.removeEventListener("change",this.handleProvinceChangeForUpdateForm),e.addEventListener("change",this.handleProvinceChangeForUpdateForm))}},{key:"handleProvinceChangeForUpdateForm",value:(a=pe(de().mark((function e(t){var n,r;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,r=this.querySelector("#update-city")){e.next=4;break}return e.abrupt("return");case 4:if(r.innerHTML='<option value="">Select City</option>',r.disabled=!0,!n){e.next=10;break}return e.next=9,this.fetchCitiesByProvinceId(n);case 9:r.disabled=!1;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchCitiesByProvinceId",value:(i=pe(de().mark((function e(t){var n,r,o;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.querySelector("#update-city")){e.next=3;break}return e.abrupt("return",[]);case 3:return n.disabled=!0,e.prev=4,e.next=7,fetch("https://kanglerian.my.id/api-wilayah-indonesia/api/regencies/".concat(t,".json"));case 7:if((r=e.sent).ok){e.next=15;break}if(404!==r.status){e.next=14;break}return console.warn("No cities found for province ID: ".concat(t)),this.populateCitiesDropdown([]),n.disabled=!0,e.abrupt("return",[]);case 14:throw new Error("HTTP error! status: ".concat(r.status));case 15:return e.next=17,r.json();case 17:return o=e.sent,this.populateCitiesDropdown(o),e.abrupt("return",o);case 22:return e.prev=22,e.t0=e.catch(4),console.error("Error fetching cities for province ".concat(t,":"),e.t0),this.populateCitiesDropdown([]),n.disabled=!0,e.abrupt("return",[]);case 28:case"end":return e.stop()}}),e,this,[[4,22]])}))),function(e){return i.apply(this,arguments)})},{key:"populateCitiesDropdown",value:function(e){var t=this.querySelector("#update-city");t&&(t.innerHTML='<option value="">Select City</option>',e.forEach((function(e){var n=document.createElement("option");n.value=e.id,n.textContent=e.name,t.appendChild(n)})))}},{key:"setWilayahDropdowns",value:(o=pe(de().mark((function e(){var t,n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.querySelector("#update-province"),n=this.querySelector("#update-city"),!(this.user&&t&&n)){e.next=13;break}if(!this.user.province_id){e.next=12;break}return t.value=this.user.province_id,e.next=7,this.fetchCitiesByProvinceId(this.user.province_id);case 7:e.sent,this.user.city_id&&n&&(n.value=this.user.city_id),n.disabled=!1,e.next=13;break;case 12:n.disabled=!0;case 13:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}],r&&fe(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a,s,c,l}(ge(HTMLElement));customElements.define("profile-page",we);var xe=n(465),ke=n.n(xe);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function Se(){Se=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new O(r||[]);return o(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(C([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=y.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==_e(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,n,r){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(_e(t)+" is not iterable")}return b.prototype=y,o(_,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:b,configurable:!0}),b.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new L(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Le(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Pe(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Te(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Pe(i,r,o,a,s,"next",e)}function s(e){Pe(i,r,o,a,s,"throw",e)}a(void 0)}))}}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Be(r.key),r)}}function Oe(e){var t="function"==typeof Map?new Map:void 0;return Oe=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(Ce())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&Ie(o,n.prototype),o}(e,arguments,Ae(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ie(n,e)},Oe(e)}function Ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ce=function(){return!!e})()}function Ie(e,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ie(e,t)}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function Re(e,t,n){return(t=Be(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e){var t=function(e){if("object"!=_e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_e(t)?t:t+""}var De=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Re(e=function(e,t,n){return t=Ae(t),function(e,t){if(t&&("object"==_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ce()?Reflect.construct(t,n||[],Ae(e).constructor):t.apply(e,n))}(this,t),"handleAddItem",function(){var t=Te(Se().mark((function t(n){var r,o,i,a,s,c,l,u,d,h,p,f,m,v,b;return Se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=n.target,o=new FormData(r),i=r.querySelector("#item-available-sell").checked,a=r.querySelector("#item-available-rent").checked,i||a){t.next=8;break}return ke().fire({icon:"warning",title:"Validasi Error",text:"Item harus tersedia untuk dijual atau disewa (minimal salah satu).",confirmButtonColor:"#3b82f6"}),t.abrupt("return");case 8:if(!i||r.querySelector("#item-price-sell").value){t.next=11;break}return ke().fire({icon:"warning",title:"Harga Jual Kosong",text:"Harga jual harus diisi jika item tersedia untuk dijual.",confirmButtonColor:"#3b82f6"}).then((function(){r.querySelector("#item-price-sell").focus()})),t.abrupt("return");case 11:if(!a||r.querySelector("#item-price-rent").value){t.next=14;break}return ke().fire({icon:"warning",title:"Harga Sewa Kosong",text:"Harga sewa harus diisi jika item tersedia untuk disewa.",confirmButtonColor:"#3b82f6"}).then((function(){r.querySelector("#item-price-rent").focus()})),t.abrupt("return");case 14:(s=e.querySelector("#item-category"))&&s.value||o.delete("category_id"),(c=r.querySelector("#item-price-sell"))&&c.value&&!c.disabled||o.delete("price_sell"),(l=r.querySelector("#item-price-rent"))&&l.value&&!l.disabled||o.delete("price_rent"),u=r.querySelector("#item-available-rent"),d=r.querySelector("#item-deposit"),u&&u.checked&&d&&d.value||o.delete("deposit_amount"),h=r.querySelector("#item-available-sell"),o.set("is_available_for_sell",h&&h.checked?"true":"false"),o.set("is_available_for_rent",u&&u.checked?"true":"false"),o.set("status","available"),console.log("Sending new item FormData:"),p=Le(o.entries());try{for(p.s();!(f=p.n()).done;)m=f.value,console.log(m[0]+": "+m[1])}catch(e){p.e(e)}finally{p.f()}return t.prev=30,t.next=33,g("POST","/items",o);case 33:if("success"!==(v=t.sent).status){t.next=53;break}return console.log("Item added successfully:",v.data.item),ke().fire({icon:"success",title:"Berhasil!",text:"Item berhasil ditambahkan!",confirmButtonColor:"#10b981"}),console.log("Triggering ML backend data refresh..."),t.prev=38,t.next=41,fetch("http://localhost:5001/api/refresh_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 41:return t.next=43,new Promise((function(e){return setTimeout(e,2e3)}));case 43:console.log("ML backend data refresh triggered."),t.next=49;break;case 46:t.prev=46,t.t0=t.catch(38),console.warn("Failed to trigger ML backend data refresh:",t.t0);case 49:e.showAddForm(),e.fetchUserItems(),t.next=57;break;case 53:console.error("Failed to add item (API error):",v.message,v.errors),b="Gagal menambahkan item: "+v.message,v.errors&&Array.isArray(v.errors)&&(b+="\nValidasi error:",v.errors.forEach((function(e){b+="\n- ".concat(e.param,": ").concat(e.msg)}))),ke().fire({icon:"error",title:"Gagal Menambahkan Item",text:b,confirmButtonColor:"#ef4444"});case 57:t.next=63;break;case 59:t.prev=59,t.t1=t.catch(30),console.error("Error adding item:",t.t1),ke().fire({icon:"error",title:"Terjadi Kesalahan",text:"Terjadi kesalahan saat menambahkan item. Silakan coba lagi.",confirmButtonColor:"#ef4444"});case 63:case"end":return t.stop()}}),t,null,[[30,59],[38,46]])})));return function(e){return t.apply(this,arguments)}}()),Re(e,"handleUpdateItem",function(){var t=Te(Se().mark((function t(n){var r,o,i,a,s,c,l,u,d,h,p,f,m,v;return Se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=n.target,o=new FormData(r),e.editingItemId){t.next=7;break}return console.error("No item ID set for editing."),ke().fire({icon:"error",title:"Error",text:"Terjadi kesalahan: ID item yang diedit tidak ditemukan.",confirmButtonColor:"#ef4444"}),t.abrupt("return");case 7:if(e.canEditOrDelete(e.editingItemData)){t.next=10;break}return ke().fire({icon:"warning",title:"Tidak Dapat Diedit",text:"Item ini tidak dapat diedit karena sudah sold atau rented.",confirmButtonColor:"#f59e0b"}),t.abrupt("return");case 10:if(i=r.querySelector("#edit-item-available-sell"),a=r.querySelector("#edit-item-available-rent"),s=r.querySelector("#edit-item-status"),(c=e.validateAvailability({status:s.value},i.checked,a.checked)).valid){t.next=17;break}return ke().fire({icon:"warning",title:"Validasi Error",text:c.message,confirmButtonColor:"#f59e0b"}),t.abrupt("return");case 17:if(i.checked||a.checked){t.next=20;break}return ke().fire({icon:"warning",title:"Validasi Error",text:"Item harus tersedia untuk dijual atau disewa (minimal salah satu).",confirmButtonColor:"#f59e0b"}),t.abrupt("return");case 20:if(!i.checked||r.querySelector("#edit-item-price-sell").value){t.next=23;break}return ke().fire({icon:"warning",title:"Harga Jual Kosong",text:"Harga jual harus diisi jika item tersedia untuk dijual.",confirmButtonColor:"#f59e0b"}).then((function(){r.querySelector("#edit-item-price-sell").focus()})),t.abrupt("return");case 23:if(!a.checked||r.querySelector("#edit-item-price-rent").value){t.next=26;break}return ke().fire({icon:"warning",title:"Harga Sewa Kosong",text:"Harga sewa harus diisi jika item tersedia untuk disewa.",confirmButtonColor:"#f59e0b"}).then((function(){r.querySelector("#edit-item-price-rent").focus()})),t.abrupt("return");case 26:o.delete("is_available_for_sell"),o.delete("is_available_for_rent"),o.append("is_available_for_sell",i.checked?"true":"false"),o.append("is_available_for_rent",a.checked?"true":"false"),l=r.querySelector("#edit-item-deposit"),a.checked&&l.value||o.delete("deposit_amount"),u=e.querySelector("#edit-item-price-sell"),d=e.querySelector("#edit-item-price-rent"),u.value&&!u.disabled||o.delete("price_sell"),d.value&&!d.disabled||o.delete("price_rent"),o.append("id",e.editingItemId),console.log("Sending updated item FormData:"),h=Le(o.entries());try{for(h.s();!(p=h.n()).done;)f=p.value,console.log(f[0]+": "+f[1])}catch(e){h.e(e)}finally{h.f()}return t.prev=40,t.next=43,g("PATCH","/items/".concat(e.editingItemId),o);case 43:if("success"!==(m=t.sent).status){t.next=63;break}return console.log("Item updated successfully:",m.data.item),ke().fire({icon:"success",title:"Berhasil!",text:"Item berhasil diupdate!",confirmButtonColor:"#10b981"}),console.log("Triggering ML backend data refresh..."),t.prev=48,t.next=51,fetch("http://localhost:5001/api/refresh_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 51:return t.next=53,new Promise((function(e){return setTimeout(e,2e3)}));case 53:console.log("ML backend data refresh triggered."),t.next=59;break;case 56:t.prev=56,t.t0=t.catch(48),console.warn("Failed to trigger ML backend data refresh:",t.t0);case 59:e.hideEditForm(),e.fetchUserItems(),t.next=67;break;case 63:console.error("Failed to update item (API error):",m.message,m.errors),v="Gagal mengupdate item: "+m.message,m.errors&&Array.isArray(m.errors)&&(v+="\nValidasi error:",m.errors.forEach((function(e){v+="\n- ".concat(e.param,": ").concat(e.msg)}))),ke().fire({icon:"error",title:"Gagal Mengupdate Item",text:v,confirmButtonColor:"#ef4444"});case 67:t.next=73;break;case 69:t.prev=69,t.t1=t.catch(40),console.error("Error updating item:",t.t1),ke().fire({icon:"error",title:"Terjadi Kesalahan",text:"Terjadi kesalahan saat mengupdate item. Silakan coba lagi.",confirmButtonColor:"#ef4444"});case 73:case"end":return t.stop()}}),t,null,[[40,69],[48,56]])})));return function(e){return t.apply(this,arguments)}}()),e.fetchUserItems=e.fetchUserItems.bind(e),e.renderUserItems=e.renderUserItems.bind(e),e.handleItemActions=e.handleItemActions.bind(e),e.handleEditItem=e.handleEditItem.bind(e),e.handleDeleteItem=e.handleDeleteItem.bind(e),e.handleUpdateItem=e.handleUpdateItem.bind(e),e.handlePaginationClick=e.handlePaginationClick.bind(e),e.editingItemId=null,e.editingItemData=null,e.user=null,e.pagination={total:0,page:1,limit:10,totalPages:1},e.items=[],e.isLoading=!1,e.error=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(t,e),n=t,r=[{key:"connectedCallback",value:function(){this.loadUserData(),this.render(),this.fetchUserItems()}},{key:"disconnectedCallback",value:function(){this.removeEventListeners()}},{key:"loadUserData",value:function(){var e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))}},{key:"handlePaginationClick",value:function(e){var t=e.target.closest("[data-page]");if(t){e.preventDefault(),e.stopPropagation();var n=Number.parseInt(t.dataset.page);n&&n!==this.pagination.page&&n>=1&&n<=this.pagination.totalPages&&(this.pagination.page=n,this.fetchUserItems())}}},{key:"getItemStatus",value:function(e){if(!e.status)return"available";switch(e.status.toLowerCase().trim()){case"available":case"tersedia":case"aktif":default:return"available";case"pending":case"menunggu":case"proses":return"pending";case"sold":case"terjual":case"dijual":return"sold";case"rented":case"disewa":case"tersewa":return"rented";case"completed":case"selesai":return"completed"}}},{key:"getStatusDisplay",value:function(e){switch(this.getItemStatus({status:e})){case"available":return{display:"Available",class:"text-green-600 bg-green-100 px-2 py-0.5 rounded-full text-xs font-semibold font-opensan"};case"pending":return{display:"Pending",class:"text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full text-xs font-semibold font-opensan"};case"sold":return{display:"Sold",class:"text-red-600 bg-red-100 px-2 py-0.5 rounded-full text-xs font-semibold font-opensan"};case"rented":return{display:"Rented",class:"text-yellow-600 bg-yellow-100 px-2 py-0.5 rounded-full text-xs font-semibold font-opensan"};case"completed":return{display:"Completed",class:"text-purple-600 bg-purple-100 px-2 py-0.5 rounded-full text-xs font-semibold font-opensan"};default:return{display:"Unknown",class:"text-gray-600 bg-gray-100 px-2 py-0.5 rounded-full text-xs font-semibold font-opensan"}}}},{key:"canEditOrDelete",value:function(e){var t=this.getItemStatus(e);return"available"===t||"pending"===t||"completed"===t}},{key:"canBeSold",value:function(e){return"rented"!==this.getItemStatus(e)}},{key:"validateAvailability",value:function(e,t,n){var r=this.getItemStatus(e);return"rented"===r&&t?{valid:!1,message:"Item yang sedang disewa tidak dapat dijual sampai statusnya menjadi completed."}:"sold"===r&&n?{valid:!1,message:"Item yang sudah terjual tidak dapat disewa."}:{valid:!0}}},{key:"renderPagination",value:function(){if(this.pagination.totalPages<=1)return"";var e=this.pagination.page,t=this.pagination.totalPages,n=(e-1)*this.pagination.limit+1,r=Math.min(e*this.pagination.limit,this.pagination.total),o=Math.max(1,e-2),i=Math.min(t,e+2);e<=3&&(i=Math.min(5,t)),e>=t-2&&(o=Math.max(1,t-4));for(var a=[],s=o;s<=i;s++)a.push(s);return'\n      <div class="flex flex-col sm:flex-row items-center justify-between gap-4 mt-8 px-4">\n        \x3c!-- Results info --\x3e\n        <div class="text-sm text-gray-700 font-opensan">\n          Menampilkan <span class="font-medium">'.concat(n,'</span> sampai <span class="font-medium">').concat(r,'</span> dari <span class="font-medium">').concat(this.pagination.total,'</span> item\n        </div>\n        \n        \x3c!-- Pagination controls --\x3e\n        <div class="flex items-center gap-2">\n          \x3c!-- Previous button --\x3e\n          <button \n            data-page="').concat(e-1,'" \n            class="pagination-btn ').concat(1===e?"pagination-btn-disabled":"pagination-btn-enabled",'"\n            ').concat(1===e?"disabled":"",'\n          >\n            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>\n            </svg>\n            <span class="hidden sm:inline">Previous</span>\n          </button>\n\n          \x3c!-- Page numbers --\x3e\n          <div class="flex items-center gap-1">\n            ').concat(o>1?'\n              <button data-page="1" class="pagination-number">1</button>\n              '.concat(o>2?'<span class="px-2 text-gray-500">...</span>':"","\n            "):"","\n            \n            ").concat(a.map((function(t){return'\n              <button \n                data-page="'.concat(t,'" \n                class="pagination-number ').concat(t===e?"pagination-number-active":"",'"\n              >\n                ').concat(t,"\n              </button>\n            ")})).join(""),"\n            \n            ").concat(i<t?"\n              ".concat(i<t-1?'<span class="px-2 text-gray-500">...</span>':"",'\n              <button data-page="').concat(t,'" class="pagination-number">').concat(t,"</button>\n            "):"",'\n          </div>\n\n          \x3c!-- Next button --\x3e\n          <button \n            data-page="').concat(e+1,'" \n            class="pagination-btn ').concat(e===t?"pagination-btn-disabled":"pagination-btn-enabled",'"\n            ').concat(e===t?"disabled":"",'\n          >\n            <span class="hidden sm:inline">Next</span>\n            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>\n            </svg>\n          </button>\n        </div>\n      </div>\n    ')}},{key:"render",value:function(){var e,t,n,r,o,i,a,s,c,l,u,d;this.innerHTML='\n            <style>\n                /* Pagination styles */\n                .pagination-btn {\n                    display: flex;\n                    align-items: center;\n                    gap: 0.5rem;\n                    padding: 0.5rem 0.75rem;\n                    border-radius: 0.5rem;\n                    font-size: 0.875rem;\n                    font-weight: 500;\n                    transition: all 0.2s;\n                }\n\n                .pagination-btn-enabled {\n                    background-color: white;\n                    border: 1px solid #d1d5db;\n                    color: #374151;\n                }\n\n                .pagination-btn-enabled:hover {\n                    background-color: #f9fafb;\n                    border-color: #9ca3af;\n                }\n\n                .pagination-btn-disabled {\n                    background-color: #f9fafb;\n                    border: 1px solid #e5e7eb;\n                    color: #9ca3af;\n                    cursor: not-allowed;\n                }\n\n                .pagination-number {\n                    min-width: 2.5rem;\n                    height: 2.5rem;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    border-radius: 0.5rem;\n                    font-size: 0.875rem;\n                    font-weight: 500;\n                    transition: all 0.2s;\n                    background-color: white;\n                    border: 1px solid #d1d5db;\n                    color: #374151;\n                }\n\n                .pagination-number:hover {\n                    background-color: #f3f4f6;\n                    border-color: #9ca3af;\n                }\n\n                .pagination-number-active {\n                    background-color: #3b82f6;\n                    border-color: #3b82f6;\n                    color: white;\n                }\n\n                .pagination-number-active:hover {\n                    background-color: #2563eb;\n                    border-color: #2563eb;\n                }\n            </style>\n            <div class="container mx-auto px-4 py-8 font-opensan">\n                <h2 class="text-2xl font-bold mb-4">Item Saya (Toko Saya)</h2>\n\n                <div id="add-item-section" class="mt-8 p-6 bg-white rounded-lg shadow-md">\n                    <h3 class="text-xl font-semibold mb-4">Tambah Item Baru</h3>\n                    <form id="add-item-form" class="space-y-4">\n                        <div>\n                            <label for="item-name" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Nama Item <span class="text-red-500">*</span></label>\n                            <input type="text" id="item-name" name="name" required class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">\n                        </div>\n                        \n                        <div>\n                            <label for="item-category" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Kategori</label>\n                            <select id="item-category" name="category_id" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">\n                                <option value="">Pilih Kategori</option>\n                                <option value="1">Masak</option>\n                                <option value="2">Fotografi</option>\n                                <option value="3">Membaca</option>\n                            </select>\n                        </div>\n                        \n                        <div>\n                            <label for="item-description" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Deskripsi</label>\n                            <textarea id="item-description" name="description" rows="3" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"></textarea>\n                        </div>\n\n                        <div class="flex items-center space-x-4 mb-4">\n                            <div class="flex items-center">\n                                <input id="item-available-sell" name="is_available_for_sell" type="checkbox" value="true" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded">\n                                <label for="item-available-sell" class="ml-2 block text-sm text-gray-900 font-opensan">Tersedia untuk Dijual</label>\n                            </div>\n                            <div class="flex items-center">\n                                <input id="item-available-rent" name="is_available_for_rent" type="checkbox" value="true" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded">\n                                <label for="item-available-rent" class="ml-2 block text-sm text-gray-900 font-opensan">Tersedia untuk Disewa</label>\n                            </div>\n                        </div>\n\n                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">\n                            <div>\n                                <label for="item-price-sell" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Harga Jual</label>\n                                <input type="number" id="item-price-sell" name="price_sell" step="0.01" disabled class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 disabled:opacity-50">\n                            </div>\n                            <div>\n                                <label for="item-price-rent" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Harga Sewa</label>\n                                <input type="number" id="item-price-rent" name="price_rent" step="0.01" disabled class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 disabled:opacity-50">\n                            </div>\n                        </div>\n\n                        <div id="deposit-field" class="hidden">\n                            <label for="item-deposit" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Jumlah Deposit</label>\n                            <input type="number" id="item-deposit" name="deposit_amount" step="0.01" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">\n                        </div>\n\n                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">\n                            <div>\n                                <label class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Provinsi</label>\n                                <input type="text" value="'.concat((null===(e=this.user)||void 0===e?void 0:e.province_name)||"Tidak diset",'" disabled class="bg-gray-100 border border-gray-300 text-gray-700 text-sm rounded-lg block w-full p-2.5 disabled:opacity-75">\n                                <input type="hidden" name="province_id" value="').concat((null===(t=this.user)||void 0===t?void 0:t.province_id)||"",'">\n                                <input type="hidden" name="province_name" value="').concat((null===(n=this.user)||void 0===n?void 0:n.province_name)||"",'">\n                            </div>\n                            <div>\n                                <label class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Kota/Kabupaten</label>\n                                <input type="text" value="').concat((null===(r=this.user)||void 0===r?void 0:r.city_name)||"Tidak diset",'" disabled class="bg-gray-100 border border-gray-300 text-gray-700 text-sm rounded-lg block w-full p-2.5 disabled:opacity-75">\n                                <input type="hidden" name="city_id" value="').concat((null===(o=this.user)||void 0===o?void 0:o.city_id)||"",'">\n                                <input type="hidden" name="city_name" value="').concat((null===(i=this.user)||void 0===i?void 0:i.city_name)||"",'">\n                            </div>\n                        </div>\n\n                        <div>\n                            <label class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold" for="item-photos">Foto Item (Multiple)</label>\n                            <input class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none" id="item-photos" name="photos" multiple accept="image/*" type="file">\n                        </div>\n\n                        \x3c!-- Hidden field untuk status default --\x3e\n                        <input type="hidden" name="status" value="available">\n\n                        <div>\n                            <button type="submit" class="flex w-full justify-center rounded-md bg-blue-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">\n                                Tambah Item\n                            </button>\n                        </div>\n                    </form>\n                </div>\n\n                <div id="edit-item-section" class="mt-8 p-6 bg-white rounded-lg shadow-md hidden"> \n                    <h3 class="text-xl font-semibold mb-4">Edit Item <span id="editing-item-name" class="font-normal italic text-gray-600"></span></h3>\n                    <form id="edit-item-form" class="space-y-4">\n                        <div>\n                            <label for="edit-item-name" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Nama Item <span class="text-red-500">*</span></label>\n                            <input type="text" id="edit-item-name" name="name" required class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">\n                        </div>\n                        \n                        <div>\n                            <label for="edit-item-category" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Kategori</label>\n                            <select id="edit-item-category" name="category_id" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">\n                                <option value="">Pilih Kategori</option>\n                                <option value="1">Masak</option>\n                                <option value="2">Fotografi</option>\n                                <option value="3">Membaca</option>\n                            </select>\n                        </div>\n                        \n                        <div>\n                            <label for="edit-item-description" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Deskripsi</label>\n                            <textarea id="edit-item-description" name="description" rows="3" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"></textarea>\n                        </div>\n\n                        \x3c!-- Status selector untuk edit --\x3e\n                        <div>\n                            <label for="edit-item-status" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Status Item</label>\n                            <select id="edit-item-status" name="status" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">\n                                <option value="available">Available</option>\n                                <option value="pending">Pending</option>\n                                <option value="sold">Sold</option>\n                                <option value="rented">Rented</option>\n                                <option value="completed">Completed</option>\n                            </select>\n                        </div>\n\n                        <div class="flex items-center space-x-4 mb-4">\n                            <div class="flex items-center">\n                                <input id="edit-item-available-sell" name="is_available_for_sell" type="checkbox" value="true" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded">\n                                <label for="edit-item-available-sell" class="ml-2 block text-sm text-gray-900 font-opensan">Tersedia untuk Dijual</label>\n                            </div>\n                            <div class="flex items-center">\n                                <input id="edit-item-available-rent" name="is_available_for_rent" type="checkbox" value="true" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded">\n                                <label for="edit-item-available-rent" class="ml-2 block text-sm text-gray-900 font-opensan">Tersedia untuk Disewa</label>\n                            </div>\n                        </div>\n\n                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">\n                            <div>\n                                <label for="edit-item-price-sell" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Harga Jual</label>\n                                <input type="number" id="edit-item-price-sell" name="price_sell" step="0.01" disabled class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 disabled:opacity-50">\n                            </div>\n                            <div>\n                                <label for="edit-item-price-rent" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Harga Sewa</label>\n                                <input type="number" id="edit-item-price-rent" name="price_rent" step="0.01" disabled class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 disabled:opacity-50">\n                            </div>\n                        </div>\n\n                        <div id="edit-deposit-field" class="hidden"> \n                            <label for="edit-item-deposit" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Jumlah Deposit</label>\n                            <input type="number" id="edit-item-deposit" name="deposit_amount" step="0.01" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">\n                        </div>\n\n                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">\n                            <div>\n                                <label class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Provinsi</label>\n                                <input type="text" value="').concat((null===(a=this.user)||void 0===a?void 0:a.province_name)||"Tidak diset",'" disabled class="bg-gray-100 border border-gray-300 text-gray-700 text-sm rounded-lg block w-full p-2.5 disabled:opacity-75">\n                                <input type="hidden" name="province_id" value="').concat((null===(s=this.user)||void 0===s?void 0:s.province_id)||"",'">\n                                <input type="hidden" name="province_name" value="').concat((null===(c=this.user)||void 0===c?void 0:c.province_name)||"",'">\n                            </div>\n                            <div>\n                                <label class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Kota/Kabupaten</label>\n                                <input type="text" value="').concat((null===(l=this.user)||void 0===l?void 0:l.city_name)||"Tidak diset",'" disabled class="bg-gray-100 border border-gray-300 text-gray-700 text-sm rounded-lg block w-full p-2.5 disabled:opacity-75">\n                                <input type="hidden" name="city_id" value="').concat((null===(u=this.user)||void 0===u?void 0:u.city_id)||"",'">\n                                <input type="hidden" name="city_name" value="').concat((null===(d=this.user)||void 0===d?void 0:d.city_name)||"",'">\n                            </div>\n                        </div>\n\n                        <div>\n                            <label for="edit-item-photos" class="block mb-2 text-sm font-medium text-gray-900 font-montserrat font-bold">Foto Item Baru (Multiple)</label>\n                            <input type="file" id="edit-item-photos" name="photos" multiple accept="image/*" class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none">\n                        </div>\n\n                        <div class="flex space-x-4">\n                            <button type="submit" class="flex-1 justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">\n                                Simpan Perubahan\n                            </button>\n                            <button type="button" id="cancel-edit-button" class="flex-1 justify-center rounded-md bg-gray-300 px-3 py-1.5 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-400">\n                                Batal\n                            </button>\n                        </div>\n                    </form>\n                </div>\n\n                <hr class="my-8">\n\n                <div class="mt-8">\n                    <h3 class="text-xl font-semibold mb-4">Daftar Item Anda</h3>\n                    <div id="user-items-list">\n                        ').concat(this.renderItemsList(),"\n                    </div>\n                    ").concat(this.renderPagination(),"\n                </div>\n            </div>\n        "),this.setupEventListeners()}},{key:"renderItemsList",value:function(){var e=this;return this.isLoading?'\n        <div class="flex justify-center items-center py-12">\n          <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>\n          <span class="ml-3 text-gray-600">Loading items...</span>\n        </div>\n      ':this.error?'\n        <div class="text-center py-12">\n          <div class="bg-red-50 border border-red-200 rounded-xl p-6 max-w-md mx-auto">\n            <svg class="w-12 h-12 text-red-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>\n            </svg>\n            <p class="text-red-600 font-semibold">Error: '.concat(this.error,"</p>\n          </div>\n        </div>\n      "):this.items&&0!==this.items.length?this.items.map((function(t){return e.renderSingleItem(t)})).join(""):'\n        <div class="text-center py-16">\n          <div class="bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-8 max-w-md mx-auto">\n            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m13-8l-4 4m0 0l-4-4m4 4V3"></path>\n            </svg>\n            <h3 class="mt-2 text-sm font-medium text-gray-900">Belum ada item</h3>\n            <p class="mt-1 text-sm text-gray-500">Mulai dengan menambahkan item pertama Anda.</p>\n          </div>\n        </div>\n      '}},{key:"renderSingleItem",value:function(e){var t=this.getStatusDisplay(e.status),n=this.canEditOrDelete(e),r=(this.canBeSold(e),""),o=this.getItemStatus(e);return"rented"===o?r='<span class="text-xs text-orange-600 bg-orange-100 px-2 py-0.5 rounded-full ml-2">🚫 Tidak dapat dijual saat disewa</span>':"completed"===o&&(r='<span class="text-xs text-green-600 bg-green-100 px-2 py-0.5 rounded-full ml-2">✅ Dapat dijual/disewa lagi</span>'),'\n      <div class="mb-6 p-6 bg-white rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300 '.concat(n?"":"opacity-75 border-gray-400",'">\n        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">\n          <div class="flex items-start gap-4 flex-1">\n            ').concat(e.thumbnail?'<img src="http://localhost:5000'.concat(e.thumbnail,'" alt="Thumbnail ').concat(e.name,'" class="w-20 h-20 object-cover rounded-lg border-2 border-gray-200 flex-shrink-0">'):'<div class="w-20 h-20 bg-gray-200 rounded-lg border-2 border-gray-300 flex items-center justify-center flex-shrink-0">\n                    <span class="text-gray-500 text-xs">No Image</span>\n                  </div>','\n            <div class="flex-1 min-w-0">\n              <div class="flex items-center gap-2 mb-2 flex-wrap">\n                <h4 class="text-lg font-montserrat font-bold text-gray-800 truncate">').concat(e.name,'</h4>\n                <span class="').concat(t.class,'">').concat(t.display,"</span>\n                ").concat(r,"\n                ").concat(n?"":'<span class="text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full">🔒 Tidak dapat diedit</span>','\n              </div>\n              <p class="text-sm text-gray-600 font-opensan mb-1 line-clamp-2">').concat(e.description||"Tidak ada deskripsi",'</p>\n              <div class="flex flex-wrap gap-4 text-sm text-gray-500 font-opensan">\n                <span><strong>Kategori:</strong> ').concat(function(e){switch(e){case 1:return"Masak";case 2:return"Fotografi";case 3:return"Membaca";default:return"Tidak dikategorikan"}}(e.category_id),"</span>\n                <span><strong>Lokasi:</strong> ").concat(e.city_name||"-",", ").concat(e.province_name||"-",'</span>\n              </div>\n            </div>\n          </div>\n          \n          <div class="flex flex-col lg:flex-row lg:items-center gap-4">\n            <div class="flex flex-col sm:flex-row gap-2 text-sm font-opensan">\n              ').concat(e.price_sell?'<div class="bg-green-50 border border-green-200 rounded-lg px-3 py-2">\n                      <span class="text-green-700 font-semibold">Jual: Rp '.concat(Number.parseFloat(e.price_sell).toLocaleString("id-ID"),"</span>\n                    </div>"):"","\n              ").concat(e.price_rent?'<div class="bg-blue-50 border border-blue-200 rounded-lg px-3 py-2">\n                      <span class="text-blue-700 font-semibold">Sewa: Rp '.concat(Number.parseFloat(e.price_rent).toLocaleString("id-ID"),"/hari</span>\n                    </div>"):"","\n              ").concat(e.is_available_for_rent&&e.deposit_amount?'<div class="bg-yellow-50 border border-yellow-200 rounded-lg px-3 py-2">\n                      <span class="text-yellow-700 font-semibold">Deposit: Rp '.concat(Number.parseFloat(e.deposit_amount).toLocaleString("id-ID"),"</span>\n                    </div>"):"",'\n            </div>\n            \n            <div class="flex gap-2">\n              <button class="edit-item-button ').concat(n?"bg-yellow-500 hover:bg-yellow-600":"bg-gray-400 cursor-not-allowed",' text-white text-sm px-4 py-2 rounded-lg font-semibold transition-colors duration-200 flex items-center gap-1" \n                      data-item-id="').concat(e.id,'" \n                      ').concat(n?"":'disabled title="Item tidak dapat diedit karena sudah sold/rented"','>\n                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>\n                </svg>\n                Edit\n              </button>\n              <button class="delete-item-button ').concat(n?"bg-red-500 hover:bg-red-600":"bg-gray-400 cursor-not-allowed",' text-white text-sm px-4 py-2 rounded-lg font-semibold transition-colors duration-200 flex items-center gap-1" \n                      data-item-id="').concat(e.id,'"\n                      ').concat(n?"":'disabled title="Item tidak dapat dihapus karena sudah sold/rented"','>\n                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>\n                </svg>\n                Hapus\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    ')}},{key:"setupEventListeners",value:function(){var e=this.querySelector("#add-item-form");e&&e.addEventListener("submit",this.handleAddItem),this.setupAvailabilityListeners("add");var t=this.querySelector("#user-items-list");t&&t.addEventListener("click",this.handleItemActions);var n=this.querySelector("#edit-item-form");n&&n.addEventListener("submit",this.handleUpdateItem),this.setupAvailabilityListeners("edit");var r=this.querySelector("#cancel-edit-button");r&&r.addEventListener("click",this.hideEditForm.bind(this)),this.addEventListener("click",this.handlePaginationClick)}},{key:"setupAvailabilityListeners",value:function(e){var t="add"===e?"item":"edit-item",n=this.querySelector("#".concat(t,"-available-sell")),r=this.querySelector("#".concat(t,"-available-rent")),o=this.querySelector("#".concat(t,"-price-sell")),i=this.querySelector("#".concat(t,"-price-rent")),a=this.querySelector("#".concat("add"===e?"deposit":"edit-deposit","-field")),s=this.querySelector("#".concat(t,"-deposit"));n&&o&&n.addEventListener("change",(function(e){o.disabled=!e.target.checked,e.target.checked?setTimeout((function(){return o.focus()}),100):o.value=""})),r&&i&&a&&s&&r.addEventListener("change",(function(e){i.disabled=!e.target.checked,e.target.checked?(a.classList.remove("hidden"),setTimeout((function(){return i.focus()}),100)):(a.classList.add("hidden"),i.value="",s.value="")}))}},{key:"removeEventListeners",value:function(){var e=this.querySelector("#add-item-form");e&&e.removeEventListener("submit",this.handleAddItem);var t=this.querySelector("#user-items-list");t&&t.removeEventListener("click",this.handleItemActions);var n=this.querySelector("#edit-item-form");n&&n.removeEventListener("submit",this.handleUpdateItem);var r=this.querySelector("#cancel-edit-button");r&&r.removeEventListener("click",this.hideEditForm.bind(this)),this.removeEventListener("click",this.handlePaginationClick)}},{key:"showAddForm",value:function(){this.querySelector("#add-item-section").classList.remove("hidden"),this.querySelector("#edit-item-section").classList.add("hidden");var e=this.querySelector("#add-item-form");e&&e.reset();var t=this.querySelector("#item-price-sell"),n=this.querySelector("#item-price-rent"),r=this.querySelector("#deposit-field");t&&(t.disabled=!0),n&&(n.disabled=!0),r&&r.classList.add("hidden"),this.editingItemId=null}},{key:"showEditForm",value:function(){this.querySelector("#add-item-section").classList.add("hidden"),this.querySelector("#edit-item-section").classList.remove("hidden")}},{key:"hideEditForm",value:function(){this.showAddForm()}},{key:"fetchUserItems",value:(s=Te(Se().mark((function e(){var t,n,r,o,i;return Se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoading=!0,this.error=null,this.render(),e.prev=3,t=localStorage.getItem("user")){e.next=11;break}return console.error("User not found in localStorage. Cannot fetch items."),this.items=[],this.isLoading=!1,this.render(),e.abrupt("return");case 11:return n=JSON.parse(t).id,r={user_id:n,limit:this.pagination.limit,page:this.pagination.page},o=Object.keys(r).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(r[e]))})).join("&"),e.next=16,m("/items?".concat(o));case 16:"success"===(i=e.sent).status?(this.items=Array.isArray(i.data)?i.data:[],i.pagination&&(this.pagination={total:i.pagination.total||0,page:i.pagination.page||1,limit:i.pagination.limit||10,totalPages:i.pagination.totalPages||1}),console.log("User Items:",this.items),console.log("Pagination:",this.pagination),this.isLoading=!1,this.error=null):(console.error("Failed to fetch user items:",i.message),this.items=[],this.error=i.message||"Gagal memuat item.",this.isLoading=!1),e.next=26;break;case 20:e.prev=20,e.t0=e.catch(3),console.error("Error fetching user items:",e.t0),this.items=[],this.error=e.t0.message||"Terjadi kesalahan saat memuat item.",this.isLoading=!1;case 26:return e.prev=26,this.render(),e.finish(26);case 29:case"end":return e.stop()}}),e,this,[[3,20,26,29]])}))),function(){return s.apply(this,arguments)})},{key:"renderUserItems",value:function(e){console.warn("renderUserItems is deprecated, use renderItemsList instead")}},{key:"handleItemActions",value:function(e){var t=e.target.closest("button");if(t&&!t.disabled){if(t.classList.contains("edit-item-button")){var n=t.dataset.itemId;n&&this.handleEditItem(n)}if(t.classList.contains("delete-item-button")){var r=t.dataset.itemId;r&&this.handleDeleteItem(r)}}}},{key:"handleEditItem",value:(a=Te(Se().mark((function e(t){var n;return Se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Attempting to edit item with ID:",t),this.editingItemId=t,e.prev=2,e.next=5,m("/items/".concat(t));case 5:if("success"!==(n=e.sent).status){e.next=20;break}if(this.editingItemData=n.data,console.log("Fetched item details for editing:",this.editingItemData),this.canEditOrDelete(this.editingItemData)){e.next=14;break}return ke().fire({icon:"warning",title:"Tidak Dapat Diedit",text:"Item ini tidak dapat diedit karena sudah sold atau rented.",confirmButtonColor:"#f59e0b"}),this.editingItemId=null,this.editingItemData=null,e.abrupt("return");case 14:return e.next=16,ke().fire({title:"Edit Item",text:'Apakah Anda yakin ingin mengedit item "'.concat(this.editingItemData.name,'"?'),icon:"question",showCancelButton:!0,confirmButtonColor:"#3b82f6",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, Edit",cancelButtonText:"Batal"});case 16:e.sent.isConfirmed?(this.showEditForm(),this.populateEditForm(this.editingItemData)):(this.editingItemId=null,this.editingItemData=null),e.next=24;break;case 20:console.error("Failed to fetch item details for editing:",n.message),ke().fire({icon:"error",title:"Gagal Mengambil Data",text:"Gagal mengambil detail item untuk diedit: "+n.message,confirmButtonColor:"#ef4444"}),this.editingItemId=null,this.editingItemData=null;case 24:e.next=32;break;case 26:e.prev=26,e.t0=e.catch(2),console.error("Error fetching item details for editing:",e.t0),ke().fire({icon:"error",title:"Terjadi Kesalahan",text:"Terjadi kesalahan saat mengambil detail item.",confirmButtonColor:"#ef4444"}),this.editingItemId=null,this.editingItemData=null;case 32:case"end":return e.stop()}}),e,this,[[2,26]])}))),function(e){return a.apply(this,arguments)})},{key:"populateEditForm",value:(i=Te(Se().mark((function e(t){var n,r,o,i,a,s,c,l,u,d;return Se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this.querySelector("#edit-item-form"))&&t){e.next=3;break}return e.abrupt("return");case 3:n.querySelector("#edit-item-name").value=t.name||"",(r=this.querySelector("#editing-item-name"))&&(r.textContent=t.name||""),n.querySelector("#edit-item-category").value=t.category_id||"",n.querySelector("#edit-item-description").value=t.description||"",n.querySelector("#edit-item-price-sell").value=t.price_sell||"",n.querySelector("#edit-item-price-rent").value=t.price_rent||"",(o=n.querySelector("#edit-item-status"))&&(i=this.getItemStatus(t),o.value=i),a=n.querySelector("#edit-item-available-sell"),s=n.querySelector("#edit-item-available-rent"),c=this.querySelector("#edit-item-price-sell"),l=this.querySelector("#edit-item-price-rent"),a.checked=1===t.is_available_for_sell||!0===t.is_available_for_sell,s.checked=1===t.is_available_for_rent||!0===t.is_available_for_rent,c.disabled=!a.checked,l.disabled=!s.checked,u=this.querySelector("#edit-deposit-field"),d=n.querySelector("#edit-item-deposit"),1===t.is_available_for_rent||!0===t.is_available_for_rent?(u&&u.classList.remove("hidden"),d&&(d.value=t.deposit_amount||"")):(u&&u.classList.add("hidden"),d&&(d.value="")),o&&o.addEventListener("change",(function(e){"rented"===e.target.value?(a.disabled=!0,a.checked=!1,c.disabled=!0,c.value=""):a.disabled=!1}));case 24:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"handleDeleteItem",value:(o=Te(Se().mark((function e(t){var n;return Se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Attempting to delete item with ID:",t),e.prev=1,e.next=4,ke().fire({title:"Hapus Item",text:"Apakah Anda yakin ingin menghapus item ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal"});case 4:if(!e.sent.isConfirmed){e.next=29;break}return e.next=8,r="/items/".concat(t),f(r,"DELETE");case 8:if("success"!==(n=e.sent).status){e.next=27;break}return console.log("Item deleted successfully."),ke().fire({icon:"success",title:"Berhasil!",text:"Item berhasil dihapus!",confirmButtonColor:"#10b981"}),console.log("Triggering ML backend data refresh..."),e.prev=13,e.next=16,fetch("http://localhost:5001/api/refresh_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 16:return e.next=18,new Promise((function(e){return setTimeout(e,2e3)}));case 18:console.log("ML backend data refresh triggered."),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(13),console.warn("Failed to trigger ML backend data refresh:",e.t0);case 24:this.fetchUserItems(),e.next=29;break;case 27:console.error("Failed to delete item:",n.message),ke().fire({icon:"error",title:"Gagal Menghapus Item",text:"Gagal menghapus item: "+n.message,confirmButtonColor:"#ef4444"});case 29:e.next=35;break;case 31:e.prev=31,e.t1=e.catch(1),console.error("Error deleting item:",e.t1),ke().fire({icon:"error",title:"Terjadi Kesalahan",text:"Terjadi kesalahan saat menghapus item. Silakan coba lagi.",confirmButtonColor:"#ef4444"});case 35:case"end":return e.stop()}var r}),e,this,[[1,31],[13,21]])}))),function(e){return o.apply(this,arguments)})}],r&&je(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a,s}(Oe(HTMLElement));function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function qe(){qe=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new O(r||[]);return o(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(C([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=y.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Me(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,n,r){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Me(t)+" is not iterable")}return b.prototype=y,o(_,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:b,configurable:!0}),b.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new L(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Ne(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fe(r.key),r)}}function Fe(e){var t=function(e){if("object"!=Me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Me(t)?t:t+""}function Ue(e){var t="function"==typeof Map?new Map:void 0;return Ue=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if($e())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&Ge(o,n.prototype),o}(e,arguments,ze(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ge(n,e)},Ue(e)}function $e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($e=function(){return!!e})()}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}function ze(e){return ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ze(e)}customElements.define("my-items-page",De);var Ve=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t,n){return t=ze(t),function(e,t){if(t&&("object"==Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$e()?Reflect.construct(t,n||[],ze(e).constructor):t.apply(e,n))}(this,t)).transactions=[],e.transactionType=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(t,e),n=t,r=[{key:"_emptyContent",value:function(){this.innerHTML=""}},{key:"connectedCallback",value:function(){if(!W.isAuthenticated())return alert("Anda harus login untuk melihat halaman ini."),void W.redirectToLogin();this._emptyContent(),this.transactionType=this.getTransactionTypeFromUrl(),console.log("Fetching transactions of type:",this.transactionType),this.renderLayout(),this.fetchTransactions(this.transactionType)}},{key:"disconnectedCallback",value:function(){}},{key:"getTransactionTypeFromUrl",value:function(){var e=window.location.hash;return e.includes("/my-rentals")?"rent":e.includes("/my-transactions")?"buy":null}},{key:"renderLayout",value:function(){var e="rent"===this.transactionType?"Pinjaman Saya":"Transaksi Pembelian Saya";this.innerHTML='\n            <div class="container mx-auto px-4 py-8">\n                <h1 class="text-2xl font-bold mb-6">'.concat(e,'</h1>\n\n                \x3c!-- Transaction List Area --\x3e\n                <div id="transactions-list">\n                    <p>Memuat transaksi...</p>\n                </div>\n\n                \x3c!-- TODO: Add Pagination here if needed --\x3e\n            </div>\n        ')}},{key:"renderTransactions",value:function(){var e=this.querySelector("#transactions-list");e?(e.innerHTML="",0!==this.transactions.length?e.innerHTML='\n             <div class="space-y-4">\n                '.concat(this.transactions.map((function(e){return'\n                    \x3c!-- Card Container for each transaction item --\x3e\n                    \x3c!-- Added modern card styling: bg-white, p-6, rounded-lg, shadow-md, text-gray-800 for default text --\x3e\n                    <div class="p-6 bg-white rounded-lg shadow-md text-gray-800">\n                        \x3c!-- Flex container for content and actions --\x3e\n                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center flex-wrap">\n                            \x3c!-- Transaction Details Area --\x3e\n                            <div class="flex-1 min-w-0 mr-0 md:mr-4 mb-4 md:mb-0">\n                                \x3c!-- Item Name: Font Montserrat Bold --\x3e\n                                <h3 class="text-lg font-montserrat font-bold mb-2">'.concat(e.item_name||"Nama Item Tidak Diketahui",'</h3>\n                                \x3c!-- Transaction Details: Font Open Sans --\x3e\n                                <p class="text-sm text-gray-700 font-opensan">Tipe: <span class="capitalize">').concat(e.type,'</span></p>\n                                <p class="text-sm text-gray-700 font-opensan">Status: <span class="capitalize">').concat(e.status,'</span></p>\n                                <p class="text-sm font-semibold text-gray-800 font-opensan">Total Harga: Rp ').concat(e.total_price?parseFloat(e.total_price).toLocaleString("id-ID"):"N/A","</p>\n                                ").concat("rent"===e.type?'\n                                    <p class="text-sm text-gray-700 font-opensan">Tanggal Sewa: '.concat(e.rent_start_date?new Date(e.rent_start_date).toLocaleDateString("id-ID"):"-"," - ").concat(e.rent_end_date?new Date(e.rent_end_date).toLocaleDateString("id-ID"):"-",'</p>\n                                    <p class="text-sm text-gray-700 font-opensan">Deposit Dibayar: Rp ').concat(e.deposit_paid?parseFloat(e.deposit_paid).toLocaleString("id-ID"):"0","</p>\n                                "):"",'\n                                <p class="text-sm text-gray-700 font-opensan">Tanggal Transaksi: ').concat(e.created_at?new Date(e.created_at).toLocaleDateString("id-ID"):"-",'</p>\n                                \x3c!-- Add more details as needed --\x3e\n                            </div>\n                            \x3c!-- Action Buttons Area --\x3e\n                            <div class="flex flex-wrap gap-2">\n                                \x3c!-- Detail Button: Styled like primary button --\x3e\n                               <a href="/#/transactions/').concat(e.id,'" class="bg-blue-600 hover:bg-blue-700 text-white text-sm px-4 py-2 rounded-md font-semibold inline-block text-center font-opensan">Detail</a>\n\n                               ').concat("completed"===e.status?'\n                                    \x3c!-- Review Button: Styled like secondary/success button --\x3e\n                                     <a href="/#/items/'.concat(e.item_id,'#review" class="bg-green-600 hover:bg-green-700 text-white text-sm px-4 py-2 rounded-md font-semibold inline-block text-center font-opensan">\n                                         Beri Review\n                                     </a>\n                                 '):"","\n                            </div>\n                        </div>\n                    </div>\n                ")})).join(""),"\n             </div>\n        "):e.innerHTML='<p class="text-gray-700 font-opensan">Anda belum memiliki '.concat("rent"===this.transactionType?"pinjaman":"transaksi pembelian"," apapun.</p>")):console.error("Transactions list element not found!")}},{key:"fetchTransactions",value:(o=qe().mark((function e(t){var n,r,o,i,a;return qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t?"?type=".concat(t):"",console.log("Fetching transactions from /transactions".concat(n)),e.next=5,f("/transactions".concat(n));case 5:"success"===(r=e.sent).status&&r.data?(console.log("Fetched transactions:",r.data),this.transactions=Array.isArray(r.data)?r.data:[],this.renderTransactions()):(console.error("Error fetching transactions:",r.message||"Unknown error",r),(o=this.querySelector("#transactions-list"))&&(o.innerHTML='<p class="text-red-500">Gagal memuat daftar transaksi: '.concat(r.message||"Terjadi kesalahan","</p>"))),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error during API request:",e.t0),(i=this.querySelector("#transactions-list"))&&(a=e.t0.message||"Terjadi kesalahan tidak diketahui",i.innerHTML='<p class="text-red-500">Terjadi kesalahan saat memuat transaksi: '.concat(a,"</p>"));case 14:case"end":return e.stop()}}),e,this,[[0,9]])})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){Ne(i,n,r,a,s,"next",e)}function s(e){Ne(i,n,r,a,s,"throw",e)}a(void 0)}))},function(e){return i.apply(this,arguments)})}],r&&He(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i}(Ue(HTMLElement));customElements.define("my-transactions-page",Ve);const Ke=Object.create(null);Ke.open="0",Ke.close="1",Ke.ping="2",Ke.pong="3",Ke.message="4",Ke.upgrade="5",Ke.noop="6";const Ye=Object.create(null);Object.keys(Ke).forEach((e=>{Ye[Ke[e]]=e}));const We={type:"error",data:"parser error"},Je="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Xe="function"==typeof ArrayBuffer,Ze=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Qe=({type:e,data:t},n,r)=>Je&&t instanceof Blob?n?r(t):et(t,r):Xe&&(t instanceof ArrayBuffer||Ze(t))?n?r(t):et(new Blob([t]),r):r(Ke[e]+(t||"")),et=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function tt(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let nt;const rt="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)rt["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;const ot="function"==typeof ArrayBuffer,it=(e,t)=>{if("string"!=typeof e)return{type:"message",data:st(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:at(e.substring(1),t)}:Ye[n]?e.length>1?{type:Ye[n],data:e.substring(1)}:{type:Ye[n]}:We},at=(e,t)=>{if(ot){const n=(e=>{let t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);const l=new ArrayBuffer(a),u=new Uint8Array(l);for(t=0;t<s;t+=4)n=rt[e.charCodeAt(t)],r=rt[e.charCodeAt(t+1)],o=rt[e.charCodeAt(t+2)],i=rt[e.charCodeAt(t+3)],u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&i;return l})(e);return st(n,t)}return{base64:!0,data:e}},st=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,ct=String.fromCharCode(30);let lt;function ut(e){return e.reduce(((e,t)=>e+t.length),0)}function dt(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let o=0;o<t;o++)n[o]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function ht(e){if(e)return function(e){for(var t in ht.prototype)e[t]=ht.prototype[t];return e}(e)}ht.prototype.on=ht.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},ht.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},ht.prototype.off=ht.prototype.removeListener=ht.prototype.removeAllListeners=ht.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},ht.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this},ht.prototype.emitReserved=ht.prototype.emit,ht.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},ht.prototype.hasListeners=function(e){return!!this.listeners(e).length};const pt="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ft="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function mt(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const gt=ft.setTimeout,vt=ft.clearTimeout;function bt(e,t){t.useNativeTimers?(e.setTimeoutFn=gt.bind(ft),e.clearTimeoutFn=vt.bind(ft)):(e.setTimeoutFn=ft.setTimeout.bind(ft),e.clearTimeoutFn=ft.clearTimeout.bind(ft))}function yt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class wt extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class xt extends ht{constructor(e){super(),this.writable=!1,bt(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new wt(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=it(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class kt extends xt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(ct),r=[];for(let e=0;e<n.length;e++){const o=it(n[e],t);if(r.push(o),"error"===o.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let o=0;e.forEach(((e,i)=>{Qe(e,!1,(e=>{r[i]=e,++o===n&&t(r.join(ct))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=yt()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let _t=!1;try{_t="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const St=_t;function Lt(){}class Et extends kt{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class Pt extends ht{constructor(e,t,n){super(),this.createRequest=e,bt(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=mt(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"==typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(e){return void this.setTimeoutFn((()=>{this._onError(e)}),0)}"undefined"!=typeof document&&(this._index=Pt.requestsCount++,Pt.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Lt,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Pt.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function Tt(){for(let e in Pt.requests)Pt.requests.hasOwnProperty(e)&&Pt.requests[e].abort()}Pt.requestsCount=0,Pt.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",Tt):"function"==typeof addEventListener&&addEventListener("onpagehide"in ft?"pagehide":"unload",Tt,!1));const jt=function(){const e=Ot({xdomain:!1});return e&&null!==e.responseType}();function Ot(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||St))return new XMLHttpRequest}catch(e){}if(!t)try{return new(ft[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}const Ct="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class It extends xt{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Ct?{}:mt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;Qe(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(e){}r&&pt((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=yt()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const At=ft.WebSocket||ft.MozWebSocket,Rt={websocket:class extends It{createSocket(e,t,n){return Ct?new At(e,t,n):t?new At(e,t):new At(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends xt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){lt||(lt=new TextDecoder);const n=[];let r=0,o=-1,i=!1;return new TransformStream({transform(a,s){for(n.push(a);;){if(0===r){if(ut(n)<1)break;const e=dt(n,1);i=!(128&~e[0]),o=127&e[0],r=o<126?3:126===o?1:2}else if(1===r){if(ut(n)<2)break;const e=dt(n,2);o=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(ut(n)<8)break;const e=dt(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),i=t.getUint32(0);if(i>Math.pow(2,21)-1){s.enqueue(We);break}o=i*Math.pow(2,32)+t.getUint32(4),r=3}else{if(ut(n)<o)break;const e=dt(n,o);s.enqueue(it(i?e:lt.decode(e),t)),r=0}if(0===o||o>e){s.enqueue(We);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=new TransformStream({transform(e,t){!function(e,t){Je&&e.data instanceof Blob?e.data.arrayBuffer().then(tt).then(t):Xe&&(e.data instanceof ArrayBuffer||Ze(e.data))?t(tt(e.data)):Qe(e,!1,(e=>{nt||(nt=new TextEncoder),t(nt.encode(e))}))}(e,(n=>{const r=n.length;let o;if(r<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const e=new DataView(o.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{o=new Uint8Array(9);const e=new DataView(o.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!=typeof e.data&&(o[0]|=128),t.enqueue(o),t.enqueue(n)}))}});r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const o=()=>{n.read().then((({done:e,value:t})=>{e||(this.onPacket(t),o())})).catch((e=>{}))};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then((()=>{r&&pt((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends Et{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=jt&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Pt(Ot,this.uri(),e)}}},Bt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Dt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Mt(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let o=Bt.exec(e||""),i={},a=14;for(;a--;)i[Dt[a]]=o[a]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){const n=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1),"/"==t.slice(-1)&&n.splice(n.length-1,1),n}(0,i.path),i.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,i.query),i}const qt="function"==typeof addEventListener&&"function"==typeof removeEventListener,Nt=[];qt&&addEventListener("offline",(()=>{Nt.forEach((e=>e()))}),!1);class Ht extends ht{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=Mt(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Mt(t.host).host);bt(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(this.opts.query)),qt&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Nt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&Ht.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",Ht.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"==typeof(t=r)?function(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,pt((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:e,data:t,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(Ht.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),qt&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Nt.indexOf(this._offlineEventListener);-1!==e&&Nt.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Ht.protocol=4;class Ft extends Ht{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;Ht.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ht.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function o(){n||(n=!0,l(),t.close(),t=null)}const i=e=>{const n=new Error("probe error: "+e);n.transport=t.name,o(),this.emitReserved("upgradeError",n)};function a(){i("transport closed")}function s(){i("socket closed")}function c(e){t&&e.name!==t.name&&o()}const l=()=>{t.removeListener("open",r),t.removeListener("error",i),t.removeListener("close",a),this.off("close",s),this.off("upgrading",c)};t.once("open",r),t.once("error",i),t.once("close",a),this.once("close",s),this.once("upgrading",c),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class Ut extends Ft{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map((e=>Rt[e])).filter((e=>!!e))),super(e,n)}}const $t="function"==typeof ArrayBuffer,Gt=Object.prototype.toString,zt="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Gt.call(Blob),Vt="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Gt.call(File);function Kt(e){return $t&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||zt&&e instanceof Blob||Vt&&e instanceof File}function Yt(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Yt(e[t]))return!0;return!1}if(Kt(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Yt(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&Yt(e[t]))return!0;return!1}function Wt(e){const t=[],n=e.data,r=e;return r.data=Jt(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Jt(e,t){if(!e)return e;if(Kt(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Jt(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Jt(e[r],t));return n}return e}function Xt(e,t){return e.data=Zt(e.data,t),delete e.attachments,e}function Zt(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Zt(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Zt(e[n],t));return e}const Qt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],en=5;var tn;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(tn||(tn={}));class nn{constructor(e){this.replacer=e}encode(e){return e.type!==tn.EVENT&&e.type!==tn.ACK||!Yt(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===tn.EVENT?tn.BINARY_EVENT:tn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==tn.BINARY_EVENT&&e.type!==tn.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Wt(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function rn(e){return"[object Object]"===Object.prototype.toString.call(e)}class on extends ht{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===tn.BINARY_EVENT;n||t.type===tn.BINARY_ACK?(t.type=n?tn.EVENT:tn.ACK,this.reconstructor=new an(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Kt(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===tn[n.type])throw new Error("unknown packet type "+n.type);if(n.type===tn.BINARY_EVENT||n.type===tn.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const o=e.substring(r,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!on.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case tn.CONNECT:return rn(t);case tn.DISCONNECT:return void 0===t;case tn.CONNECT_ERROR:return"string"==typeof t||rn(t);case tn.EVENT:case tn.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Qt.indexOf(t[0]));case tn.ACK:case tn.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class an{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Xt(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function sn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const cn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ln extends ht{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[sn(e,"open",this.onopen.bind(this)),sn(e,"packet",this.onpacket.bind(this)),sn(e,"error",this.onerror.bind(this)),sn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,o;if(cn.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const i={type:tn.EVENT,data:t,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),i.id=e}const a=null===(r=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===r?void 0:r.writable,s=this.connected&&!(null===(o=this.io.engine)||void 0===o?void 0:o._hasPingExpired());return this.flags.volatile&&!a||(s?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r),i=(...e)=>{this.io.clearTimeoutFn(o),t.apply(this,e)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...t){return new Promise(((n,r)=>{const o=(e,t)=>e?r(e):n(t);o.withError=!0,t.push(o),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...r)=>{if(n===this._queue[0])return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:tn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case tn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case tn.EVENT:case tn.BINARY_EVENT:this.onevent(e);break;case tn.ACK:case tn.BINARY_ACK:this.onack(e);break;case tn.DISCONNECT:this.ondisconnect();break;case tn.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:tn.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:tn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function un(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}un.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},un.prototype.reset=function(){this.attempts=0},un.prototype.setMin=function(e){this.ms=e},un.prototype.setMax=function(e){this.max=e},un.prototype.setJitter=function(e){this.jitter=e};class dn extends ht{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,bt(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=n.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new un({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=t;const o=n.parser||e;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ut(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=sn(t,"open",(function(){n.onopen(),e&&e()})),o=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},i=sn(t,"error",o);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),o(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(sn(e,"ping",this.onping.bind(this)),sn(e,"data",this.ondata.bind(this)),sn(e,"error",this.onerror.bind(this)),sn(e,"close",this.onclose.bind(this)),sn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){pt((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new ln(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const hn={};function pn(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=Mt(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,o=n.id,i=n.path,a=hn[o]&&i in hn[o].nsps;let s;return t.forceNew||t["force new connection"]||!1===t.multiplex||a?s=new dn(r,t):(hn[o]||(hn[o]=new dn(r,t)),s=hn[o]),n.query&&!t.query&&(t.query=n.queryKey),s.socket(n.path,t)}function fn(){fn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new O(r||[]);return o(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(C([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=y.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==vn(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,n,r){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(vn(t)+" is not iterable")}return b.prototype=y,o(_,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:b,configurable:!0}),b.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new L(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function mn(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function gn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){mn(i,r,o,a,s,"next",e)}function s(e){mn(i,r,o,a,s,"throw",e)}a(void 0)}))}}function vn(e){return vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(e)}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_n(r.key),r)}}function yn(e){var t="function"==typeof Map?new Map:void 0;return yn=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(wn())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&xn(o,n.prototype),o}(e,arguments,kn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),xn(n,e)},yn(e)}function wn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wn=function(){return!!e})()}function xn(e,t){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xn(e,t)}function kn(e){return kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kn(e)}function _n(e){var t=function(e){if("object"!=vn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=vn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vn(t)?t:t+""}Object.assign(pn,{Manager:dn,Socket:ln,io:pn,connect:pn});var Sn=function(e){function t(){var e,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=function(e,t,n){return t=kn(t),function(e,t){if(t&&("object"==vn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wn()?Reflect.construct(t,n||[],kn(e).constructor):t.apply(e,n))}(this,t),n=e,o=function(e){if(null==e)return"-";var t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)},(r=_n(r="formatRupiah"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,e.transactionId=null,e.transactionDetails=null,e.isLoading=!0,e.error=null,e._messages=[],e._messagesLoading=!1,e._messagesError=null,e._socket=null,e._isSocketConnected=!1,e.fetchTransactionDetails=e.fetchTransactionDetails.bind(e),e.handleStatusUpdate=e.handleStatusUpdate.bind(e),e.fetchMessages=e.fetchMessages.bind(e),e._handleSendMessageSocket=e._handleSendMessageSocket.bind(e),e._connectSocket=e._connectSocket.bind(e),e._disconnectSocket=e._disconnectSocket.bind(e),e._handleNewMessage=e._handleNewMessage.bind(e),e._handleSocketError=e._handleSocketError.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xn(e,t)}(t,e),n=t,r=[{key:"_emptyContent",value:function(){this.innerHTML=""}},{key:"connectedCallback",value:function(){console.log("Detail Transaction Component Connected"),this.render()}},{key:"disconnectedCallback",value:function(){console.log("Detail Transaction Component Disconnected"),this.removeEventListeners(),this._disconnectSocket(),this.transactionId=null,this.transactionDetails=null,this.isLoading=!0,this.error=null,this._messages=[],this._messagesLoading=!1,this._messagesError=null,this._isSocketConnected=!1}},{key:"attributeChangedCallback",value:function(e,t,n){console.log("Attribute '".concat(e,"' changed from '").concat(t,"' to '").concat(n,"' (type: ").concat(vn(n),")"));var r=n&&"string"==typeof n&&"undefined"!==n?n:null;if(r!==this.transactionId)if(this.transactionId=r,this.transactionDetails=null,this.isLoading=!0,this.error=null,this._messages=[],this._messagesLoading=!1,this._messagesError=null,this._disconnectSocket(),this.transactionId){if(console.log("Detail Transaction ID (updated and valid):",this.transactionId),!W.isAuthenticated())return alert("Anda harus login untuk melihat detail transaksi."),W.redirectToLogin(),this.error="Anda harus login untuk melihat detail ini.",this.isLoading=!1,void this.render();this.render(),this.fetchTransactionDetails(this.transactionId),this._connectSocket(this.transactionId)}else console.warn("Attribute '".concat(e,"' became invalid or removed. Resetting state.")),this.error="ID Transaksi tidak ditemukan atau tidak valid.",this.isLoading=!1,this.render();else console.log("Attribute '".concat(e,"' value is unchanged or remains invalid.")),!this.transactionId&&n&&(console.warn("Attribute '".concat(e,"' remains invalid, but was set. Re-rendering with error.")),this.transactionDetails=null,this.error="ID Transaksi tidak ditemukan atau tidak valid.",this.isLoading=!1,this.render())}},{key:"fetchTransactionDetails",value:(s=gn(fn().mark((function e(t){var n;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return console.error("fetchTransactionDetails called without a valid transactionId."),this.error="ID Transaksi tidak ditemukan.",this.isLoading=!1,this.render(),e.abrupt("return");case 6:return this.isLoading=!0,this.error=null,this.transactionDetails=null,e.prev=9,console.log("Fetching transaction details for ID: ".concat(t)),e.next=13,f("/transactions/".concat(t),"GET");case 13:"success"===(n=e.sent).status&&n.data?(console.log("Fetched transaction details successfully:",n.data),this.transactionDetails=n.data,this.error=null,this.fetchMessages(t),this._connectSocket(t)):(console.error("Error fetching transaction details:",n.message||"Unknown error",n),this.transactionDetails=null,this.error=n.message||"Gagal memuat detail transaksi.",this.isLoading=!1,this._disconnectSocket(),this.render()),e.next=25;break;case 17:e.prev=17,e.t0=e.catch(9),console.error("Error during API request for transaction details:",e.t0),this.transactionDetails=null,this.error="Terjadi kesalahan saat memuat detail transaksi.",this.isLoading=!1,this._disconnectSocket(),this.render();case 25:case"end":return e.stop()}}),e,this,[[9,17]])}))),function(e){return s.apply(this,arguments)})},{key:"fetchMessages",value:(a=gn(fn().mark((function e(t){var n;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return console.error("fetchMessages called without a valid transactionId."),this._messagesError="ID Transaksi tidak ditemukan untuk memuat pesan.",this._messagesLoading=!1,this.render(),e.abrupt("return");case 6:return this._messagesLoading=!0,this._messagesError=null,this._messages=[],e.prev=9,console.log("Fetching messages for transaction ID: ".concat(t)),e.next=13,f("/messages/transaction/".concat(t),"GET");case 13:"success"===(n=e.sent).status&&n.data?(console.log("Fetched messages successfully:",n.data),this._messages=Array.isArray(n.data)?n.data:[],this._messagesError=null,this._messages.sort((function(e,t){return new Date(e.created_at)-new Date(t.created_at)}))):(console.error("Error fetching messages:",n.message||"Unknown error",n),this._messages=[],this._messagesError=n.message||"Gagal memuat pesan."),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(9),console.error("Error during API request for messages:",e.t0),this._messages=[],this._messagesError="Terjadi kesalahan saat memuat pesan.";case 22:return e.prev=22,this._messagesLoading=!1,this.transactionDetails&&(this.isLoading=!1),console.log("fetchMessages finally block reached. Current state after fetch:",{transactionDetails:!!this.transactionDetails,isLoading:this.isLoading,error:this.error,messagesCount:this._messages.length,messagesLoading:this._messagesLoading,messagesError:this._messagesError,isSocketConnected:this._isSocketConnected}),this.render(),e.finish(22);case 28:case"end":return e.stop()}}),e,this,[[9,17,22,28]])}))),function(e){return a.apply(this,arguments)})},{key:"_connectSocket",value:function(e){var t=this;if(!this._isSocketConnected&&e){console.log("Attempting to connect Socket.io for transaction ID: ".concat(e));var n=localStorage.getItem("token");if(!n)return console.warn("No JWT token found. Cannot connect Socket.io for authenticated user."),this._messagesError="Anda harus login untuk menggunakan chat.",void this.render();this._socket=pn("http://localhost:5000",{query:{transactionId:e},auth:{token:n}}),this._socket.on("connect",(function(){t._isSocketConnected=!0,console.log("Socket.io connected:",t._socket.id),t._socket&&t.transactionId&&(console.log("Emitting 'joinTransaction' for ID: ".concat(t.transactionId)),t._socket.emit("joinTransaction",parseInt(t.transactionId,10)))})),this._socket.on("disconnect",(function(e){t._isSocketConnected=!1,console.log("Socket.io disconnected:",e)})),this._socket.on("connect_error",this._handleSocketError),this._socket.on("error",this._handleSocketError),this._socket.on("newMessage",this._handleNewMessage),this._socket.on("messageError",(function(e){console.error("Server reported message error:",e.error),alert("Gagal mengirim pesan: "+(e.error||"Terjadi kesalahan server."))})),console.log("Socket.io event listeners for messages added.")}else e?this._isSocketConnected&&console.log("Socket already connected."):console.warn("Cannot connect Socket.io: No valid transaction ID.")}},{key:"_disconnectSocket",value:function(){this._socket&&(console.log("Disconnecting Socket.io..."),this._socket.off("connect"),this._socket.off("disconnect"),this._socket.off("connect_error",this._handleSocketError),this._socket.off("error",this._handleSocketError),this._socket.off("newMessage",this._handleNewMessage),this._socket.off("messageError"),this._socket.disconnect(),this._socket=null,this._isSocketConnected=!1,console.log("Socket.io disconnected."))}},{key:"_handleSocketError",value:function(e){console.error("Socket.io error handler:",e),this._isSocketConnected=!1}},{key:"_handleNewMessage",value:function(e){var t=this;console.log("Received new message via Socket.io:",e),e&&e.transaction_id&&this.transactionId&&parseInt(e.transaction_id,10)===parseInt(this.transactionId,10)?this._messages.find((function(t){return t.id===e.id}))?console.log("Received duplicate message via Socket.io, ignoring.",e):(console.log("Adding new message to state:",e),this._messages.push(e),this._messages.sort((function(e,t){return new Date(e.created_at)-new Date(t.created_at)})),this.render(),requestAnimationFrame((function(){var e=t.querySelector("#messages-list");e?(e.scrollTop=e.scrollHeight,console.log("Scrolled messages list to bottom.")):console.warn("Messages list element not found for scrolling after new message.")}))):(console.warn("Received new message not for this transaction or invalid format, ignoring:",e),console.log("Expected transaction ID:",this.transactionId,"Received transaction ID:",e?e.transaction_id:"N/A"))}},{key:"setupEventListeners",value:function(){var e=this;console.log("Setting up event listeners..."),this.removeEventListeners();var t=this.querySelector("#transaction-actions");t&&(this.handleStatusUpdateDelegate=function(t){var n=t.target;if(n.classList.contains("status-update-button")){var r=n.dataset.status;r&&e.transactionDetails&&e.transactionDetails.id&&e.handleStatusUpdate(e.transactionDetails.id,r)}},t.addEventListener("click",this.handleStatusUpdateDelegate),console.log("Transaction actions delegate listener added."));var n=this.querySelector("#send-message-form");n&&(this._sendMessageSubmitHandler=this._handleSendMessageSocket,n.addEventListener("submit",this._sendMessageSubmitHandler),console.log("Send message form submit listener added.")),console.log("Finished setting up event listeners.")}},{key:"removeEventListeners",value:function(){console.log("Removing event listeners...");var e=this.querySelector("#transaction-actions");e&&this.handleStatusUpdateDelegate&&(e.removeEventListener("click",this.handleStatusUpdateDelegate),this.handleStatusUpdateDelegate=null,console.log("Transaction actions delegate listener removed."));var t=this.querySelector("#send-message-form");t&&this._sendMessageSubmitHandler&&(t.removeEventListener("submit",this._sendMessageSubmitHandler),this._sendMessageSubmitHandler=null,console.log("Send message form submit listener removed.")),console.log("Finished removing event listeners.")}},{key:"_handleSendMessageSocket",value:function(e){if(e.preventDefault(),console.log("Send message form submitted (Socket.io)."),!(this._socket&&this._isSocketConnected&&this.transactionDetails&&this.transactionDetails.id))return console.warn("Socket not connected or transaction details missing. Cannot send message via Socket.io."),void alert("Tidak dapat mengirim pesan: Koneksi chat tidak aktif atau informasi transaksi tidak lengkap.");var t=e.target,n=t.querySelector("#message-input"),r=n?n.value.trim():"";if(r){var o=t.querySelector('button[type="submit"]');o&&(o.disabled=!0);try{console.log("Attempting to emit 'sendMessage' event for transaction ID: ".concat(this.transactionDetails.id)),this._socket.emit("sendMessage",{transaction_id:parseInt(this.transactionDetails.id,10),content:r}),console.log("'sendMessage' event emitted."),n&&(n.value="")}catch(e){console.error("Error emitting sendMessage event:",e),alert("Terjadi kesalahan saat mengirim pesan melalui Socket.io.")}finally{o&&(o.disabled=!1)}}else alert("Pesan tidak boleh kosong.")}},{key:"render",value:function(){console.log("DetailTransaction Render method called. Current state:",{isLoading:this.isLoading,error:this.error,hasData:!!this.transactionDetails,messagesLoading:this._messagesLoading,messagesError:this._messagesError,hasMessages:this._messages.length>0,isSocketConnected:this._isSocketConnected}),this._emptyContent(),console.log("Render method: Content cleared.");try{var e=this.renderContentContent(this.isLoading,this.error,this.transactionDetails,W.getUserInfo()),t=this.renderMessagesSection(this._messagesLoading,this._messagesError,this._messages,W.getUserInfo());console.log("Render method: renderContentContent returned HTML string."),e||console.warn("renderContentContent returned an empty string or null."),this.innerHTML='\n            <div class="container mx-auto px-4 py-8">\n                <h1 class="text-2xl font-bold mb-6">Detail Transaksi</h1>\n\n                \x3c!-- Transaction Detail Area --\x3e\n                <div id="transaction-detail-content">\n                        '.concat(e,'\n                    </div>\n\n                    \x3c!-- Messages Section --\x3e\n                     <div class="mt-8 border-t pt-8">\n                        <h2 class="text-2xl font-bold mb-6">Pesan Transaksi</h2>\n                        ').concat(t,"\n                </div>\n            </div>\n        "),console.log("Render method: innerHTML set.")}catch(e){console.error("Error inside render method:",e),this.innerHTML='<p class="text-red-500">Terjadi kesalahan saat menampilkan detail.</p>'}this.isLoading||this._messagesLoading||this.error||this._messagesError||this.setupEventListeners()}},{key:"renderContentContent",value:function(e,t,n,r){if(console.log("renderContentContent called with state:",{isLoading:e,error:t,hasTransaction:!!n,hasCurrentUser:!!r}),e)return console.log("renderContentContent: Showing loading."),"<p>Memuat detail transaksi...</p>";if(t)return console.log("renderContentContent: Showing error:",t),'<p class="text-red-500">Error: '.concat(t,"</p>");if(!n)return console.log("renderContentContent: Showing no data message."),"<p>Detail transaksi tidak tersedia.</p>";var o=r&&n.seller_id===r.id,i=r&&n.buyer_id===r.id;console.log("renderContentContent: Transaction data available. isSeller:",o,"isBuyer:",i);var a=function(e){if(null==e)return"-";var t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)},s=n.status||"Unknown Status",c="text-gray-600 bg-gray-100 px-2 py-0.5 rounded-full text-xs font-semibold";switch(n.status){case"pending":c="text-yellow-600 bg-yellow-100 px-2 py-0.5 rounded-full text-xs font-semibold";break;case"ongoing":c="text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full text-xs font-semibold";break;case"completed":c="text-green-600 bg-green-100 px-2 py-0.5 rounded-full text-xs font-semibold";break;case"cancelled":c="text-red-600 bg-red-500 px-2 py-0.5 rounded-full text-xs font-semibold";break;case"returned":c="text-purple-600 bg-purple-100 px-2 py-0.5 rounded-full text-xs font-semibold";break;case"late":c="text-orange-600 bg-orange-100 px-2 py-0.5 rounded-full text-xs font-semibold"}var l=[];if(o)switch(n.status){case"pending":l=[{status:"ongoing",text:"Konfirmasi & Proses"},{status:"cancelled",text:"Batalkan Transaksi"}];break;case"ongoing":l="rent"===n.type?[{status:"returned",text:"Item Telah Dikembalikan"},{status:"completed",text:"Selesaikan Transaksi Sewa"}]:[{status:"completed",text:"Selesaikan Transaksi Penjualan"}];break;case"returned":"rent"===n.type&&(l=[{status:"completed",text:"Selesaikan Transaksi Sewa"}]);break;case"late":"rent"===n.type&&(l=[{status:"returned",text:"Item Dikembalikan (Terlambat)"},{status:"completed",text:"Selesaikan Transaksi Sewa"}]);break;default:l=[]}var u=[];return i&&(u="pending"===n.status?[{status:"cancelled",text:"Batalkan Pesanan"}]:[]),'\n            <div class="bg-white shadow-md rounded-lg p-6">\n                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">\n                    <div>\n                        <h3 class="text-xl font-semibold mb-4">Informasi Transaksi</h3>\n                        <p><strong>ID Transaksi:</strong> '.concat(n.id,"</p>\n                        <p><strong>Tanggal Dibuat:</strong> ").concat(n.created_at?new Date(n.created_at).toLocaleDateString("id-ID"):"-"," ").concat(n.created_at?new Date(n.created_at).toLocaleTimeString("id-ID"):"-","</p>\n                        ").concat(n.updated_at?"<p><strong>Terakhir Diperbarui:</strong> ".concat(new Date(n.updated_at).toLocaleDateString("id-ID")," ").concat(new Date(n.updated_at).toLocaleTimeString("id-ID"),"</p>"):"",'\n                        <p><strong>Tipe:</strong> <span class="capitalize">').concat(n.type||"-",'</span></p>\n                        <p><strong>Status:</strong> <span class="').concat(c,'">').concat(s,"</span></p>\n                        <p><strong>Metode Pembayaran:</strong> ").concat(n.payment_method||"-","</p>\n                        <p><strong>Total Harga:</strong> ").concat(a(n.total_price),"</p>\n                         ").concat("rent"===n.type?"\n                             <p><strong>Periode Sewa:</strong> ".concat(n.rent_start_date?new Date(n.rent_start_date).toLocaleDateString("id-ID"):"-"," - ").concat(n.rent_end_date?new Date(n.rent_end_date).toLocaleDateString("id-ID"):"-","</p>\n                             <p><strong>Deposit Dibayar:</strong> ").concat(a(n.deposit_paid),"</p>\n                         "):"",'\n                    </div>\n                    <div>\n                        <h3 class="text-xl font-semibold mb-4">Informasi Item</h3>\n                         <p><strong>Nama Item:</strong> ').concat(n.item_name||"Tidak Diketahui","</p>\n                         ").concat(n.item_photo?'\n                             <img src="http://localhost:5000'.concat(n.item_photo,'" alt="Item Photo" class="w-32 h-32 object-cover rounded mt-2">\n                         '):"",'\n                        \x3c!-- Link to item detail page? --\x3e\n                         <div class="mt-2">\n                             <a href="/#/items/').concat(n.item_id,'" class="text-blue-600 hover:underline">Lihat Detail Item</a>\n                         </div>\n                    </div>\n                     <div>\n                         <h3 class="text-xl font-semibold mb-4">Informasi Pihak Terlibat</h3>\n                         <p><strong>Pembeli/Penyewa:</strong> ').concat(n.buyer_name||"Tidak Diketahui"," (").concat(n.buyer_email||"-",")</p>\n                         <p><strong>Penjual/Pemilik:</strong> ").concat(n.seller_name||"Tidak Diketahui"," (").concat(n.seller_email||"-",')</p>\n                         \x3c!-- TODO: Add links to user profiles? --\x3e\n                     </div>\n                     \x3c!-- Add shipping/delivery info if applicable --\x3e\n                </div>\n\n                 \x3c!-- Status Update/Action Buttons section --\x3e\n                 <div class="mt-6 border-t pt-6">\n                     <h3 class="text-xl font-semibold mb-4">Aksi Transaksi</h3>\n                     <div id="transaction-actions">\n                          ').concat(o&&l.length>0?l.map((function(e){return'\n                                <button class="status-update-button bg-indigo-500 hover:bg-indigo-600 text-white text-sm px-3 py-1 rounded mr-2"\n                                        data-status="'.concat(e.status,'">\n                                    ').concat(e.text,"\n                                </button>\n                            ")})).join(""):i&&u.length>0?u.map((function(e){return'\n                                <button class="status-update-button bg-indigo-500 hover:bg-indigo-600 text-white text-sm px-3 py-1 rounded mr-2"\n                                        data-status="'.concat(e.status,'">\n                                    ').concat(e.text,"\n                                </button>\n                            ")})).join(""):o?"<p>Tidak ada aksi status yang tersedia untuk Anda sebagai Penjual saat ini.</p>":i?"<p>Tidak ada aksi yang tersedia untuk Anda sebagai Pembeli saat ini.</p>":"<p>Anda tidak memiliki izin untuk mengambil tindakan pada transaksi ini.</p>","\n                     </div>\n                 </div>\n            </div>\n        ")}},{key:"renderMessagesSection",value:function(e,t,n,r){var o=this;if(console.log("renderMessagesSection called with state:",{isLoading:e,error:t,hasMessages:n.length>0,hasCurrentUser:!!r}),e)return"<p>Memuat pesan...</p>";if(t)return'<p class="text-red-500">Error memuat pesan: '.concat(t,"</p>");if(!r)return'<p class="text-gray-600">Login untuk melihat pesan.</p>';var i=0===n.length?"<p>Belum ada pesan dalam transaksi ini.</p>":n.map((function(e){return o.renderMessage(e,r.id)})).join("");return'\n            <div class="bg-gray-100 p-4 rounded-lg shadow-inner">\n                <div id="messages-list" class="h-64 overflow-y-auto mb-4 p-2 border rounded bg-white">\n                    '.concat(i,'\n                </div>\n                <form id="send-message-form">\n                    <div class="flex">\n                        <input type="text" id="message-input" placeholder="Ketik pesan..."\n                               class="flex-grow rounded-l-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 sm:text-sm"\n                               required>\n                        <button type="submit"\n                                class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-r-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">\n                            Kirim\n                        </button>\n                    </div>\n                </form>\n            </div>\n         ')}},{key:"renderMessage",value:function(e,t){if(!e)return"";var n=e.sender_id===t,r=n?"items-end":"items-start",o=n?"bg-indigo-500 text-white":"bg-gray-300 text-gray-800",i=n?"Anda":e.sender_name||"Pengguna";return'\n             <div class="flex flex-col '.concat(r,' mb-2">\n                 <div class="text-xs text-gray-600 mb-0.5">').concat(i,'</div>\n                 <div class="').concat(o,' p-2 rounded-lg max-w-xs break-words">\n                     ').concat(e.content||"",'\n                 </div>\n                  <div class="text-xs text-gray-500 mt-0.5">\n                     ').concat(e.created_at?new Date(e.created_at).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"","\n                 </div>\n             </div>\n         ")}},{key:"handleStatusUpdate",value:(i=gn(fn().mark((function e(t,n){var r,o;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=4;break}return console.error("Missing transaction ID or new status for update."),alert("Gagal memperbarui status: Informasi tidak lengkap."),e.abrupt("return");case 4:if(confirm('Apakah Anda yakin ingin mengubah status transaksi ini menjadi "'.concat(n,'"?'))){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,console.log("Attempting to update transaction ".concat(t," status to: ").concat(n)),e.next=11,f("/transactions/".concat(t,"/status"),"PATCH",{status:n});case 11:"success"===(r=e.sent).status?(console.log("Transaction status updated successfully:",r.data),alert("Status transaksi berhasil diperbarui!"),this.fetchTransactionDetails(t)):(console.error("Failed to update transaction status:",r.message||"Unknown error",r),o="Gagal memperbarui status transaksi: "+(r.message||"Terjadi kesalahan"),r.errors&&Array.isArray(r.errors)&&(o+="\nValidasi error:",r.errors.forEach((function(e){e&&e.param&&e.msg?o+="\n- ".concat(e.param,": ").concat(e.msg):"string"==typeof e&&(o+="\n- ".concat(e))}))),alert(o)),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),console.error("Error during API request for status update:",e.t0),alert("Terjadi kesalahan saat memperbarui status transaksi.");case 19:case"end":return e.stop()}}),e,this,[[7,15]])}))),function(e,t){return i.apply(this,arguments)})}],o=[{key:"observedAttributes",get:function(){return["transaction-id"]}}],r&&bn(n.prototype,r),o&&bn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a,s}(yn(HTMLElement));function Ln(e){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(e)}function En(){En=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new O(r||[]);return o(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(C([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=y.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Ln(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,n,r){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Ln(t)+" is not iterable")}return b.prototype=y,o(_,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:b,configurable:!0}),b.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new L(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Pn(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jn(r.key),r)}}function jn(e){var t=function(e){if("object"!=Ln(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ln(t)?t:t+""}function On(e){var t="function"==typeof Map?new Map:void 0;return On=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(Cn())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&In(o,n.prototype),o}(e,arguments,An(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),In(n,e)},On(e)}function Cn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cn=function(){return!!e})()}function In(e,t){return In=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},In(e,t)}function An(e){return An=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},An(e)}customElements.define("detail-transaction-page",Sn);var Rn=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t,n){return t=An(t),function(e,t){if(t&&("object"==Ln(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Cn()?Reflect.construct(t,n||[],An(e).constructor):t.apply(e,n))}(this,t)).sellerTransactions=[],e.isLoading=!0,e.error=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&In(e,t)}(t,e),n=t,r=[{key:"_emptyContent",value:function(){this.innerHTML=""}},{key:"connectedCallback",value:function(){if(!W.isAuthenticated())return alert("Anda harus login untuk melihat halaman ini."),void W.redirectToLogin();this._emptyContent(),this.renderLayout(),this.fetchSellerTransactions()}},{key:"disconnectedCallback",value:function(){}},{key:"renderLayout",value:function(){this.innerHTML='\n            <div class="container mx-auto px-4 py-8">\n                <h1 class="text-2xl font-bold mb-6">Transaksi Item Saya (Sebagai Penjual)</h1>\n\n                \x3c!-- Seller Transaction List Area --\x3e\n                <div id="seller-transactions-list">\n                    '.concat(this.isLoading?"<p>Memuat transaksi item Anda...</p>":"","\n                    ").concat(this.error?'<p class="text-red-500">'.concat(this.error,"</p>"):"","\n                </div>\n\n                \x3c!-- TODO: Add Pagination here if needed --\x3e\n            </div>\n        ")}},{key:"renderSellerTransactions",value:function(){var e=this.querySelector("#seller-transactions-list");e?(e.innerHTML="",0!==this.sellerTransactions.length?e.innerHTML='\n             <div class="space-y-4">\n                '.concat(this.sellerTransactions.map((function(e){var t=e.status||"Status Tidak Diketahui",n="text-gray-800 bg-gray-100";switch(e.status){case"pending":n="text-yellow-800 bg-yellow-100";break;case"approved":n="text-blue-800 bg-blue-100";break;case"rejected":case"cancelled":n="text-red-800 bg-red-100";break;case"completed":n="text-green-800 bg-green-100";break;case"rented":n="text-purple-800 bg-purple-100"}var r="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ".concat(n);return'\n                    <div class="border p-4 rounded-md shadow-sm bg-white flex justify-between items-center flex-wrap">\n                         <div class="flex-1 min-w-0 mr-4">\n                            <h3 class="text-lg font-semibold">Item: '.concat(e.item_name||"Nama Item Tidak Diketahui",'</h3>\n                            <p>Tipe Transaksi: <span class="capitalize">').concat(e.type,'</span></p>\n                            <p>Status: <span class="').concat(r,'">').concat(t,"</span></p>\n                            <p>Pembeli/Penyewa: ").concat(e.buyer_name||"Tidak Diketahui","</p>\n                            <p>Total Harga: Rp ").concat(e.total_price?parseFloat(e.total_price).toLocaleString("id-ID"):"N/A","</p>\n                            ").concat("rent"===e.type?"\n                                <p>Tanggal Sewa: ".concat(e.rent_start_date?new Date(e.rent_start_date).toLocaleDateString("id-ID"):"-"," - ").concat(e.rent_end_date?new Date(e.rent_end_date).toLocaleDateString("id-ID"):"-","</p>\n                                <p>Deposit Dibayar: Rp ").concat(e.deposit_paid?parseFloat(e.deposit_paid).toLocaleString("id-ID"):"0","</p>\n                            "):"","\n                            <p>Tanggal Transaksi: ").concat(e.created_at?new Date(e.created_at).toLocaleDateString("id-ID"):"-",'</p>\n                            \x3c!-- Add more details as needed --\x3e\n                         </div>\n                        <div class="mt-4 md:mt-0">\n                           <a href="/#/transactions/').concat(e.id,'" class="bg-blue-500 hover:bg-blue-700 text-white text-sm px-3 py-1 rounded inline-block">Detail</a>\n                            \x3c!-- TODO: Add status update buttons based on current status and type --\x3e\n                        </div>\n                    </div>\n                ')})).join(""),"\n             </div>\n        "):e.innerHTML="<p>Anda belum memiliki item yang terjual atau disewa.</p>"):console.error("Seller transactions list element not found!")}},{key:"fetchSellerTransactions",value:(o=En().mark((function e(){var t;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,this.error=null,this.renderLayout(),e.prev=3,e.next=6,f("/transactions/seller","GET");case 6:"success"===(t=e.sent).status&&t.data?(console.log("Fetched seller transactions:",t.data),this.sellerTransactions=t.data,this.error=null):(console.error("Error fetching seller transactions:",t.message||"Unknown error"),this.sellerTransactions=[],this.error=t.message||"Gagal memuat transaksi penjual."),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Error during API request for seller transactions:",e.t0),this.sellerTransactions=[],this.error="Terjadi kesalahan saat memuat transaksi penjual.";case 15:return e.prev=15,this.isLoading=!1,this.renderSellerTransactions(),e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[3,10,15,19]])})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){Pn(i,n,r,a,s,"next",e)}function s(e){Pn(i,n,r,a,s,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})}],r&&Tn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i}(On(HTMLElement));function Bn(e){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bn(e)}function Dn(e){return function(e){if(Array.isArray(e))return Mn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Mn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function qn(){qn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new O(r||[]);return o(a,"_invoke",{value:E(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(C([])));k&&k!==n&&r.call(k,a)&&(w=k);var _=y.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Bn(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,n,r){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Bn(t)+" is not iterable")}return b.prototype=y,o(_,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:b,configurable:!0}),b.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(L.prototype),l(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new L(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(_),l(_,c,"Generator"),l(_,a,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Nn(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Hn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Nn(i,r,o,a,s,"next",e)}function s(e){Nn(i,r,o,a,s,"throw",e)}a(void 0)}))}}function Fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Un(r.key),r)}}function Un(e){var t=function(e){if("object"!=Bn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Bn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Bn(t)?t:t+""}function $n(e){var t="function"==typeof Map?new Map:void 0;return $n=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(Gn())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&zn(o,n.prototype),o}(e,arguments,Vn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),zn(n,e)},$n(e)}function Gn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gn=function(){return!!e})()}function zn(e,t){return zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zn(e,t)}function Vn(e){return Vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vn(e)}customElements.define("my-seller-transactions-page",Rn);var Kn=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t,n){return t=Vn(t),function(e,t){if(t&&("object"==Bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Gn()?Reflect.construct(t,n||[],Vn(e).constructor):t.apply(e,n))}(this,t))._messages=[],e._socket=null,e._isSocketConnected=!1,e._isLoading=!1,e._hasMoreMessages=!0,e._currentPage=1,e._messagesPerPage=20,e.fetchMessageHistory=e.fetchMessageHistory.bind(e),e.loadMoreMessages=e.loadMoreMessages.bind(e),e._connectSocket=e._connectSocket.bind(e),e._handleNewMessage=e._handleNewMessage.bind(e),e._handleScroll=e._handleScroll.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zn(e,t)}(t,e),n=t,r=[{key:"connectedCallback",value:(a=Hn(qn().mark((function e(){var t=this;return qn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W.isAuthenticated()){e.next=3;break}return W.redirectToLogin(),e.abrupt("return");case 3:return e.next=5,this.fetchMessageHistory();case 5:this._connectSocket(),this.render(),this._setupScrollListener(),setTimeout((function(){var e=t.querySelector(".messages-container");e&&(e.scrollTop=e.scrollHeight)}),0);case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchMessageHistory",value:(i=Hn(qn().mark((function e(){var t,n,r,o=arguments;return qn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:1,e.prev=1,this._isLoading=!0,e.next=5,f("/community-messages?page=".concat(t,"&limit=").concat(this._messagesPerPage),"GET");case 5:"success"===(n=e.sent).status&&(r=n.data||[],this._messages=1===t?r:[].concat(Dn(r),Dn(this._messages)),this._hasMoreMessages=r.length===this._messagesPerPage,this._currentPage=t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Error fetching message history:",e.t0);case 12:return e.prev=12,this._isLoading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[1,9,12,15]])}))),function(){return i.apply(this,arguments)})},{key:"loadMoreMessages",value:(o=Hn(qn().mark((function e(){var t,n;return qn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isLoading&&this._hasMoreMessages){e.next=2;break}return e.abrupt("return");case 2:return t=this.querySelector(".messages-container"),n=t.scrollHeight,e.next=6,this.fetchMessageHistory(this._currentPage+1);case 6:this.render(),setTimeout((function(){var e=t.scrollHeight;t.scrollTop=e-n}),0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"_setupScrollListener",value:function(){var e=this.querySelector(".messages-container");e&&e.addEventListener("scroll",this._handleScroll)}},{key:"_handleScroll",value:function(e){e.target.scrollTop<=100&&this._hasMoreMessages&&!this._isLoading&&this.loadMoreMessages()}},{key:"_connectSocket",value:function(){var e=this,t=localStorage.getItem("token");this._socket=pn("http://localhost:5000",{auth:{token:t}}),this._socket.on("connect",(function(){e._isSocketConnected=!0,e._socket.emit("joinCommunity"),e._setupInputListeners()})),this._socket.on("newCommunityMessage",this._handleNewMessage)}},{key:"_setupInputListeners",value:function(){var e=this,t=this.querySelector(".send-button"),n=this.querySelector(".message-input-field"),r=function(){var t=null==n?void 0:n.value.trim();t&&e._isSocketConnected&&(e._socket.emit("sendCommunityMessage",{content:t}),n.value="",n.style.height="auto")};null==t||t.removeEventListener("click",this._sendMessage),null==n||n.removeEventListener("keypress",this._handleKeypress),null==n||n.removeEventListener("input",this._handleInput),this._sendMessage=r,this._handleKeypress=function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),r())},this._handleInput=function(e){e.target.style.height="auto",e.target.style.height=Math.min(e.target.scrollHeight,120)+"px"},null==t||t.addEventListener("click",this._sendMessage),null==n||n.addEventListener("keypress",this._handleKeypress),null==n||n.addEventListener("input",this._handleInput)}},{key:"_handleNewMessage",value:function(e){var t=this.querySelector(".messages-container"),n=localStorage.getItem("userId"),r=e.sender_id==n,o=t&&t.scrollTop+t.clientHeight>=t.scrollHeight-50;if(this._messages.push(e),t){var i=document.createElement("div");i.className="message ".concat(r?"own":"");var a=(e.sender_name||"U").charAt(0).toUpperCase();i.innerHTML='\n        <div class="message-avatar">'.concat(a,'</div>\n        <div class="message-content">\n          <div class="message-bubble">').concat(e.content,'</div>\n          <div class="message-meta">\n            ').concat(r?"":'<span class="message-sender">'.concat(e.sender_name||"User","</span>"),'\n            <span class="message-time">').concat(this._formatTime(e.created_at),"</span>\n          </div>\n        </div>\n      "),t.appendChild(i),(r||o)&&setTimeout((function(){t.scrollTop=t.scrollHeight}),0)}}},{key:"_formatTime",value:function(e){var t=new Date(e);return(new Date-t)/36e5<24?t.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}},{key:"render",value:function(){var e,t=this,n=(null===(e=this._messages[0])||void 0===e?void 0:e.sender_province_name)||"",r=localStorage.getItem("userId");this.innerHTML='\n      <style>\n        * {\n          box-sizing: border-box;\n        }\n        \n        .community-container {\n          max-width: 800px;\n          margin: 0 auto;\n          height: 80vh;\n          display: flex;\n          flex-direction: column;\n          background: #f8fafc;\n          border: 1px solid #e2e8f0;\n          border-radius: 12px;\n          overflow: hidden;\n        }\n        \n        .chat-header {\n          background: #ffffff;\n          padding: 16px 20px;\n          border-bottom: 1px solid #e2e8f0;\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n        \n        .chat-header-info h3 {\n          margin: 0;\n          font-size: 18px;\n          font-weight: 600;\n          color: #1a202c;\n        }\n        \n        .chat-header-info p {\n          margin: 0;\n          font-size: 14px;\n          color: #718096;\n        }\n        \n        .online-indicator {\n          width: 12px;\n          height: 12px;\n          background: #48bb78;\n          border-radius: 50%;\n          border: 2px solid #ffffff;\n        }\n        \n        .messages-container {\n          flex: 1;\n          overflow-y: auto;\n          padding: 16px;\n          background: #ffffff;\n          scroll-behavior: smooth;\n        }\n        \n        .messages-container::-webkit-scrollbar {\n          width: 6px;\n        }\n        \n        .messages-container::-webkit-scrollbar-track {\n          background: transparent;\n        }\n        \n        .messages-container::-webkit-scrollbar-thumb {\n          background: #cbd5e0;\n          border-radius: 3px;\n        }\n        \n        .loading-indicator {\n          text-align: center;\n          padding: 12px;\n          color: #718096;\n          font-size: 14px;\n        }\n        \n        .message {\n          margin-bottom: 16px;\n          display: flex;\n          align-items: flex-start;\n          gap: 12px;\n        }\n        \n        .message.own {\n          flex-direction: row-reverse;\n        }\n        \n        .message-avatar {\n          width: 36px;\n          height: 36px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: 600;\n          font-size: 14px;\n          flex-shrink: 0;\n        }\n        \n        .message-content {\n          max-width: 70%;\n          min-width: 120px;\n        }\n        \n        .message-bubble {\n          padding: 12px 16px;\n          border-radius: 18px;\n          background: #f7fafc;\n          border: 1px solid #e2e8f0;\n          word-wrap: break-word;\n          line-height: 1.4;\n        }\n        \n        .message.own .message-bubble {\n          background: #4299e1;\n          color: white;\n          border-color: #4299e1;\n        }\n        \n        .message-meta {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          margin-top: 4px;\n          font-size: 12px;\n          color: #718096;\n        }\n        \n        .message.own .message-meta {\n          justify-content: flex-end;\n        }\n        \n        .message-sender {\n          font-weight: 500;\n        }\n        \n        .message-time {\n          color: #a0aec0;\n        }\n        \n        .message-input-container {\n          padding: 16px 20px;\n          background: #ffffff;\n          border-top: 1px solid #e2e8f0;\n          display: flex;\n          align-items: flex-end;\n          gap: 12px;\n        }\n        \n        .message-input-field {\n          flex: 1;\n          padding: 12px 16px;\n          border: 1px solid #e2e8f0;\n          border-radius: 24px;\n          background: #f7fafc;\n          resize: none;\n          outline: none;\n          font-family: inherit;\n          font-size: 14px;\n          line-height: 1.4;\n          max-height: 120px;\n          min-height: 44px;\n          transition: all 0.2s ease;\n        }\n        \n        .message-input-field:focus {\n          border-color: #4299e1;\n          background: #ffffff;\n          box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);\n        }\n        \n        .message-input-field::placeholder {\n          color: #a0aec0;\n        }\n        \n        .send-button {\n          width: 44px;\n          height: 44px;\n          border: none;\n          border-radius: 50%;\n          background: #4299e1;\n          color: white;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: all 0.2s ease;\n          flex-shrink: 0;\n        }\n        \n        .send-button:hover {\n          background: #3182ce;\n          transform: scale(1.05);\n        }\n        \n        .send-button:active {\n          transform: scale(0.95);\n        }\n        \n        .empty-state {\n          text-align: center;\n          color: #718096;\n          padding: 40px 20px;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 12px;\n        }\n        \n        .empty-state-icon {\n          width: 64px;\n          height: 64px;\n          border-radius: 50%;\n          background: #f7fafc;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 24px;\n        }\n        \n        @media (max-width: 768px) {\n          .community-container {\n            height: 90vh;\n            border-radius: 0;\n            border: none;\n          }\n          \n          .message-content {\n            max-width: 85%;\n          }\n          \n          .chat-header {\n            padding: 12px 16px;\n          }\n          \n          .messages-container {\n            padding: 12px;\n          }\n          \n          .message-input-container {\n            padding: 12px 16px;\n          }\n        }\n      </style>\n      <div class="community-container">\n        <div class="chat-header">\n          <div class="online-indicator"></div>\n          <div class="chat-header-info">\n            <h3>Komunitas '.concat(n,"</h3>\n            <p>").concat(this._isSocketConnected?"Online":"Connecting...",'</p>\n          </div>\n        </div>\n        \n        <div class="messages-container">\n          ').concat(this._isLoading&&this._currentPage>1?'<div class="loading-indicator">Memuat pesan lama...</div>':"","\n          \n          ").concat(0===this._messages.length?'<div class="empty-state">\n              <div class="empty-state-icon">💬</div>\n              <p>Belum ada pesan dalam komunitas ini</p>\n              <p>Mulai percakapan dengan mengirim pesan pertama!</p>\n            </div>':this._messages.map((function(e){var n=r&&e.sender_id==r,o=(e.sender_name||"U").charAt(0).toUpperCase();return'\n                <div class="message '.concat(n?"own":"",'">\n                  <div class="message-avatar">').concat(o,'</div>\n                  <div class="message-content">\n                    <div class="message-bubble">').concat(e.content,'</div>\n                    <div class="message-meta">\n                      ').concat(n?"":'<span class="message-sender">'.concat(e.sender_name||"User","</span>"),'\n                      <span class="message-time">').concat(t._formatTime(e.created_at),"</span>\n                    </div>\n                  </div>\n                </div>\n              ")})).join(""),'\n        </div>\n        \n        <div class="message-input-container">\n          <textarea class="message-input-field" placeholder="Ketik pesan..." rows="1"></textarea>\n          <button class="send-button">\n            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <line x1="22" y1="2" x2="11" y2="13"></line>\n              <polygon points="22,2 15,22 11,13 2,9"></polygon>\n            </svg>\n          </button>\n        </div>\n      </div>\n    '),setTimeout((function(){t._setupScrollListener(),t._isSocketConnected&&t._setupInputListeners()}),0)}}],r&&Fn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}($n(HTMLElement));function Yn(e){var t=e.replace(/^\/|\/$/g,"").split("/");return{resource:t[0]||null,id:t[1]||null}}function Wn(){return location.hash.slice(1)||"/"}customElements.define("community-page",Kn);var Jn=function(e,t){if(W.isAuthenticated()){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];t.apply(void 0,[e].concat(r))}else window.location.hash="#/login"},Xn=function(e,t){if(W.isAuthenticated())window.location.hash="#/";else{for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];t.apply(void 0,[e].concat(r))}},Zn={"/":function(e){e.innerHTML="<all-product></all-product>"},"/items/:id":function(e,t){e.innerHTML='<detail-product item-id="'.concat(t,'"></detail-product>')},"/transactions/:id":function(e,t){W.isAuthenticated()?e.innerHTML='<detail-transaction-page transaction-id="'.concat(t,'"></detail-transaction-page>'):W.redirectToLogin()},"/login":function(e){return Xn(e,(function(e){e.innerHTML="<login-page></login-page>"}))},"/register":function(e){return Xn(e,(function(e){e.innerHTML="<register-page></register-page>"}))},"/cart":function(e){return Jn(e,(function(e){e.innerHTML="<h1>Cart Page (Requires Login)</h1>"}))},"/my-rentals":function(e){return Jn(e,(function(e){e.innerHTML="<my-transactions-page></my-transactions-page>"}))},"/profile":function(e){return Jn(e,(function(e){e.innerHTML="<profile-page></profile-page>"}))},"/my-items":function(e){return Jn(e,(function(e){e.innerHTML="<my-items-page></my-items-page>"}))},"/my-transactions":function(e){return Jn(e,(function(e){e.innerHTML="<my-transactions-page></my-transactions-page>"}))},"/my-sales":function(e){return Jn(e,(function(e){e.innerHTML="<my-seller-transactions-page></my-seller-transactions-page>"}))},"/community":function(e){e.innerHTML="<community-page></community-page>"}},Qn=document.querySelector("main"),er=document.querySelector("search-bar"),tr=function(){var e,t,n=(e=Yn(Wn()),t="",e.resource&&(t=t.concat("/".concat(e.resource))),e.id&&(t=t.concat("/:id")),t||"/"),r=Zn[n];if(er&&("/login"===n||"/register"===n?er.classList.add("hidden"):er.classList.remove("hidden")),r){var o=Yn(Wn());"/items/:id"===n||"/transactions/:id"===n?r(Qn,o?o.id:void 0):r(Qn)}else window.location.hash="#/"};document.addEventListener("DOMContentLoaded",(function(){window.location.hash&&"#"!==window.location.hash?tr():window.location.hash="#/"})),window.addEventListener("hashchange",(function(){tr()}))})()})();